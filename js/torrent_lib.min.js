window.torrent_lib = {};
window.torrent_lib_min = 1;torrent_lib.anidub = function () {
    var name = 'AniDUB';
    var filename = 'anidub';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACRjor/c3Fu/4WEgv+/v77/i4uL/4GBgP9ycG7/jouI/zMyMN8IBgVwLi0rEwAAAAAAAAAAAAAAAAAAAAAAAAAAfnx5/8rKyv+wr6//zc3M/9LS0v/5+fn/g4KB/6uopP+em5f/Z2Vi/1FPTfgsLCqOSUlGDAAAAAAAAAAAAAAAAJubmv/h4eH/0NDQ//39/f/ExMT/h4eF/42LiP+ioJ3/nZuX/357eP+6t7P/l5SR/0tKR92fnZkjAAAAAAAAAADPzs7/5eXl/8bGxf+fn57/iIeE/6ilof+trKr//v7+/8rJyP+fnJn/npuY/7u5tf+vrKj/MjEvygAAAAAAAAAAzc3M/8bGxf/DwsH/lpOQ/6uopP+rqKT/nZuZ/9zc3P+lpKL/q6ik/46Mif+7ubX/urez/z89O/YREA8JAAAAAOrq6v+fn57/kI6K/6uopP+rqKT/q6ik/6uopP+gnpr/qaai/6ekoP+Qjov/sq+r/3Z0cf8LCglxAAAAAAAAAADIyMf/h4aD/6uopP+rqKT/q6ik/6uopP+rqKT/q6ik/6uopP+MiYb/kY6L/05MSu8vLixhAAAAAAAAAAAAAAAAoZ+d/52bmP+vraz/pKGd/6uopP+rqKT/q6ik/6uopP+rqKT/QUA97wsKCXw9PToVAAAAAAAAAAAAAAAAAAAAAKuopP/R0dH//v7+/66tq/+rqKT/q6ik/6uopP+rqKT/eXZz/wgGBVoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACrqKT/trWz/87NzP+gnZr/q6ik/6uopP+rqKT/enh1/xIRD4EAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAenh0/6Wjn/+rqKT/q6ik/6uopP+Rjor/RkRC4woJB1kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKekof99e3j/fnx5/4WDf/+Egn7/Ly4s4wgGBQkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACYlpP/u7m1/7u5tf+vrKj/cnBt/zIyMFoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPTs5za+sqP+6t7P/iYeD/zMyMJ4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAL+9uxs6OTfNTEpI9jQzMYVUVFECAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgGBQkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB+sQQAHrEEAA6xBAAOsQQABrEEAA6xBAAesQQAPrEEAP6xBAH+sQQD/rEEB/6xBA/+sQQf/rEEH/6xB3/+sQQ%3D%3D';
    var url = 'http://tr.anidub.com/browse.php';
    var root_url = 'http://tr.anidub.com/';
    var about = 'Аниме торрент-трекер Anidub.';
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[],
                /* Музыка */['Music/OST'],
                /* Игры */['Anime Games', 'Онлайн игры'],
                /* Фильмы */[],
                /* Мультфтльмы */[],
                /* Книги */[],
                /* ПО */[],
                /* Анимэ */['OVA', 'TV', 'Live', 'Movie', 'DVD-5/DVD-9/Blu-Ray', 'ONA', 'Manga', 'HWP', 'iPod'],
                /* Док. и юмор */[],
                /* Спорт */[],
                ['Hentai']
            ];
            for (var i = 0, len = groups_arr.length; i < len; i++)
                if (groups_arr[i].indexOf($.trim(f)) !== -1) {
                    return i;
                }
            return -1;
        };
        var calculateTime = function (f) {
            var dd = f.replace(/[\t:-]/g, ' ').split(' ');
            return Math.round((new Date(parseInt(dd[0]), parseInt(dd[1]) - 1, parseInt(dd[2]), parseInt(dd[3]), parseInt(dd[4]), parseInt(dd[5]))).getTime() / 1000);
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('table.main').eq(1).children('tbody').children('tr').children('td').children('table');
            var l = t.length;
            if ( l === 0) {
                return [];
            }
            var arr = new Array(l - 1);
            for (var i = 0; i < l - 1; i++) {
                var td = t.eq(i).children('tbody').children('tr').children('td').eq(1);
                var params = td.children('table').eq(2).find('td').eq(0).text().replace(/[\r\t]*/g, '').replace(/[а-яА-Я]*\:/gm, '').replace(/\n/gm, '').replace(/\s+/g, " ").split(' ');
                var pp = 0;
                if (params.length === 9) {
                    pp = 1;
                }
                arr[i] = {
                    category: {
                        title: td.children('table').eq(2).find('td').eq(1).children('a').eq(0).text(),
                        id: calculateCategory(td.children('table').eq(2).find('td').eq(1).children('a').eq(0).text())
                    },
                    title: td.children('table').eq(0).find('span').children('a').eq(1).text(),
                    url: root_url + td.children('table').eq(0).find('span').children('a').eq(1).attr('href'),
                    size: ex_kit.format_size($.trim(params[2 + pp] + params[3 + pp])),
                    seeds: params[5 + pp].replace(',', ''),
                    leechs: params[6 + pp].replace(',', ''),
                    time: calculateTime(td.children('table').eq(0).find('span').children('a').eq(2).text())
                }
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url + '?noscript=0&ajax=1&search=' + encodeURIComponent(text) + '&view=0&incldead=0&trailer=no&date=0',
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        };
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 1, 0, 0, 1, 0, 0, 0]
    };
}();torrent_lib.katushka = function () {
    var name = 'Катушка';
    var filename = 'katushka';
    var icon = 'data:image/x-icon;base64,R0lGODlhEAAQAMQAAO7u7oWFhbKysqurq4GBgfr6+pqamn19fZeXl46Ojr29vZOTk5+fn4KCgoeHh6Ghob+/v5iYmIqKivDw8OPj45GRkcXFxXV1dYmJib6+vnx8fIuLi4+Pj5WVlYaGhv///yH5BAAAAAAALAAAAAAQABAAAAWa4Cd+gMJ0HaMAY5s1modhntZk7TdcW+VxHE9lcxmMMheByOLxWESCC25C2LRQrQ1hAtFUWhFEq6KBMALO5UHz/DADjIUk2IkcLBQPohPgYBZydBEaFB8OCQYYG39naW4eAUofFBtwXV8jBgQFIzsZVFaZDZwiDxosSJIWDh4DnBYXCp08PkCHHEU5LzEYEg4HBLI5JCYoKiwjIQA7';
    var url = 'http://katushka.net/torrents/';
    var root_url = 'http://katushka.net';
    var about = 'Катушка, торрент трекер, торрент, torrent, кино, фильмы, музыка, софт, программы, сериалы, mp3, видео, скачать, бесплатно';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 0,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            f = f[f.length - 2];
            var groups_arr = [
                /* Сериалы */['serials'],
                /* Музыка */['music', 'clips'],
                /* Игры */['games'],
                /* Фильмы */['feature', 'films'],
                /* Мультфтльмы */['animated'],
                /* Книги */['books', 'audio', 'text'],
                /* ПО */['soft'],
                /* Анимэ */[],
                /* Док. и юмор */['documentary'],
                /* Спорт */['sport'],
                /* XXX */['xxx']
            ];
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var calculateTime = function (t) {
            var dd = $.trim(t).replace('Января', '1').replace('Февраля', '2').replace('Марта', '3')
                .replace('Апреля', '4').replace('Мая', '5').replace('Июня', '6')
                .replace('Июля', '7').replace('Августа', '8').replace('Сентября', '9')
                .replace('Октября', '10').replace('Ноября', '11').replace('Декабря', '12').replace(':', ' ').replace(',', '').split(' ');
            return Math.round((new Date(parseInt(dd[2]), parseInt(dd[1]) - 1, parseInt(dd[0]), parseInt(dd[3]), parseInt(dd[4]))).getTime() / 1000);
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('div.panel.torrents_list > div.content.after_clear').children('div.torr_block');
            var list = 0;
            var l = t.length;
            if (l === 0) {
                t = $(c).find('div.panel.torrents_list > div.content.after_clear > table.data_table.torr_table > tbody').children('tr');
                list = 1;
                l = t.length;
            }
            var i;
            var arr = new Array(l);
            if (list === 1) {
                for (i = 1; i < l; i++) {
                    var td = t.eq(i).children('td');
                    var tags = td.eq(1).children('div.tags').text();
                    arr[i - 1] = {
                        category: {
                            title: td.eq(0).children('a').attr('title') + ((tags.length > 0) ? ', ' + tags : ''),
                            url: root_url + td.eq(0).children('a').attr('href'),
                            id: calculateCategory(td.eq(0).children('a').attr('href').split('/'))
                        },
                        title: td.eq(1).children('div.torr_name').children('a').eq(1).text(),
                        url: root_url + td.eq(1).children('div.torr_name').children('a').eq(1).attr('href'),
                        size: 0,
                        seeds: parseInt(td.eq(2).text()),
                        leechs: 0,
                        time: calculateTime(td.eq(1).children('div.date').text())
                    }
                }
            } else {
                for (i = 0; i < l; i++) {
                    var td = t.eq(i);
                    var tags = td.children('div.descr').children('div.tags').text();
                    arr[i] = {
                        category: {
                            title: td.children('a').attr('title') + ((tags.length > 0) ? ', ' + tags : ''),
                            url: root_url + td.children('a').attr('href'),
                            id: calculateCategory(td.children('a').attr('href').split('/'))
                        },
                        title: td.children('div.descr').children('div.torr_name').children('a').eq(1).text(),
                        url: root_url + td.children('div.descr').children('div.torr_name').children('a').eq(1).attr('href'),
                        size: 0,
                        seeds: parseInt(td.children('div.descr').children('span').eq(0).text()),
                        leechs: 0,
                        time: calculateTime(td.children('div.descr').children('div.date').text())
                    }
                }
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url + '?tags=&search=' + ex_kit.in_cp1251(text) + '&type_search=groups&incldead=0&sorting=0&type_sort=desc',
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 1, 0, 0, 0]
    }
}();torrent_lib.bestrepack = function () {
    var name = 'BestRepack';
    var filename = 'bestrepack';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAAAAABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAD6DZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAQEBAQEBAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAEBAQEBAQEBAQAAAAABAAABAAAAAAEAAAEAAAEBAQEBAQEBAQABAAABAAABAAEAAAEAAAEAAQAAAQAAAQABAAABAAABAAEAAAEAAAEAAQEBAQEBAQEBAAABAAABAAAAAAEAAAEAAAAAAQAAAQAAAAABAAABAAAAAAEAAAEAAAAAAQEBAQEBAQEBAAABAAAAAAAAAAEAAAAAAAAAAQEBAQEBAQEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//AADgDwAA7+8AAO/vAADsAQAA7e0AAIAtAACtrQAAra0AAKANAAC9vQAAvb0AALwBAAC/vwAAgD8AAP//AAA%3D';
    var url = 'http://bestrepack.net/forum/tracker.php';
    var root_url = 'http://bestrepack.net/forum/';
    var about = 'bestrepack.net';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[],
                /* Музыка */[138, 145, 144, 174],
                /* Игры */[122, 133, 128, 127, 130, 129, 132, 131, 126, 125, 25, 5, 6, 7, 53, 54, 61, 63, 8, 41, 51, 36, 50, 37, 52, 9, 56, 55, 10, 76, 39, 78, 81, 24, 48, 11, 12, 13, 57, 58, 62, 64, 15, 60, 59, 16, 171, 94, 14, 34, 42, 49, 35, 40, 79, 80, 167, 118, 83, 169, 99, 98, 95, 110, 115, 114, 113, 112, 111, 22, 18, 19, 20, 21, 23, 74, 155, 156, 159, 157, 158, 160],
                /* Фильмы */[],
                /* Мультфтльмы */[],
                /* Книги */[141]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('#main_content').find('#tor-tbl').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(5).children('a').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(2).children('a').text(),
                        url: root_url + td.eq(2).children('a').attr('href'),
                        id: calculateCategory(td.eq(2).children('a').attr('href').replace(/.*f=([0-9]*).*$/i, "$1"))
                    },
                    title: td.eq(3).children('a').text(),
                    url: root_url + td.eq(3).children('a').attr('href'),
                    size: td.eq(5).children('u').text(),
                    dl: root_url + td.eq(5).children('a').attr('href'),
                    seeds: td.eq(6).text(),
                    leechs: td.eq(7).text(),
                    time: td.eq(9).children('u').text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                url: url,
                cache: false,
                data: {
                    max: 1,
                    to: 1,
                    nm: text
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.kickass = function () {
    var name = 'KickAss';
    var filename = 'kickass';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHUFLcyFLV74bO0UuAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeQEthLmNy+DVzhf81c4X/NXOF/ydUYdscPEUdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkTFeuN3WG/zh2iP84doj/OHaI/zh2iP84doj/M2t7/B9BS1IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlS1ecPHmM/zx5jP88eYz/WIyc/3OfrP9BfI//PHmM/zx5jP83b4D9IEFLPgAAAAAAAAAAAAAAAAAAAAAiQ0wzPXiJ/kB9j/9AfY//XZGg//b5+v//////4uvu/2iZp/9AfY//QH2P/zNkcu4AAAAAAAAAAAAAAAAAAAAAMl1q2UWBlP9FgZT/RYGU/73T2f///////f7+//L29//p8PL/RYGU/0WBlP9FgZT/KUxXgAAAAAAAAAAAJ0ZPHUeBk/9Khpj/SoaY/0qGmP/b5+r//////7vR2P9Khpj/bp6t/0qGmP9Khpj/SoaY/zlndOcAAAAAAAAAAC9SXIBPi53/T4ud/0+Lnf9Pi53/0eHm///////F2d//T4ud/0+Lnf9Pi53/T4ud/0+Lnf9Mhpf/KEZPEgAAAAA4YGu+VJCh/1SQof9UkKH/VJCh/8HX3f//////6/L0/1SQof9UkKH/VJCh/1SQof9UkKH/VJCh/y9QWVwAAAAAQGp31lmUpv9ZlKb/aZ6u/5u/yv/W5en////////////C2N//3urt/3Smtf9ZlKb/WZSm/1mUpv81WWOIAAAAAENseNRemar/Xpmq/3Wntv////////////////////////////////+VvMf/Xpmq/16Zqv9emar/OFtlhAAAAABCaHS+Y52v/2Odr/9nn7H/iLTC/4Kxv//0+Pn//////6zL1f9jna//Y52v/2Odr/9jna//Y52v/zdXYVwAAAAAPF5od2ehsv9nobL/Z6Gy/2ehsv9nobL/xtzi///////f6+//Z6Gy/2ehsv9nobL/Z6Gy/2Wdrv80UVoSAAAAADZTXBJkmqr+a6W2/2ultv9rpbb/a6W2/2ultv9rpbb/a6W2/2ultv9rpbb/a6W2/2ultv9SfovlAAAAAAAAAAAAAAAAS3J9xG+ouf9vqLn/XIuZ9GGTovpvqLn/b6i5/2+ouf9gkqD5Zpqp/W+ouf9vqLn/QWJsdwAAAAAAAAAAAAAAADtZYhdbipfxQWJrbgAAAAAAAAAAR2t2p2CRn/dBYmtuAAAAAAAAAABGanSgVH6L3wAAAAAAAAAA/j8AAPgPAADwBwAA4AMAAMADAADAAQAAgAEAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIABAADAAQAAxjMAAA%3D%3D';
    var url = 'http://kat.ph/search/';
    var blank_url = 'http://kat.ph/new/';
    var root_url = 'http://kat.ph';
    var about = 'Search and download new TV shows, TV series, movies, mp3, music and PC/PS2/PSP/Wii/Xbox games absolutely for free.';
    var flags = {
        a: 0,
        l: 0,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[],
                /* Музыка */['music'],
                /* Игры */[],
                /* Фильмы */['movies', 'tv'],
                /* Мультфтльмы */[],
                /* Книги */['books'],
                /* ПО */['applications'],
                /* Анимэ */['anime'],
                /* Док. и юмор */[],
                /* Спорт */[],
                /* Порно */['xxx']
            ];
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var calcTime = function (t) {
            t = t.replace(/([0-9]*)\s([A-Za-z]*)/, '$1|$2').split('|');
            var type_time = t[1];
            var val = parseInt(t[0]);
            var nowTS = Math.round((new Date()).getTime() / 1000);
            if ((/sec/).test(type_time)) {
                nowTS -= val;
            } else if ((/min/).test(type_time)) {
                nowTS -= val * 60;
            } else if ((/hour/).test(type_time)) {
                nowTS -= val * (60 ^ 2);
            } else if ((/day/).test(type_time)) {
                nowTS -= val * (60 ^ 2) * 24;
            } else if ((/week/).test(type_time)) {
                nowTS -= val * (60 ^ 2) * 24 * 7;
            } else if ((/month/).test(type_time)) {
                nowTS -= val * (60 ^ 2) * 24 * 30;
            } else if ((/year/).test(type_time)) {
                nowTS -= val * (60 ^ 2) * 24 * 365;
            } else
                return 0;
            return nowTS;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('table.data').children('tbody').children('tr');
            var l = t.length;
            var arr = new Array(l);
            for (var i = 1; i < l; i++) {
                var td = t.eq(i).children('td');
                var span_l = td.eq(0).children('div').eq(1).children('span').find('span').length - 1;
                var category = td.eq(0).children('div.torrentname').children('div').children('span').children('span');
                var cat_href = category.find('a').eq(0).attr('href');
                var link = td.eq(0).children('div.torrentname').children('div').children('a');
                if (cat_href !== undefined) {
                    cat_href = calculateCategory(cat_href.replace(/\/(.*)\/$/, "$1"));
                }
                arr[i - 1] = {
                    category: {
                        title: category.text(),
                        url: root_url + cat_href,
                        id: cat_href
                    },
                    title: link.text(),
                    url: root_url + link.attr('href'),
                    size: ex_kit.format_size(td.eq(1).text()),
                    dl: td.eq(0).children('div').eq(0).children('a.imagnet').attr('href'),
                    seeds: td.eq(4).text(),
                    leechs: td.eq(5).text(),
                    time: calcTime(td.eq(3).text())
                }
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                url: (text.length === 0) ? blank_url : url + text + '/',
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.rutor = function () {
    var name = 'Рутор';
    var filename = 'rutor';
    var icon = 'data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABB9JREFUeNpi/P33J8P/z6snMTw+V1D1+xbPfwAAAAD//2L8/v07A+N/BgaW+5w8/z8LMjIAAAAA//8AIgDd/wD8/v8AuiwC/8wVBP/qrAD/Agda1gDxBwcA7PD+AOv4LwAAAAD//wBEALv/APb2+QD5+fA5/f3/AMrPyAACBv9XxOhOGcbmrSX/AffjQgC0AgT/zAAF/+g9Cv/2tw7/APHnFOLKAAj/qwAG/9JABSMAAAD//wCEAHv/APv9+QD29vwA+ve+admLDf+kFAL/++Iu3ff5/wHKz8gAAP38HdakBgL/42wL//3yBP/uAAH/00MG/8QHBP/HewL/AnmRlCoybgUAAxYEAPv2BwDwWAAALLz/APT5AAADUTOpAXYhRQBIZt884ZPnwx0EBAADAwYA9gUGAByADQDzc9kBBMHPK4NxHMDx9/P1PM9+oMwytZDVDjsQOZDMzZmkHBz5G9wcHJyWXEU4GZOz8qNwWaNWVi5C2EGeTFk2z7M92+Pj9aJW/8GxHbymYJf2jmr1737XcalWfrnNZVEAaH7lfYy/Z+JL88+p6CtyvojyAaA0cQecvOZd9hai01M6zWIXV8nZXb6G7iEEhU3kGiXSMMXaCEoZJfZNu+yjiTiRJz3iMzA1j6yh4Z9skpgzwP2j29RJbSfWlTU4sVIUxZhrMLwA3loLL8cQnhEO7ka3GFnOdLydtsoFupyhywmG5FZj8pkPVx8xUMn0TjkY0qn0BDD72gjEO3nINAhYwcNSrME/QXAT0mQYwAH8/zx73ud1bk2mVOohXCqKpzASIetk5UWiDkGH6MubIblbBmEfCCXdCoIIhC4tqoMejEKLQJG0NfMDRa3WUlsIjfkxt/d93n+/n3BMHsbNwzM2BAj6bFjiV5vI3H2c/DR9UGmJ8uZDY6rs1nXXrZyiycM1BvPLM+CugQIAARvS8qp8O/09ufn7V6b7tn0bbxSCIMLH92CrZfto5mfVZP1F6YSaOl5sFrofGKNnJXKAcWZO0Tn29UcMHIxofoTF1a5iMq2ZHbaZ3GtxHOBarITJe0G+tDXn7kg6q+V/lr71XcPOeuN4olczBs24sDnZ6OfKQClH2jV3lwLMX7KZh2Sq3mJ2uoRfKmy+gmKiN8DUcsNbuZ6+eb6uNfy7LOLCIVG5ZrB/cAvN/xRStXksbArkRgMofaqQm3KRTRP7agVq2v1/rz5quyyroyrZHT975vCTIrqnJYqHQviQFvgsDOxhiep+D2srBSxOCIRbgyhEFA5Eg1h4L6Mnnw2sC1/HdyjmMHKj86F5PhZdvO2hDhJBEBZcuAAIIAuFBDyUXqjAuZ5CfPbERpM/YxkRF4BHIHDE9te89g85jmmga3lQmh40tbLgQZBUnrRAXeTmJt61dM2NhkaU9vB/AKwQ3houWBsHAAAAAElFTkSuQmCC';
    var url = 'http://rutor.org/search/0/0/100/0/';
    var root_url = 'http://rutor.org';
    var about = 'Открытый торрент трекер';
    var flags = {
        a: 0,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('#index').children('table').children('tbody').children('tr');
            var l = t.length;
            var arr = new Array(l);
            for (var i = 1; i < l; i++) {
                var td = t.eq(i).children('td');
                arr[i - 1] = {
                    category: {
                        id: -1
                    },
                    title: td.eq(1).children('a').eq(2).text(),
                    url: root_url + td.eq(1).children('a').eq(2).attr('href'),
                    size: ex_kit.format_size(td.eq(-2).text()),
                    dl: td.eq(1).children('a').eq(-2).attr('href'),
                    seeds: td.eq(-1).children('span.green').text(),
                    leechs: td.eq(-1).children('span.red').text(),
                    time: ex_kit.format_date(1, ex_kit.month_replace(td.eq(0).text()))
                };
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url + text,
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        };
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 1, 1, 0, 0, 0, 0, 0, 0]
    };
}();torrent_lib.bigfangroup = function () {
    var name = 'BigFanGroup';
    var filename = 'bigfangroup';
    var icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEKGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS4xLjIiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxMy0wNC0wNFQxNDowNDo5MDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+UGl4ZWxtYXRvciAyLjEuMTwveG1wOkNyZWF0b3JUb29sPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+NTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MTwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4xNjwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+NjU1MzU8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjE2PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CvJlu/AAAANqSURBVDgRbZNtbFNlFMf/97Z3652jtWvHHSvtWLd1L0HDmARCN2FApeBswI1MJZAsRo3Eb2qmfBnGTybGRT9IDAYNBgSyZBKYZJZlwRlQM7Tb6kLJXnR920u79eXe3d3b2/vYSpagcj6cc/L8n995zvPkPBQhBI+1SXeJpMVpjYYRtQn2YzRdTT5uH/XvApQG8c7tINmO0LzUPjCkVjEMhbZWKrCxBH0QNX2o/G4Mj0AUWTpTDna2HpTiXExsco1PrDxzfVDWXR1UMC/lumMycGwk8OxmsKdJK+xoLBzlDOEhKPKPQqzqPkWUCzHvUMDk9QYwGRAwMFyM1uZZOJ0J9HltuC9wgCBjW8kCXM4lzAU3gzObcexoAWluMARApLPk5a63yXbn0+RafzG59G0ZicUY4vu9iEw90JHy2udJ9/u1JJXUkOBcAVmcB9mzr5Gceus4IdFXEzTS/j+tFhH+qA3nL9fBtX8ZFy5WYNvOI9AVqXjjlSlIYgHu/aZH3W4Puj98CpNRDhaLAiiijxYTwZ+tpSnILINrd2sxPl4MU8ka2l+cAlEJrg9ZoWoo8GkaQpbBV8P1WFI2oIKTASLfoVUpNeDYnAClasAUCzAasnA/F0fvRz4srxRibNwER00KzS08fu3vh6dxOneyBpXcGrKiNEILCfZujW1NKDcQZEQWaYHCje/NaHr2IMwmGZ2eaYTnWMzMFOLTz+sxE9HDXqbCxinLkb/Wxuiz3p2znBE/Hd1FUKOPIZnM4kq/FUsrRsRjDJy74uB5CqFQAS7e3gp/yISTbhWcifJaXT9EtD09PWp0ZGvviYO0q6w0SO9tTSMcDcO9LwJH7SqOv1YNz+Eg9PoMoJVgyV2xq10nYzXem59MOu82tfgH7aWL56vLq3Hi5A5U2VM40jaP02ccmFgwYyGuxfBtI4p4Huc+sMBWpn7BNIz+kme1eZc33y3fO+4X2C2x5YoDh1+yQzHkXnkDA2aLjC8Ha8AkFVz6zI5DLfxNPJh6D6aH3D8d5NMD3SQZ/gOdrx9LXLn1TQrOhpwkqshEstjfwOLOjTZ0dFRchkQ60TS6+hAH/vOZcgsUKHna1ZXOUO/eHGHqtLkZaDtUOfHEk/WfQHfq63VwPf6vwLqwcs9lYI14k6hZiQ/5z5XuXeTXtUfj35VGeoV6xszZAAAAAElFTkSuQmCC';
    var url = 'http://www.bigfangroup.org/browse.php';
    var root_url = 'http://www.bigfangroup.org/';
    var about = 'Bigfangroup.org - только у нас можно скачать самые новые серии Интернов, новые выпуски Comedy Club. Новые серии сериала Деффчёнки, новые фильмы, сериалы, музыку и игры для компьютера бесплатно, без смс, на большой скорости.';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[11],
                /* Музыка */[44, 46, 43],
                /* Игры */[5],
                /* Фильмы */[13, 48, 45, 33, 39, 15, 21, 28, 18, 24, 36, 19, 31, 12, 29, 27, 47, 22],
                /* Мультфтльмы */[],
                /* Книги */[35, 38],
                /* ПО */[1],
                /* Анимэ */[],
                /* Док. и юмор */[32, 49, 25, 26, 23, 30, 14],
                /* Спорт */[37],
                /* xxx */[42]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('#releases-table').children('table.embedded').children('tbody#highlighted').children('tr');
            var l = t.length;
            var arr = new Array(l);
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                arr[i] = {
                    category: {
                        title: td.eq(0).find('img').attr('alt'),
                        url: root_url + td.eq(0).children('a').attr('href'),
                        id: calculateCategory(td.eq(0).children('a').attr('href').replace(/.*cat=([0-9]*).*$/i, "$1"))
                    },
                    title: td.eq(1).children('a').text(),
                    url: root_url + td.eq(1).children('a').attr('href'),
                    size: ex_kit.format_size(td.eq(5).text()),
                    seeds: td.eq(6).text(),
                    leechs: td.eq(7).text(),
                    time: 0
                }
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url + '?search=' + ex_kit.in_cp1251(text),
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 1, 0, 0, 0]
    }
}();torrent_lib.kinozal = function () {
    var name = 'Кинозал';
    var filename = 'kinozal';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAQAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgEc7/4BHO/8AAAAAAAAAAAAAAACARzv/gEc7/4BHO/8AAAAAAAAAAAAAAACARzv/gEc7/wAAAAAAAAAAgEc7/4BHO//8+/n/gEc7/4BHO/+ARzv/9/Tt//Xy6v/08Ob/gEc7/4BHO/+ARzv/7efX/4BHO/+ARzv/AAAAAIBHO//8+/n/+/r3//r49P/59vH/9/Tu//by6v/08Of/8u7j//Hs3//v6dv/7efY/+vk1P/q4tD/gEc7/wAAAAAAAAAAgEc7//r49P/O7/3/zu/9/87v/f/O7/3/zu/9/87v/f/O7/3/zu/9/87v/f/q4tD/gEc7/wAAAAAAAAAAAAAAAIBHO//59/H/AACA/wAAgP8AAID/AACA/87v/f8AAID/AACA/wAAgP8AAID/6ODM/4BHO/8AAAAAAAAAAAAAAACARzv/9/Xu/87v/f8AAID/AACA/87v/f/O7/3/zu/9/wAAgP8AAID/zu/9/+beyf+ARzv/AAAAAAAAAACARzv/+PXv//bz6//O7/3/AACA/wAAgP/O7/3/zu/9/wAAgP8AAID/zu/9/87v/f/l3MX/49nB/4BHO/8AAAAAgEc7//bz6//18ej/zu/9/wAAgP8AAID/AACA/wAAgP/O7/3/zu/9/87v/f/O7/3/49nC/+HXvv+ARzv/AAAAAIBHO//18ej/8+/l/87v/f8AAID/AACA/wAAgP8AAID/zu/9/87v/f/O7/3/zu/9/+LXvv/g1bv/gEc7/wAAAACARzv/gEc7//Ht4f/O7/3/AACA/wAAgP/O7/3/zu/9/wAAgP/O7/3/zu/9/87v/f/g1bv/gEc7/4BHO/8AAAAAAAAAAIBHO//w6t7/zu/9/wAAgP8AAID/zu/9/87v/f/O7/3/AACA/87v/f/O7/3/39O4/4BHO/8AAAAAAAAAAAAAAACARzv/7uja/wAAgP8AAID/AACA/wAAgP/O7/3/zu/9/wAAgP8AAID/AACA/93Stf+ARzv/AAAAAAAAAAAAAAAAgEc7//r49P/O7/3/zu/9/87v/f/O7/3/zu/9/87v/f/O7/3/zu/9/87v/f/q4tD/gEc7/wAAAAAAAAAAgEc7//z7+f/7+vf/+vj0//n28f/39O7/9vLq//Tw5//y7uP/8ezf/+/p2//t59j/6+TU/+ri0P+ARzv/AAAAAIBHO/+ARzv//Pv5/4BHO/+ARzv/gEc7//f07f/18ur/9PDm/4BHO/+ARzv/gEc7/+3n1/+ARzv/gEc7/wAAAAAAAAAAgEc7/4BHO/8AAAAAAAAAAAAAAACARzv/gEc7/4BHO/8AAAAAAAAAAAAAAACARzv/gEc7/wAAAAAAAAAAnHMAAAABAAAAAQAAgAMAAIADAACAAwAAAAEAAAABAAAAAQAAAAEAAIADAACAAwAAgAMAAAABAAAAAQAAnHMAAA%3D%3D';
    var url = 'http://kinozal.tv/browse.php';
    var root_url = 'http://kinozal.tv';
    var about = 'Торрент трекер Кинозал.ТВ - фильмы, новинки кино, скачать фильмы, афиша кино';
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateSize = function (s) {
            var size = s.replace(' ', '');
            var t = size.replace('КБ', '');
            if (t.length !== size.length) {
                t = parseFloat(t);
                return Math.round(t * 1024);
            }
            var t = size.replace('МБ', '');
            if (t.length !== size.length) {
                t = parseFloat(t);
                return Math.round(t * 1024 * 1024);
            }
            var t = size.replace('ГБ', '');
            if (t.length !== size.length) {
                t = parseFloat(t);
                return Math.round(t * 1024 * 1024 * 1024);
            }
            var t = size.replace('ТБ', '');
            if (t.length !== size.length) {
                t = parseFloat(t);
                return Math.round(t * 1024 * 1024 * 1024 * 1024);
            }
            return 0;
        };
        var calculateCategory = function (f) {
            f = f.replace(/.*c=([0-9]*)$/i, "$1");
            var groups_arr = [
                /* Сериалы */[45, 46], //serials
                /* Музыка */[3, 4, 42], //music
                /* Игры */[23], //games
                /* Фильмы */[8, 6, 15, 17, 35, 39, 13, 14, 24, 11, 10, 9, 47, 12, 7, 48, 49, 50, 38, 16], //films
                /* Мультфтльмы */[21, 22], //cartoon
                /* Книги */[2, 41], //books
                /* ПО */[32, 40], //prog
                /* Анимэ */[20], //anime
                /* Док. и юмор */[18],
                /* Спорт */[37]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var calculateCategoryName = function (n) {
            var n = parseFloat(n);
            if (n === 45)
                return 'Сериал - Русский';
            else if (n === 46)
                return 'Сериал - Буржуйский';
            else if (n === 8)
                return 'Кино - Комедия';
            else if (n === 6)
                return 'Кино - Боевик / Военный';
            else if (n === 15)
                return 'Кино - Триллер / Детектив';
            else if (n === 17)
                return 'Кино - Драма';
            else if (n === 35)
                return 'Кино - Мелодрама';
            else if (n === 39)
                return 'Кино - Индийское';
            else if (n === 13)
                return 'Кино - Фантастика';
            else if (n === 14)
                return 'Кино - Фэнтези';
            else if (n === 24)
                return 'Кино - Ужас / Мистика';
            else if (n === 11)
                return 'Кино - Приключения';
            else if (n === 10)
                return 'Кино - Наше Кино';
            else if (n === 9)
                return 'Кино - Исторический';
            else if (n === 47)
                return 'Кино - Азиатский';
            else if (n === 18)
                return 'Кино - Документальный';
            else if (n === 37)
                return 'Кино - Спорт';
            else if (n === 12)
                return 'Кино - Детский / Семейный';
            else if (n === 7)
                return 'Кино - Классика';
            else if (n === 48)
                return 'Кино - Концерт';
            else if (n === 49)
                return 'Кино - Передачи / ТВ-шоу';
            else if (n === 50)
                return 'Кино - ТВ-шоу Мир';
            else if (n === 38)
                return 'Кино - Театр, Опера, Балет';
            else if (n === 16)
                return 'Кино - Эротика';
            else if (n === 21)
                return 'Мульт - Буржуйский';
            else if (n === 22)
                return 'Мульт - Русский';
            else if (n === 20)
                return 'Мульт - Аниме';
            else if (n === 3)
                return 'Музыка - Буржуйская';
            else if (n === 4)
                return 'Музыка - Русская';
            else if (n === 5)
                return 'Музыка - Сборники';
            else if (n === 42)
                return 'Музыка - Классическая';
            else if (n === 2)
                return 'Другое - АудиоКниги';
            else if (n === 1)
                return 'Другое - Видеоклипы';
            else if (n === 23)
                return 'Другое - Игры';
            else if (n === 32)
                return 'Другое - Программы';
            else if (n === 40)
                return 'Другое - Дизайн / Графика';
            else if (n === 41)
                return 'Другое - Библиотека';
            return null;
        };
        var calculateTime = function (t) {
            if ((/сейчас/).test(t)) {
                return Math.round((new Date()).getTime() / 1000);
            }
            var tt = new Date();
            var today = tt.getDate() + ' ' + (tt.getMonth() + 1) + ' ' + tt.getFullYear() + ' ';
            tt = new Date((Math.round(tt.getTime() / 1000) - 24 * 60 * 60) * 1000);
            var yesterday = tt.getDate() + ' ' + (tt.getMonth() + 1) + ' ' + tt.getFullYear() + ' ';
            t = t.replace('сегодня ', today).replace('вчера ', yesterday);
            t = ex_kit.month_replace(t);
            return ex_kit.format_date(1, t);
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var ver = 1;
            var t = engine.load_in_sandbox(c);
            t = $(c).find('table.t_peer.w100p').children('tbody').children('tr');
            var l = t.length;
            var arr = new Array(l);
            var i, td;
            for (i = 1; i < l; i++) {
                td = t.eq(i).children('td');
                var category_id = td.eq(0).children('img').attr('src').replace(/.*\/([0-9]*)\.gif$/, '$1');
                arr[i - 1] = {
                    category: {
                        title: calculateCategoryName(category_id),
                        url: url + '?c=' + category_id,
                        id: calculateCategory(category_id)
                    },
                    title: td.eq(1).children('a').text(),
                    url: root_url + td.eq(1).children('a').attr('href'),
                    size: ex_kit.format_size(td.eq(3).text()),
                    seeds: td.eq(4).text(),
                    leechs: td.eq(5).text(),
                    time: calculateTime(td.eq(6).text())
                };
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url + '?s=' + ex_kit.in_cp1251(text),
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        };
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 1, 0, 0, 0]
    };
}();torrent_lib.rutracker = function () {
    var name = 'Рутрекер';
    var filename = 'rutracker';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAGABoAwAAFgAAACgAAAAQAAAAIAAAAAEAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADg4ODLy8vd3d0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADPz8+KioqgoKDb29vj4+Pf39/q6uoAAAAAAAAAAAAAAAAAAAAAAAAAAADe3t7b29vS0tL29vZOTk5paWlycnJ8fHy8vLwAAAAAAADt7e3c3Nzg4ODc3NympqbDw8OIiIjj4+PtTUD8393///////////+8vLwAAAAAAADU1NSgoKCampqUlJSCgoLz8/NKSUni4uLpJxnqOCrwZ1z2oZvj4+PPz88AAAAAAADr6+vx8fGmpqaurq7P9dn///9paWm9WlPhIBLpIRLpIRL///9XV1fOzMwAAAAAAADg4OD///9D1miK5qEQyz////8+PT1GLCuTFQvNHhHhIBLrtrPPz8+kpKQAAAAAAADh4eH8/PwTzEEQyz8Qyz+M5qL///9sbGxWEQyZJBy9WlO7cmzU1NSioqIAAAAAAADDw8P///8Qyz8Qyz8Qyz8Qyz9r34j///+emZk+PT1lZWTS0tKmpqbg4OAAAAAAAADY2NiP56V74pVh3YAQyz////+mpqZYN9DDtfT///+zoPbf39+xsbEAAAAAAAAAAAAAAAAAAAAAAAAAAAA31F/t7e2YmJhMIedAEulRJ+uhivSYmJi8vLwAAAAAAAAAAAAAAAAAAAAAAADj4+P+/v7IyMh2XdBAEulAEulAEunHuflKSUmYmJgAAAAAAAAAAAAAAAAAAAAAAAAAAADg4ODt7e329vZaM+tAEulAEulRJ+v///9+fn7d3d0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADd3d2plPV4WO/////////////e3t7j4+MAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADr6+v///////+/v7/i4uLu7u4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADV1dXp6ekAAAAAAAAAAAAAAAAAAAAAAAD+PwAA/gMAAPgDAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAABwAA8AcAAOAHAADwAwAA/AMAAPwPAAD/PwAA';
    var login_url = 'http://login.rutracker.org/forum/login.php';
    var url = 'http://rutracker.org/forum/tracker.php';
    var root_url = 'http://rutracker.org/forum/';
    var about = 'Крупнейший русскоязычный битторрент трекер. Скачать бесплатно фильмы, музыку, книги, программы..';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[864, 315, 9, 104, 1535, 91, 1356, 856, 188, 1408, 310, 202, 935, 990, 80, 119, 1530, 175, 79, 172, 812, 207, 805, 123, 189, 271, 273, 743, 184, 842, 194, 1605, 85, 1144, 595, 1288, 1171, 1694, 1690, 820, 819, 625, 84, 242, 623, 1417, 1798, 106, 166, 236, 507, 504, 536, 173, 918, 920, 203, 1243, 1120, 140, 636, 606, 776, 235, 1499, 81, 266, 252, 1102, 1449, 196, 372, 110, 193, 1531, 237, 265, 181, 1214, 497, 121, 721, 1117, 1359, 387, 134, 195, 2366, 2390, 2391, 2392, 2407, 2393, 2370, 2394, 2408, 2395, 2396, 2397, 2398, 2399, 2400, 2401, 2402, 2403, 2404, 2405, 2406, 911, 1691, 704, 1493, 1500, 1574, 1940, 1539, 1939, 823, 1006, 972, 1299, 781, 717, 1300, 1803, 1298, 825, 1606, 1458, 1463, 1459, 1938, 1461, 718, 1498, 907, 877, 992, 607, 594, 775, 534, 1462, 904, 1460, 816, 815, 325, 1457, 1301, 1692, 1540, 694, 1949, 1678, 1541, 860, 1941, 1537, 2100, 2102, 2103, 1242, 2104],
                /* Музыка */[2534, 2236, 1909, 1927, 2240, 2241, 409, 1660, 1164, 1884, 445, 984, 702, 983, 1990, 560, 794, 556, 2307, 557, 2308, 558, 793, 436, 2309, 2310, 2311, 969, 405, 863, 1363, 1125, 1130, 1131, 1132, 1133, 2084, 1128, 1129, 1856, 2430, 1283, 2085, 1282, 1284, 1285, 1138, 1136, 1137, 1141, 1142, 2530, 1849, 1126, 1127, 1134, 1135, 2352, 2351, 2426, 855, 865, 408, 1397, 441, 1173, 1486, 1189, 1455, 446, 1172, 909, 1665, 442, 1174, 1107, 2529, 1760, 1764, 1766, 1767, 1769, 1765, 1771, 1770, 1768, 1774, 1772, 1773, 2232, 2233, 1775, 1777, 416, 782, 2377, 468, 1625, 691, 469, 786, 785, 796, 784, 783, 2331, 2431, 1215, 1220, 1221, 1334, 1216, 1223, 1224, 1225, 1226, 1217, 1227, 1228, 413, 974, 463, 464, 466, 465, 2018, 1396, 1395, 1351, 475, 988, 880, 655, 965, 919, 944, 980, 946, 977, 2074, 2349, 10, 2495, 424, 425, 1361, 1635, 1634, 2497, 428, 1362, 429, 1219, 1452, 1331, 1330, 2499, 2503, 2504, 2502, 2501, 2505, 2500, 2507, 1121, 1122, 2510, 2509, 431, 986, 2532, 2531, 2378, 2379, 2383, 2384, 2088, 2089, 2508, 2512, 1444, 239, 1163, 1885, 11, 2267, 2277, 2278, 2279, 2280, 2281, 2282, 2283, 2284, 2285, 2286, 2287, 2268, 2293, 2292, 2290, 2289, 2288, 1491, 2269, 2297, 2295, 2296, 2298, 2270, 2303, 2302, 2301, 2271, 2305, 2304, 2306, 12, 1698, 1702, 1703, 1704, 1705, 1706, 1707, 2329, 2330, 1708, 1709, 1710, 1711, 1712, 1713, 1714, 1715, 1716, 1796, 1797, 1719, 1778, 1779, 1780, 1720, 798, 1724, 1725, 1730, 1731, 1726, 1727, 1815, 1816, 1728, 1729, 2230, 2231, 1732, 1736, 1737, 1738, 1739, 1740, 1741, 1742, 1743, 1744, 1745, 1746, 1747, 1748, 1749, 722, 737, 738, 739, 740, 951, 952, 1752, 1756, 1758, 1757, 1755, 453, 1170, 1759, 1852, 1781, 1782, 1783, 2261, 1787, 1788, 2262, 1789, 1790, 2263, 1791, 1792, 1793, 1794, 2264, 1795, 13, 1821, 1844, 1822, 1894, 1895, 460, 1818, 1819, 1847, 1824, 1807, 1829, 1830, 1831, 1857, 1859, 1858, 840, 1860, 1825, 1826, 1827, 1828, 1808, 797, 1805, 1832, 1833, 1834, 1835, 1893, 1836, 1837, 1838, 1839, 1840, 1841, 2229, 1809, 1861, 1862, 1947, 1946, 1945, 1944, 1810, 1869, 1873, 1871, 1867, 1864, 1865, 1866, 1811, 1868, 1875, 1877, 1878, 1880, 1881, 1842, 1648, 1812, 1886, 1887, 1912, 1913, 1890, 1754],
                /* Игры */[537, 1003, 5, 635, 959, 127, 2204, 53, 1008, 51, 961, 962, 2187, 54, 55, 2203, 52, 900, 246, 278, 128, 2385, 637, 642, 643, 644, 2227, 2226, 2225, 645, 646, 647, 649, 650, 1098, 2228, 2115, 2117, 2155, 2118, 2119, 50, 2142, 2143, 2145, 2146, 139, 2478, 2479, 2480, 2481, 2482, 2533, 2483, 2484, 2485, 548, 129, 908, 357, 510, 887, 1116, 973, 773, 774, 968, 546, 700, 1926],
                /* Фильмы */[2235, 2082, 2238, 1936, 7, 187, 2090, 2221, 2091, 2092, 2093, 934, 505, 212, 2459, 1235, 22, 941, 1666, 124, 1543, 376, 709, 1577, 511, 656, 93, 905, 1576, 101, 100, 103, 572, 1670, 2198, 2199, 313, 2201, 312, 2339, 314, 352, 549, 1213, 2109, 514, 1478],
                /* Мультфтльмы */[4, 930, 2365, 1900, 521, 2258, 208, 539, 209, 484, 822, 921, 922, 1247, 923, 924, 1991, 925, 1165, 1245, 928, 926, 1246, 1250, 927, 1248],
                /* Книги */[21, 2157, 765, 2019, 31, 1427, 2195, 2223, 2447, 39, 1101, 745, 1689, 2336, 2337, 1353, 1400, 2046, 1802, 2189, 2190, 2443, 2196, 2191, 2056, 2477, 1680, 1967, 2020, 1801, 1683, 1681, 2319, 2320, 2434, 2444, 2452, 2445, 2435, 2436, 2453, 2427, 2049, 1684, 2446, 1685, 2524, 2525, 995, 2022, 2471, 2375, 764, 1688, 2472, 1687, 2023, 2024, 2026, 2192, 2027, 295, 2028, 2029, 1325, 2386, 2031, 2030, 2526, 2527, 2254, 2376, 2054, 770, 2476, 2494, 1528, 2032, 768, 2099, 2021, 2437, 1447, 2468, 2469, 2470, 1686, 2215, 2216, 2217, 2218, 2252, 767, 2515, 2516, 2517, 2518, 2519, 2520, 1696, 2253, 2033, 1412, 1446, 753, 2037, 2224, 2194, 1410, 2034, 2433, 1961, 2432, 565, 1523, 1575, 2424, 769, 2038, 2041, 2042, 2043, 2044, 2039, 2045, 2080, 2047, 2193, 1418, 1422, 1423, 1424, 1445, 1425, 1426, 1428, 1429, 1430, 1431, 1433, 1432, 2202, 862, 2461, 2462, 2463, 2464, 2473, 2465, 2048, 1238, 2055, 754, 2114, 2438, 2439, 2440, 2441, 2442, 7, 2326, 1036, 400, 574, 2389, 2387, 2388, 2327, 695, 399, 402, 490, 499, 2324, 2325, 2342, 530, 2152, 2328, 403, 1501, 1580, 525, 1279, 716, 2165, 401],
                /* ПО */[1394, 1370, 2237, 1372, 1373, 1375, 1371, 1374, 1935, 1012, 1019, 2153, 1021, 1025, 1376, 1379, 1381, 899, 1473, 1195, 1013, 1028, 1029, 1030, 1031, 1032, 1033, 1034, 1066, 1035, 1038, 1039, 1536, 1051, 1040, 1041, 1636, 1042, 1014, 1060, 1061, 1062, 1067, 1086, 1068, 1063, 1087, 1192, 1088, 1193, 1071, 1073, 1052, 1053, 1054, 1055, 1056, 2077, 1057, 1018, 1058, 1016, 1079, 1080, 1081, 1082, 1083, 1084, 1085, 1089, 1090, 1065, 1064, 1092, 1204, 1027, 1199, 1091, 828, 1357, 890, 830, 1290, 1962, 831, 829, 633, 1009, 1963, 1954, 1010, 1674, 839, 1679, 1011, 835, 1503, 1507, 1526, 1508, 1509, 1510, 1511, 1512, 1513, 1514, 1515, 1516, 1517],
                /* Анимэ */[2535, 33, 281, 1386, 1387, 1388, 282, 599, 1105, 1389, 404, 1390, 1642, 1391, 893],
                /* Док. и юмор */[670, 2107, 294, 1453, 1475, 46, 2178, 671, 2177, 251, 97, 851, 821, 2076, 98, 56, 1469, 2123, 1280, 876, 752, 1114, 2380, 1467, 672, 249, 552, 500, 2112, 1327, 1468, 24, 1959, 115, 939, 1481, 113, 882, 1482, 393, 1569, 373, 1186, 137, 1321, 532, 979, 827, 1484, 1485, 114, 1332, 1495],
                /* Спорт */[2, 255, 256, 1986, 1551, 626, 262, 1326, 978, 1287, 1188, 1667, 1675, 257, 845, 875, 263, 2073, 550, 2124, 1470, 528, 486, 854, 2079, 260, 2111, 1608, 1952, 1613, 1614, 1623, 1615, 1630, 2514, 1616, 2014, 1617, 1987, 2171, 1620, 1621, 1998, 751, 1697, 2004, 2001, 2002, 283, 1997, 2003, 2009, 2010, 2006, 2007, 2005, 259, 2008, 126]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            if (t.find('input[name="login_username"]').length) {
                view.auth(0, filename);
                return [];
            } else
                view.auth(1, filename);
            t = t.find('#search-results').children('#tor-tbl').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(5).children('a').attr('href') === undefined) {
                    continue;
                }
                var obj = {
                    category: {
                        title: td.eq(2).children('div').children('a').text(),
                        url: root_url + td.eq(2).children('div').children('a').attr('href'),
                        id: calculateCategory(td.eq(2).children('div').children('a').attr('href').replace(/.*f=([0-9]*).*$/i, "$1"))
                    },
                    title: td.eq(3).children('div').children('a').text(),
                    url: root_url + td.eq(3).children('div').children('a').attr('href'),
                    size: td.eq(5).children('u').text(),
                    //'dl' : td.eq(5).children('a').attr('href'),
                    seeds: td.eq(6).children('b').text(),
                    leechs: td.eq(7).children('b').text(),
                    time: td.eq(9).children('u').text()
                };
                if (isNaN(parseInt(obj.seeds))) {
                    obj.seeds = 1;
                }
                arr.push(obj);
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                url: url,
                cache: false,
                data: {
                    prev_my: 0,
                    prev_new: 0,
                    prev_oop: 0,
                    'f[]': -1,
                    o: 1,
                    s: 2,
                    nm: text,
                    submit: ''
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        login_url: login_url,
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 1, 0, 0, 0]
    }
}();torrent_lib.bitsnoop = function () {
    var name = 'BitSnoop';
    var filename = 'bitsnoop';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAAAAABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAN5SQADG6tQA0pKAAM6ikADt4dgAuy8UAMrWwADWgmwA8c3EAO3d1ADKvqwAwwLoAM6qlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBgYGBgYGBgYGBgYAAAAGBgYGBgYGBgYGBgYGBgAGBgYGBgYGBgYGBgYGBgYGBgYGBgwBCQkJCQEMBgYGBgYGBgwFCQkJCQkJBQwGBgYGBgYBCQkFDQgKCQkBBgYGBgYGCQkJAwIJCQkJCQYGBgYGBgkJCQcCCQkJCQkGBgYGBgYJCQkHBgIECQkJBgYGBgYGCQkJAwYGAwkJCQYGBgYGBgEJCQULCwUJCQEGBgYGBgYMBQkJCQkJCQUMBgYGBgYGBgwBCQkJCQEMBgYGBgYGBgYGBgYGBgYGBgYGBgYABgYGBgYGBgYGBgYGBgYAAAAGBgYGBgYGBgYGBgYAAMADAACAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAEAAMADAAA%3D';
    var url = 'http://bitsnoop.com/search';
    var root_url = 'http://bitsnoop.com';
    var about = 'The best torrent search in the world. Aggregated torrents from numerous sites and groups, automated verification, super-fast search.';
    var flags = {
        a: 0,
        l: 0,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */['tv'],
                /* Музыка */['audio'],
                /* Игры */['games', 'game_pc', 'xbox'],
                /* Фильмы */['video'],
                /* Мультфтльмы */[],
                /* Книги */['books', 'abooks'],
                /* ПО */['software'],
                /* Анимэ */[],
                /* Док. и юмор */[],
                /* Спорт */[],
                /* XXX */['x3']
            ];
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var calculateTime = function (t) {
            if ($.trim(t.substr(0, 1)).length === 0)
                return 0;
            if ((/today/).test(t)) {
                return Math.round((new Date().getTime() / 1000) / (60 * 60 * 24)) * (60 * 60 * 24);
            } else if ((/yesterday/).test(t)) {
                return (Math.round((new Date().getTime() / 1000) / (60 * 60 * 24)) * (60 * 60 * 24)) - (60 * 60 * 24);
            } else if ((/ old/).test(t)) {
                var time = parseInt(t.replace(/([0-9]*).*/, '$1'));
                var nowTime = Math.round(new Date().getTime() / 1000);
                if ((/second/).test(t)) {
                    return nowTime - time;
                } else if ((/minute/).test(t)) {
                    return nowTime - time * 60;
                } else if ((/hour/).test(t)) {
                    return nowTime - time * 60 * 60;
                } else if ((/day/).test(t)) {
                    return nowTime - time * 60 * 60 * 24;
                } else if ((/week/).test(t)) {
                    return nowTime - time * 60 * 60 * 24 * 7;
                } else if ((/month/).test(t)) {
                    return nowTime - time * 60 * 60 * 24 * 30;
                } else if ((/year/).test(t)) {
                    return nowTime - time * 60 * 60 * 24 * 365;
                }
            }
            return 0;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('#torrents').children('li');
            var l = t.length;
            var arr = new Array(l);
            for (var i = 0; i < l; i++) {
                var li = t.eq(i);
                li.children('div[id="sz"]').find('td').eq(0).children('div.nfiles').remove();
                var ss = li.children('div.torInfo').children('span.seeders').text().replace(',', '');
                var ls = li.children('div.torInfo').children('span.leechers').text().replace(',', '');
                if (ls.length === 0) {
                    ls = 0;
                }
                if (ss.length === 0) {
                    ss = 0;
                }
                arr[i] = {
                    category: {
                        title: li.children('span.icon').attr('title'),
                        id: calculateCategory(li.children('span.icon').attr('class').replace(/icon cat_(.*)/, '$1'))
                    },
                    title: li.children('a').text(),
                    url: root_url + li.children('a').attr('href'),
                    size: ex_kit.format_size(li.children('div[id="sz"]').find('td').eq(0).text()),
                    seeds: ss,
                    leechs: ls,
                    time: calculateTime(li.children('div.torInfo').text().replace(/.*— .* — (.*)/, '$1'))
                }
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url,
                cache: false,
                data: {
                    q: text + ' safe:no',
                    t: 'all'
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 1, 0, 0, 1, 0, 0, 0]
    }
}();torrent_lib.libertorrent = function () {
    var name = 'Книжный трекер';
    var filename = 'libertorrent';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAGABoAwAAFgAAACgAAAAQAAAAIAAAAAEAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAT/BAXmlZD///HDEg//BwP/AgnyBQj/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX3BwL2CQ3+8fPv+/2mTkfzAAD/Agj5BAj/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/AgKSEgf9///++v/43dPrBAD7BAbwBgj/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAXyAAH7lo7/7+v/2Nf//vHBKiP/BQLtCAT/BAX/BAX/BAX/BAX7BQX/BAX/BQb8BgbBFAz//+f038nvuqX/8Ob//+vJBwD9AAD/BAX/BAX/BAX/BAX/BAX/BAX4BwbyCgilYFbCNjWzCQfzBwf0DAj6BAT7AAD/AQT/BAX/BAX/BAX/BAX7BQX/BAT6AgLRFxHq//PBAgn//fHj+e28gIaSCA/QEBD9AAD/BAX/BAX/BAX/BAXyBwT7BgTJISDQj4f/8ur/5ej/5OLVAAmqBgCWIR7/v8Xp9/P5BQX9BQX/BAX/BAX/BAT/BAXmr6jx8/SlIyTc8eL/9PLx//7u9v//+fHSXUjfFAf0Cwn6Bgb/BAX/BAX5BwH/BAWtY1/z+Pfy9ur+pJm7CwqfMyjp2dLy/v75/v/0//XQKR73DAn/BQLtCAT/BQT/BQL6AAbRloP5/P//9//1+vn///G6XU7/CQ+/CwzRyL7l6M//Aw7/BAX7BgT/BAXyBwX9AgH/BwfWBgDjzcH/+Pvn////9P/y/v7/fYL/AAr/tKT6AAT/BAT0BwT/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/REL0++zu9PnBh4H/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX9Dgv/Bxfu8u3Stqv/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BAX/BATyBwTskYjyAQr/BAX/BAX/BAX/BAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';
    var login_url = 'http://booktracker.org/login.php';
    var url = 'http://booktracker.org/tracker.php';
    var root_url = 'http://booktracker.org/';
    var about = 'Книжный трекер (booktracker.org), рукописи не горят';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            if (t.find('input[name="login_username"]').length) {
                view.auth(0, filename);
                return [];
            } else
                view.auth(1, filename);
            t = t.find('#main_content_wrap').children('table.forumline.tablesorter').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(5).children('a').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(2).children('a').text(),
                        url: root_url + td.eq(2).children('a').attr('href'),
                        id: 5
                    },
                    title: td.eq(3).children('a').text(),
                    url: root_url + td.eq(3).children('a').attr('href'),
                    size: td.eq(5).children('u').text(),
                    dl: root_url + td.eq(5).children('a').attr('href'),
                    seeds: td.eq(6).text(),
                    leechs: td.eq(7).text(),
                    time: td.eq(9).children('u').text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                url: url,
                cache: false,
                data: {
                    max: 1,
                    to: 1,
                    nm: text
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        login_url: login_url,
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.tapochek = function () {
    var name = 'Tapochek';
    var filename = 'tapochek';
    var icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEKGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS4xLjIiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxMy0wNC0wNVQxMTowNDo5MDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+UGl4ZWxtYXRvciAyLjEuMTwveG1wOkNyZWF0b3JUb29sPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+NTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MTwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4xNjwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+NjU1MzU8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjE2PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CnayM0MAAALXSURBVDgRhVNNSFRRGD3vvfvezCijTjVOGZow5A9YUWpRCAX9gVa4C8GFLqQg2ugqKBBaZauiaJMtwloVEVRiJVK50wFJy0KyUsufSB3NmWbm/XTuHWvbhXffnfu+73znO98ZDUWdm86e23mrtCh0AtBc/Hd5uut5ydj4966HV5u7RHtHdc/p+trjsQ/z0HUNmkYYuXF5njxnEXlUF47rIZhj+et2Ry+nk7enRFU0crg/9hXdT8aQGzChM0NTQBos04BMsB0S45uV4fKdsR3cbD8qIuGCU4LhaRYRBUEfAn5LlWMMDIJcOVOHkYkf6O59h0DAUIx0ePidcgjsEtDRhMwwDB2GEDCFgbaGKqylMkimbNSWR7B1Yy7mlxKoqYhg+OM8XsamIMhMMYXmKQCdAILJuq4jlOdHU22ZYiK3kkgQnS371O/RyZ8sZpCd908nAnhKPEEQh9RnF9dU8MJyEg/eTKIw34+T+0vV3exiQrXGtpW4cmRCqcsLKosLTdXYsz2sgnv6J9AXmyE4EA7l4OCOLbjUXIO+4Wnc6X1PAH7gUrvBKNnGatJG2s5aIcdvwrIEAj4TPvYs1xp1SaQd6sX4bD6UBpK+Tf7XH49ibimJlmNlaDoUxWZWDnE6e8vCSGUcXHs0holvy/AT+K9XlAbyh64bygflxQWqWn6uhcYD29RZzl+yqCgpwJeFX3AdR6qgvglqSOOwF85djlMGjM+sKEatR6KYo5j3BiZRWZyPlYQNxdZjm+sOVS1wKFkAgjwbmlaekC7cFd2AT7OrCnB8Jg6HDrTYv+2sZ7MR4Xqa6eNlmj1KAU0mZvvTcHfgs7KvvLMztjpnGOfQ2pZpIpNc1cXg0NsX51sb60sK89RM1ETIRJpKuk2O2ZW2lf8FPg77l5OJx+Ppsdjgc3IJlje0XeyorKiso1ayOPfsKNenLCH4UCiieZqnk03i1euB+yNPb/T8ARexGm5JqwBrAAAAAElFTkSuQmCC';
    var login_url = 'http://tapochek.net/login.php';
    var url = 'http://tapochek.net/tracker.php';
    var root_url = 'http://tapochek.net/';
    var about = 'Tapochek.net';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[161, 160],
                /* Музыка */[451, 452, 453, 454, 455, 457, 458, 459, 460, 461, 463, 464, 465, 466, 467, 469, 470, 471, 472, 473, 474, 475, 477, 478, 479, 480, 481, 483, 484, 485, 486, 487, 488, 489, 490, 492, 493, 494, 496, 497, 498, 499, 500, 501, 502, 504, 505, 506, 507, 508, 510, 511, 512, 513, 514, 515, 516, 517, 518, 519, 520, 521, 522, 524, 525, 526, 527, 528, 529, 530, 531, 532, 533, 402, 403, 399, 401, 404, 400, 535, 536, 537, 538, 539, 540, 541, 542, 543, 545, 546, 547],
                /* Игры */[2, 14, 314, 13, 12, 11, 10, 9, 712, 18, 808, 809, 810, 811, 812, 813, 814, 815, 24, 25, 28, 27, 26, 238, 19, 23, 22, 21, 20, 29, 31, 34, 33, 32, 30, 35, 39, 38, 37, 36, 40, 44, 45, 46, 47, 60, 59, 58, 57, 56, 53, 55, 52, 54, 48, 49, 51, 69, 86, 817, 646, 87, 89, 612, 614, 88, 85, 70, 689, 818, 696, 102, 103, 104, 435, 105, 690, 178, 101, 78, 148, 116, 115, 381, 382, 349, 350, 351, 352, 390],
                /* Фильмы */[429, 703, 430, 431, 74, 144, 121, 122, 123, 124, 145, 146, 149, 150, 151, 152, 126, 75, 127, 128, 130, 131, 133, 135, 156, 635],
                /* Мультфтльмы */[320, 324, 325, 326, 327, 328, 329, 330, 321, 162, 392],
                /* Книги */[717, 740, 738, 739, 836, 838, 837, 843, 713, 724, 728, 725, 727, 723, 721, 722, 844, 718, 715, 839, 719, 846, 840, 842, 841, 716, 714, 845, 741],
                /* ПО */[202, 203, 204, 205, 206, 207, 208, 215, 216, 217, 227, 228, 229, 230, 701, 698, 231, 232, 236, 237, 240, 239, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 409, 607, 593, 595, 594, 257, 258, 259, 260, 261, 262, 263, 264, 265, 268, 269, 270, 271, 272, 273, 274, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 290, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 597, 600, 599, 601, 623, 624, 625, 626, 627, 628, 622, 667, 668, 669, 670, 672, 671, 639, 640, 642],
                /* Анимэ */[693, 684, 677, 96, 678, 660, 95, 106, 109, 107, 685, 687, 686, 688],
                /* Док. и юмор */[],
                /* Спорт */[830, 827, 835, 831, 832, 833, 834],
                /* xxx */[41, 43, 42, 50, 763, 680, 681, 682, 683, 697]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++){
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            if (t.find('input[name="login_username"]').length) {
                view.auth(0, filename);
                return [];
            } else
                view.auth(1, filename);
            t = t.find('#main_content').find('#tor-tbl').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(5).children('a').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(2).children('a').text(),
                        url: root_url + td.eq(2).children('a').attr('href'),
                        id: calculateCategory(td.eq(2).children('a').attr('href').replace(/.*f=([0-9]*).*$/i, "$1"))
                    },
                    title: td.eq(3).children('a').text(),
                    url: root_url + td.eq(3).children('a').attr('href'),
                    size: td.eq(5).children('u').text(),
                    dl: root_url + td.eq(5).children('a').attr('href'),
                    seeds: td.eq(6).text(),
                    leechs: td.eq(7).text(),
                    time: td.eq(9).children('u').text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                mimeType: "text/plain; charset=windows-1251",
                type: 'GET',
                url: url + '?nm=' + ex_kit.in_cp1251(text),
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        login_url: login_url,
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.brodim = function () {
    var name = 'Brodim';
    var filename = 'brodim';
    var icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowREM0RTY3OTY3NjIxMUUyQjdFMkUxQkNDQ0M3Njk0MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowREM0RTY3QTY3NjIxMUUyQjdFMkUxQkNDQ0M3Njk0MiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjBEQzRFNjc3Njc2MjExRTJCN0UyRTFCQ0NDQzc2OTQyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBEQzRFNjc4Njc2MjExRTJCN0UyRTFCQ0NDQzc2OTQyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+9Qf5pAAAAoBJREFUeNqUk21IU2EUx/93u+mqYa6MlimKEtEYSPhhMHsRgoSRQn5QmoVCJRRBECFpC1cQ9UGEnFESyZzc0oLCkvWhV8yF+yBpNWdzOrNk84Xt6kAhb512n6XML6EHLuec5z73f8753efhiAjMxt4QFuYB/TEO6zFZgCbdlGBYz6NgKrwKGGyD9Vo93N0OWk8DcYHgJ3jTirFFCqG94Sz2Gw0kSRKVlBQzX1VVSTFxCoVCNDAwIBdg7+IC4igL9n6ogFKdyfTq6q7A5/PBYrkKnuc5u72NS05Swev1Qq/XQxRFNDXZ/jGI+In6moicNfTb84pqS3NWOASDwVVMEnNBEFgcByh+J+qqIMl2iDyttWsCGQgEKA5RWgIifmDmK5S5BgxOz/4XWqx9NnJ2djb73QrOmYxm4QnqdzvZBnOSGZxjmBx3LAxg4sdlZWWk6ZzAidKDbH18fDzm7w2S6dkIFWYoCM09jAEaeihf+EJymy8etayMFI1GSeaAxnf08NYZqq4oIh4LYTidb/HepEahSoOj5su4KWrQPxHEyzk/zs2kQy7HtXymQFFKvPVtIpkXzwNaT4zBRjWwJx+FuxyxAUMIKzYBs2EgeQOEdjsyMrPg/ugiRKag1WrjsyxJcKIRF48YoLifw8OUuxPbb59EqzEHM+IvIDU1RkeFynITtjYeh8FYwEGzA3dvXECnrZowOoKsAzV4PDkPZfpmWDvUOhweewrM/UR/3ml4psNo47txyp+O0HM7o12Vtmg1RXQIpBRAyPsDl6sX+8Rh4PqlcvJ9G6bXXR3U5+qlB0Iry2Voyz7xIP2YCq9a45av89DQEAt0Op1ckXFby2X6K8AAyU62p3DB1uoAAAAASUVORK5CYII%3D';
    var url = 'http://brodim.com/tracker.php';
    var login_url = 'http://brodim.com/login.php';
    var root_url = 'http://brodim.com/';
    var about = 'Бесплатные и условно-бесплатные программы, антивирусы, игры, программирование, программы для КПК, свежие новости и последние новинки от разработчиков. Полезные статьи и советы, тесты и конкурсы';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[12, 135, 136, 137, 138, 139, 140, 123, 122, 121, 13, 512, 513, 514, 504, 503, 502, 501, 134, 133, 132, 131, 127, 128, 130, 129, 126, 125, 124, 144, 143, 142, 141],
                /* Музыка */[50, 356, 355, 71, 73, 74, 75, 49, 77, 76, 357, 48, 79, 78, 358, 47, 83, 82, 81, 80, 46, 85, 84, 43, 362, 361, 359, 360, 6, 11, 221, 222, 223, 224, 86, 7, 44, 45, 366, 365, 397, 364, 398, 363, 384, 396, 395, 394, 393, 392, 391, 390, 389, 388, 386, 385, 374],
                /* Игры */[256, 425, 424, 250, 431, 430, 258, 251, 428, 426, 429, 427, 253, 254, 259, 252, 255, 367, 257, 434, 432, 400, 433, 505, 506, 507, 508, 509, 246, 248, 247, 245],
                /* Фильмы */[53, 516, 67, 64, 65, 66, 483, 54, 70, 68, 69, 484, 55, 57, 421, 59, 419, 423, 422, 56, 58, 420, 60, 417, 418, 416, 415, 458, 490, 489, 488, 487, 486, 61, 90, 89, 88, 87, 98, 103, 104, 97, 100, 105, 101, 102, 99],
                /* Мультфтльмы */[62, 93, 91, 94, 96, 95, 63, 120, 119, 118, 117, 116, 115, 114, 113, 112, 111, 110, 109],
                /* Книги */[4, 161, 160, 159, 158, 157, 156, 155, 492, 154, 153, 152, 151, 150, 149, 467, 5, 175, 174, 173, 172, 171, 170, 169, 168, 166, 167, 164, 165, 163, 162, 8, 220, 219, 218, 217, 216, 215, 214, 213, 212, 211, 210, 209, 208, 16, 188, 187, 186, 185, 184, 183, 182, 181, 180, 179, 178, 177, 176, 146, 194, 193, 192, 191, 190, 189, 147, 198, 197, 196, 195, 148, 207, 206, 205, 204, 203, 202, 201, 200, 199, 406],
                /* ПО */[2, 21, 372, 22, 23, 24, 25, 26, 27, 3, 28, 29, 30, 31, 38, 37, 36, 35, 34, 33, 32, 260, 302, 301, 300, 299, 298, 297, 296, 261, 294, 293, 292, 290, 289, 287, 286, 284, 283, 282, 281, 280, 279, 278, 277, 262, 275, 274, 273, 272, 271, 270, 269, 268, 263, 314, 313, 312, 414, 311, 310, 309, 308, 307, 306, 305, 303, 264, 325, 324, 323, 322, 321, 320, 319, 318, 317, 316, 265, 266, 336, 331, 327, 332, 330, 333, 335, 328, 329, 334, 267, 344, 510],
                /* Анимэ */[],
                /* Док. и юмор */[375, 382, 381, 383, 379, 380, 378, 377, 376, 52, 108, 107, 106],
                /* Спорт */[373, 465, 464, 463, 461, 460, 462, 466, 459]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++)
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            if (t.find('input[name="login_username"]').length > 0) {
                view.auth(0, filename);
                return [];
            } else
                view.auth(1, filename);
            t = t.find('#tor-tbl').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(3).find('a').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(2).find('a').text(),
                        url: root_url + td.eq(2).find('a').attr('href'),
                        id: calculateCategory(td.eq(2).find('a').attr('href').replace(/.*f=([0-9]*).*$/i, "$1"))
                    },
                    title: td.eq(3).find('a').text(),
                    url: root_url + td.eq(3).find('a').attr('href'),
                    size: td.eq(5).children('u').text(),
                    dl: root_url + td.eq(5).children('a').attr('href'),
                    seeds: td.eq(6).text(),
                    leechs: td.eq(7).text(),
                    time: td.eq(9).children('u').text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                url: url,
                cache: false,
                data: {
                    max: 1,
                    to: 1,
                    nm: text
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        login_url: login_url,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.megashara = function () {
    var name = 'Мегашара';
    var filename = 'megashara';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAAAAABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAABxt5IAjsSmACWZVgAkmlkAIp5cAKfXugD3+PYAJptcAPf5+QAlnF8AQ6hwABiLSAA0lVwAGolLAPz+/wAYjU4ADXI0AP/+/wAajU4AD3U0AAt5NwBMq3kAz+jaAA95NwAfkVEA7fXuAFCvfAAflVQAIZNXACGWVwAcm10AHptdAKTWuAAimloAIJxgAEKkbgDe7OYAF4RGAAhwLwBjsYIANpJdAAp0MgBHrHQAC3I1AOjw6QDO5NgANJpjAOrx7AAckVIAHJNPAA96OwAdlVUAD307ABN7PgDV7N4AIZlYACKdWwAlmlsAZKZ9ADONWAAXh0cACnMwAAxxMwD///sADHQzAAp1NgAOeDYAC3w5AA16PAA8mmQAIpBQAAx+PwBSrnsA7/XwAJ/VtwAjlVYA7/nzAB+dXACl1roA2+zfABWBPwBhqX4AqNS9ACWdXAAonFkAJ51cAPj7+QDG4dEACHAxAGauhAD9//wAGo5LAOf18QAdkFEADYA9AF2keQDW7OAAHpxaAPL59AAhml0AI5pdAI3HqgAinV0AJZpdACOdXQAlnV0AJ5xjAH26lgBFp3EACHIvAA1wMgALczIA/v/9AAt0NQANdzUAH5JPANPn2wBRq30AH5ZSAB2YWAASfT4AIJhYAD6haQAThEEAJJxbACacWwD3+vgAlsOoAPf++wAIcjAAGIpKAPr//gAJdDYA/f/+AP///gAMdjMA5/DtAJzKtADp8+0AD3c2AA94OQAQeDkADn88AB+XVgAhl1YAIJlcABF/RQAhnFwAIpxcABaBQgAknFwAFYVFAAxvMQAKcjEA/f78APv//wD//P8A/f//AMvl1wD///8ADHY0AOzz7gAeklEAhsOhAByXVwAflFcAVK18ANfs4wAjm1oAE4VGACadYAAonWAAB3EvABmHTAAIczUA//79AMvo2AAbjk8ADHk1AECRYABUsH0AHZ5bABWAQQAShEQAIZxeACObWwAWh0QA3fDnAAlxMAAHdDAAl8mrAAtxMAAKcjMA/P7+AAh2NgD+/v4AC3M2AAt1MwD//v4AG41NAJ7IsQAKdzkAS697AB2UUABRrHsAEno5ABR6OQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgW6BmaxuWL0+vG1YmL89JhCuKykrwBMrxUDEK4TCb3GyQsmHO38tdMizcouyQRegjI1DXyyGhoaDSToURDLNzniOKIqdDhHDwZ1iUTRHNV57tgGGmla+a0+frwZZUJKVlzxXg5+JuiUMFsOcfie3qa2CsJ+fo4ILDUVghVoIAEYPW1KGnS91x7ESeiSGhp4uMDGmgHCGocyic11sGacjGMsbS2WdP4VcSHYcGxUKM6V5HY9nIJ8RxogaNx0CHaSQkR85dwlODoabTLR8N2MDIVVTHqpoq0qdcLvKqGaTYzhNVGk5OCJqBTYqZJN9B2mUaAdhB7kEuAeWtZRok3x9kwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%3D';
    var url = 'http://megashara.com/search/';
    var root_url = 'http://megashara.com';
    var about = 'У нас Вы сможете скачать все, что Вам нужно: музыка, фильмы, видео, игры абсолютно бесплатно!';
    var flags = {
        a: 0,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (n) {
            if (n === 'Фильмы')
                return 3;
            if (n === 'ТВ')
                return 3;
            else if (n === 'Игры' || n === 'Онлайн игры.')
                return 2;
            else if (n === 'Музыка')
                return 1;
            else if (n === 'Сериалы')
                return 0;
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('table.table-wide').children('tbody').children('tr');
            var l = t.length;
            var arr = new Array(l);
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                arr[i] = {
                    category: {
                        title: td.eq(0).text(),
                        id: calculateCategory(td.eq(0).text())
                    },
                    title: td.eq(1).children('a').text(),
                    url: td.eq(1).children('a').attr('href'),
                    size: ex_kit.format_size(td.eq(3).children().text()),
                    dl: td.eq(2).children('a').attr('href'),
                    seeds: td.eq(4).text(),
                    leechs: td.eq(5).text(),
                    time: 0
                }
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url,
                cache: false,
                data: {
                    sorting: 'seed',
                    time: 'ALL',
                    year: 0,
                    parent: 0,
                    where: 'title',
                    all_words: 1,
                    text: text,
                    order: 'added'
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 1, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.tfile = function () {
    var name = 'tfile';
    var filename = 'tfile';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAADksgYAAAD/AAAAAACkpKUA4ODgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMzMzMzMzMzMjIyMjIyMjIzMzMzMzMzMzRERERERERERBFARAQEQABEFEBEBAQERAQUQEQEBARERBRARAQEAAAEFEBEBAQERAERAAQEBEAARBRAREQEREREFEQEBAREREREREREREREQzMzMzMzMzMzIyMjIyMjIyMzMzMzMzMzMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';
    var url = 'http://tfile.me/forum/ssearch.php';
    var login_url = 'http://tfile.me';
    var root_url = 'http://tfile.me/forum/';
    var about = 'Торрент трекер tfile.me - фильмы, музыка, программы, книги';
    var flags = {
        a: 0,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            if (f === undefined) {
                return -1;
            }
            f = f.replace(/.*f=([0-9]*)$/i, "$1");
            var groups_arr = [
                /* Сериалы */[37, 1323, 1252, 697, 322, 323, 1235, 172, 135, 311, 183, 130, 1024, 139, 1023, 179, 392, 308, 342, 1015, 96, 997, 353, 285, 154, 389, 975, 168, 1020, 265, 123, 117, 170, 155, 167, 152, 105, 374, 312, 127, 1030, 773, 314, 150, 310, 328, 395, 305, 149, 136, 134, 104, 158, 372, 329, 169, 1421, 768, 1003, 307, 767, 309, 377, 1017],
                /* Музыка */[5, 1390, 51, 56, 61, 67, 186, 190, 188, 250, 493, 501, 879, 1418, 1417, 1422, 1405, 1400, 1402, 1403, 1398, 1399, 1401, 1404, 1114, 1200, 1199, 1115, 1202, 1201, 1116, 1204, 1203, 1206, 1205, 474, 473, 1035, 1117, 1208, 1207, 1118, 531, 504, 1214, 479, 478, 477, 1213, 476, 475, 315, 1489, 1473, 1472, 1471, 1210, 1209, 1439, 1505, 1453, 1452, 1451, 1450, 1449, 1445, 1448, 1506, 1442, 1443, 1440, 1447, 1446, 1444, 1441, 1212, 1211, 1198, 503, 502],
                /* Игры */[98, 355, 1381, 1057, 1053, 1050, 452, 378, 325, 318, 283, 264, 263, 262, 261, 509, 260, 508, 259, 258, 371, 1009, 1011, 1012, 1051, 359, 357, 1250, 356, 358, 734, 1052, 735],
                /* Фильмы */[4, 15, 193, 411, 1488, 1379, 1225, 1331, 1248, 1197, 1026, 293, 1227, 577, 298, 297, 290, 299, 230, 303, 292, 24, 1240, 304, 296, 300, 1332, 1324, 691, 301, 294, 1241, 498, 367, 574, 1226, 295, 189, 1224, 1388, 1387, 1276, 1330, 451, 412, 413, 414, 415, 416, 417, 1374, 1242, 1508, 1165, 1166, 1245, 1158, 532, 1167, 1159, 1244, 1160, 1238, 1173, 1161, 1320, 1162, 1246, 185, 496, 1164, 1163, 1172, 1243, 1386, 1312, 1277, 1237, 1420, 1036, 449, 448, 447, 537, 1170],
                /* Мультфтльмы */[17, 1415, 1416, 1304, 1146, 1147, 1156, 1142, 29, 85, 384, 216, 1149, 232, 455, 1148, 506, 514, 1000, 527, 237, 243, 267, 1150, 244, 239, 197, 236, 1151, 235, 1152, 241, 234, 233, 1153, 240, 1018, 1143],
                /* Книги */[195, 196, 784, 1127, 1037, 1411, 1412, 1410, 1055, 785, 1095, 1094, 1128, 1125, 1414, 1130, 999, 791, 1129, 1413, 789, 788, 1126, 1054, 786, 787, 792, 1039, 1136, 523, 518, 522, 1137, 793, 525, 524, 794, 1133, 1409, 1406, 1408, 1196, 1132, 521, 519, 1407, 1131, 520, 517, 516, 1477, 1123, 1056, 1135, 1134, 1122, 1121, 1396, 1395, 1394, 1072, 1487],
                /* ПО */[1343, 1344, 1345, 1363, 1375, 1342, 1341, 1340, 1347, 1346, 1350, 1349, 1348, 1351, 1352, 1355, 1354, 1353, 1358, 1357, 1356, 1361, 1359, 1360, 1362, 1364, 1369, 1365, 1368, 1367, 1370, 1366],
                /* Анимэ */[175, 1256, 1145, 1140, 1253, 1157, 727, 567, 1254, 219, 568, 974, 495, 743, 494, 401, 731, 499, 500, 538, 206, 1040, 446, 1005, 210, 203, 207, 204, 1255, 202, 1141],
                /* Док. и юмор */[16, 366, 1380, 1425, 1438, 1333, 187, 1062, 1310, 1059, 1033, 1509, 1193, 1195, 1064, 1063, 1028, 1058, 1019, 490, 1397, 1065, 1419, 1194, 1070, 274, 1383, 1334, 1067, 1068, 1066, 1069, 1060, 1282, 1284, 1294, 1301, 1288, 1289, 1291, 1309, 39, 1285, 1290, 1306, 1295, 1300, 1302, 1287, 1307, 1292, 1299, 1286, 1297, 1293, 1298, 1296, 1303],
                /* Спорт */[18, 1061, 1393, 1278, 272, 284, 1308, 331, 270, 1281, 1279, 472, 1236, 343, 173, 332, 273, 268, 269, 1319, 1318, 1317, 1316, 1315, 1314, 1313]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('#topics>tbody>tr');
            var l = t.length;
            var arr = [];
            for (var i = 1; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(3).children('a').length === 0) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(0).text(),
                        url: login_url + td.eq(0).children('a').last().attr('href'),
                        id: calculateCategory(td.eq(0).children('a').last().attr('href'))
                    },
                    title: td.eq(2).children('a').text(),
                    url: login_url + td.eq(2).children('a').attr('href'),
                    size: ex_kit.format_size(td.eq(3).children('a').text()),
                    dl: login_url + td.eq(3).children('a').attr('href'),
                    seeds: td.eq(4).children('b').text(),
                    leechs: td.eq(5).children('b').text(),
                    time: ex_kit.format_date(0, ($.trim(td.eq(7).text())))
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url + '?q=' + ex_kit.in_cp1251(text),
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    if (xhr.status === 503) {
                        return view.auth(0, filename);
                    }
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        login_url: login_url,
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.btdigg = function () {
    var name = 'BTDigg';
    var filename = 'btdigg';
    var icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEKGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS4xLjIiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxMi0xMS0yOFQxMDoxMTowMDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+UGl4ZWxtYXRvciAyLjEuMTwveG1wOkNyZWF0b3JUb29sPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+NTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MTwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4xNjwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+NjU1MzU8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjE2PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+Clkt1JIAAAI8SURBVDgRjVO/a1NRGD3ffS+/OiVItZpNhKKkIo4WpSLipIIdxC4OOokuRWxThZKiJIUMXZx0cTLQwR8I0r+gOIilqYuTTqURi6Fom/fue5/n5tESQWw+eD/vd849595zRVXRW7WmFDoewkyEYQjGyyU8qjXxYOcH6rNjant73bvZ/bEI8dy7AOeyFs+MwVl+ThBc5/N2Ko/S/KosPPkiRde3W7KroLoiowTdVIOWgTykMCsGvpcCog6U9JuR1XbH4lLa4FBwCsuz0LhLUP0kgzEw4PtY9jNyOAoS/l53hvpii23j62YUYWl6RG+5Lt/dOPOk8XENkeQduBfoxl3FEe0Z5IwnxTjSVm1NrtPqkql8lSxiNCjygEkh9y9wQpEQ25ATejJNzFXbQmiyW7hPHW9FkafEfYuL7NRYKD6GQyh5VybxIQhwxM/KGSezn6Jlo4JhwwSYX9uocIXHI0rrt2iVMvCmEGLGO38HP8XiO4xcYAicwn0rjgkHijse1Axs4TPjNEJZfYHddrLanPTyQA5PTZBGmgvyKop1LkVp8h8abiOYgd9GdIOBu3HvmHb2kji/Js/ZcFGtDLrt7N0RR+pOjM8JwkDXrWKUPTszx3W9exYqjEgc4EVgMabQdXZv0FDsZ7rhccGyTlgQ6Byf7zzBkAM7L3sK3Ed9VQ6y8y7PXINeX3NtFkk2wWuBw6eZl8bUCX2fGE0i9xeBI3FFRX6miXL5JB5XV1Ah2cvtDr5lC0hNHdV20pXc/wBs5uU1+j7hpAAAAABJRU5ErkJggg%3D%3D';
    var url = 'http://btdigg.org/search';
    var root_url = 'http://btdigg.org';
    var about = 'Это поисковая система по сети BitTorrent DHT, которая анализирует сеть и предоставляет полнотекстовый поиск по активным торрентам';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 0,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateTime = function (t) {
            var old = parseFloat(t.replace(/\s/, ' ').split(' ')[0]) * 24 * 60 * 60;
            return Math.round((new Date()).getTime() / 1000) - old;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('#search_res').children('table').children('tbody').children('tr');
            var hash = 0;
            var l = t.length;
            if (l === 0) {
                t = $(c).find('#torrent_info').find('table.torrent_info_tbl').children('tbody').children('tr');
                hash = 1;
            }
            if (hash === 1) {
                var url = t.eq(2).children('td').eq(1).children('a').attr('href');
                var arr = [];
                if (url === undefined) {
                    return arr;
                }
                arr.push({
                    category: {
                        id: -1
                    },
                    title: t.eq(3).children('td').eq(1).text(),
                    url: root_url + '/search?info_hash=' + url.split('btih:')[1].replace('&dn=', '&q='),
                    size: ex_kit.format_size(t.eq(5).children('td').eq(1).text()),
                    dl: url,
                    seeds: 1,
                    leechs: t.eq(4).children('td').eq(1).text(),
                    time: calculateTime(t.eq(6).children('td').eq(1).text())
                });
            } else {
                var arr = new Array(l);
                for (var i = 0; i < l; i++) {
                    var td = t.eq(i).children('td').eq(1).children('table');
                    var name_link = td.eq(0).find('td.torrent_name').children('a');
                    var params = td.eq(1).children('tbody').children('tr').children('td');
                    arr[i] = {
                        category: {
                            id: -1
                        },
                        title: name_link.text(),
                        url: root_url + name_link.attr('href'),
                        size: ex_kit.format_size(params.eq(2).children('span.attr_val').text()),
                        dl: params.eq(0).children('a').attr('href'),
                        seeds: 1,
                        leechs: params.eq(4).children('span.attr_val').text(),
                        time: calculateTime(params.eq(5).children('span.attr_val').text())
                    }
                }
            }
            return arr;
        };
        var res_count = 0;
        var loadPage = function (text, page) {
            if (page === undefined) {
                res_count = 0;
                page = 0;
            } else {
                view.loadingStatus(0, filename);
            }
            var t = text;
            var hash = '';
            if (text.length === 40 && (/[^a-zA-Z0-9]/).test(text) === false)
                hash = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url,
                cache: false,
                data: {
                    info_hash: hash,
                    q: text,
                    p: page,
                    order: 0
                },
                success: function (data) {
                    var arr = readCode(data);
                    var c = arr.length;
                    res_count += c;
                    if (hash.length === 0 && c === 10 && page < 0) {
                        view.result(filename, arr, t, res_count);
                        page++;
                        loadPage(text, page);
                    } else {
                        view.result(filename, arr, t, res_count);
                    }
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 1, 1, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.mininova = function () {
    var name = 'mininova';
    var filename = 'mininova';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAQAAAAAAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AOJwNgDws5QAh0ogAPjZygDpkmYA9MmzAOaATQDsonwA++riAO6riQDyvKIA5HY/APni1gDnh1cARERERERERERBERERERERFEEREREREREUQRERERERERRBInHiLhciFEEiceIuFyIUQSJx4i4XIhRBIsHiJRciFEEiYXIjEygUQSIv0tJtKxRBiMYoVY2aFEEREREREREUQRERERERERRBERERERERFEEREREREREUREREREREREQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';
    var url = 'http://www.mininova.org/search/';
    var root_url = 'http://www.mininova.org';
    var about = 'Download Movies, TV Shows, Music, Software and more. Mininova is the largest BitTorrent search engine and directory on the net with thousands of torrents.';
    var flags = {
        a: 0,
        l: 0,
        rs: 0
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[8],
                /* Музыка */[5],
                /* Игры */[3],
                /* Фильмы */[4],
                /* Мультфтльмы */[],
                /* Книги */[2],
                /* ПО */[7],
                /* Анимэ */[1]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var calculateTime = function (s) {
            var s = s.replace(/([0-9]*)([^0-9]*)([0-9]*)/, '$1 $2 $3')
            var d = s.split(" ");
            var date = d[0];
            var month = $.trim(d[1]);
            var year = '20' + d[2];
            if (month === 'Jan')
                month = '01';
            if (month === 'Feb')
                month = '02';
            if (month === 'Mar')
                month = '03';
            if (month === 'Apr')
                month = '04';
            if (month === 'May')
                month = '05';
            if (month === 'Jun')
                month = '06';
            if (month === 'Jul')
                month = '07';
            if (month === 'Aug')
                month = '08';
            if (month === 'Sep')
                month = '09';
            if (month === 'Oct')
                month = '10';
            if (month === 'Nov')
                month = '11';
            if (month === 'Dec')
                month = '12';
            return Math.round((new Date(parseInt(year), parseInt(month) - 1, parseInt(date))).getTime() / 1000)
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('table.maintable').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 1; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(1).children('a').attr('href') === undefined){
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(2).children('small').children('strong').children('a').text(),
                        url: root_url + td.eq(1).children('a').attr('href'),
                        id: calculateCategory(td.eq(1).children('a').attr('href').replace(/.*cat\/([0-9]*)$/i, "$1"))
                    },
                    title: td.eq(2).children('a[class!="dl"][class!="ti com"]').text(),
                    url: root_url + td.eq(2).children('a[class!="dl"][class!="ti com"]').attr('href'),
                    size: ex_kit.format_size(td.eq(3).text()),
                    dl: root_url + td.eq(2).children('a[class="dl"]').attr('href'),
                    seeds: td.eq(4).children().text(),
                    leechs: td.eq(5).children().text(),
                    time: calculateTime(td.eq(0).text())
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url,
                cache: false,
                data: {
                    search: text,
                    cat: 0
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.thepiratebay = function () {
    var name = 'ThePirateBay';
    var filename = 'thepiratebay';
    var icon = 'data:image/png;base64,Qk04AwAAAAAAADYAAAAoAAAAEAAAABAAAAABABgAAAAAAAAAAADgTAAA4EwAAAAAAAAAAAAA/////////////////////////////////////////////////////v7+/////////////Pz8vb297Ozs////////////////////////////////4uLiSUlJ3d3d////////8/PzEhIScnJy8fHx////////////////////8fHxwsLCWFhYAAAAyMjI////////5+fnEBAQICAgQkJCV1dXZWVli4uLiYmJUlJSKioqPT09bm5uHh4eYWFhwcHBubm5bGxsQEBAp6end3d3FBQUAAAAFBQUOTk5ISEhGRkZPT09WVlZQkJCKioqJycnenp6AAAAQUFBPz8/YGBgjo6O0dHR+/v7////////7+/vxcXFnZ2dg4ODExMTQEBAv7+/AAAAgoKCjo6OpaWltra2qqqqpqampaWlpKSkra2tr6+vsbGx5eXll5eXW1tb1NTUcXFxmJiYAwMDAAAANzc3VFRUGxsbAAAAX19fPDw8ERERAAAAQUFB/v7+/Pz8////////nJycAAAAAAAAAAAAHx8fCwsLAAAAJiYmBQUFAAAAAAAAKysr+vr6////////////nJycAAAAAAAADw8PAAAAAAAAAAAAAAAADQ0NAwMDAAAANjY2+vr6////////////rq6uAAAANjY25eXlWVlZHx8fJycnIyMj0dHRhoaGAAAAV1dX////////////////r6+vAAAALS0t0tLSX19fsrKy2dnZZWVlsrKyiIiIAAAAWVlZ////////////////r6+vAAAAAAAABQUFAgICExMTEBAQAwMDAwMDAQEBAAAAWlpa////////////////q6urAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVFRU////////////////19fXSUlJQUFBQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQkJCQkJCqKio/////////////////////////v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////AAA%3D';
    var url = 'http://thepiratebay.se/search/';
    var root_url = 'http://thepiratebay.se';
    var about = 'Download music, movies, games, software and much more. The Pirate Bay is the world\'s largest bittorrent tracker.';
    var flags = {
        a: 0,
        l: 0,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[],
                /* Музыка */[101, 102, 103, 104, 199],
                /* Игры */[504, 401, 402, 403, 404],
                /* Фильмы */[201, 202, 203, 204, 205, 207, 208, 209, 299, 501, 502, 505, 506],
                /* Мультфтльмы */[],
                /* Книги */[601],
                /* ПО */[301, 302, 303],
                /* Анимэ */[],
                /* Док. и юмор */ [],
                /* Спорт */[]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var mackcalcSize = function (s) {
            var size = s;
            var t = size.replace('KiB', '');
            if (t != size) {
                t = parseFloat(t);
                return Math.round(t * 1024);
            }
            var t = size.replace('MiB', '');
            if (t != size) {
                t = parseFloat(t);
                return Math.round(t * 1024 * 1024);
            }
            var t = size.replace('GiB', '');
            if (t != size) {
                t = parseFloat(t);
                return Math.round(t * 1024 * 1024 * 1024);
            }
            var t = size.replace('TiB', '');
            if (t != size) {
                t = parseFloat(t);
                return Math.round(t * 1024 * 1024 * 1024 * 1024);
            }
            var t = size.replace('B', '');
            if (t != size) {
                t = parseFloat(t);
                return Math.round(t);
            }
            return 0;
        };
        var calculateSize = function (s) {
            s = s.split(', ')[1];
            if (s === undefined)
                return 0;
            s = s.split(' ');
            s = s[1] + s[2];
            return mackcalcSize(s);
        };
        var getMonth = function(date) {
            var m = date.getMonth()+1;
            if (m < 10) {
                m = '0'+m;
            }
            return m;
        };
        var makecalcTime = function (t) {
            t = t.trim().replace(/\s+/g, ' ');
            var space_pos = t.lastIndexOf(' ');
            var time = t.substr(space_pos+1);
            var year = undefined;
            var c_date = new Date();
            if (time.indexOf(':') !== -1) {
                year = undefined;
            } else if ((/[0-9]{4}/).test(time)) {
                year = time;
                time = undefined;
            } else {
                year = c_date.getFullYear();
                time = undefined;
            }
            var month_date = t.substr(0, space_pos);
            var word = undefined;
            if ((/[^0-9-]/).test(month_date)) {
                word = month_date.toLowerCase();
                if ((/min|мин/).test(month_date)) {
                    word = 'today';
                }
                month_date = undefined;
            } else {
                word = undefined;
            }
            if (word !== undefined) {
                var o_word = word;
                word = ex_kit.today_replace(word).split(' ').slice(0, 2).reverse().join(' ');
                if (o_word === word) {
                    if ((/y-day/).test(word)) {
                        c_date = new Date( c_date.getTime() - 24*60*60*1000 );
                        word = word.replace('y-day', getMonth(c_date)+' '+c_date.getDate() );
                    }
                }
                if (o_word === word) {
                    console.info('undef date', o_word);
                    word = getMonth(c_date)+' '+c_date.getDate();
                }
            }
            var date = ((month_date)?month_date:word)+' '+( (year)?year:c_date.getFullYear() )+' '+( (time)?time:'' );
            return ex_kit.format_date(3, date);
        };
        var calculateTime = function (t) {
            t = t.split(', ')[0];
            if (t.split(' ')[1] === undefined)
                return 0;
            t = t.split(' ');
            t = t[1];
            return makecalcTime(t);
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('#searchResult').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                var td_len = td.length;
                if (td_len === 1) {
                    continue;
                }
                if (td_len === 4) {
                    arr.push({
                        category: {
                            title: td.eq(0).children().children('a').eq(1).text(),
                            url: root_url + td.eq(0).children().children('a').eq(1).attr('href'),
                            id: calculateCategory(String(td.eq(0).children().children('a').eq(1).attr('href')).replace(/(.*)\/([0-9]*)/i, "$2"))
                        },
                        title: td.eq(1).children('div.detName').children('a').text(),
                        url: root_url + td.eq(1).children('div.detName').children('a').attr('href'),
                        size: calculateSize(td.eq(1).children('font.detDesc').text()),
                        dl: td.eq(1).children('a').eq(0).attr('href'),
                        seeds: td.eq(2).text(),
                        leechs: td.eq(3).text(),
                        time: calculateTime(td.eq(1).children('font.detDesc').text())
                    });
                } else if (td_len === 7) {
                    arr.push({
                        category: {
                            title: td.eq(0).children('a').text(),
                            url: root_url + td.eq(0).children('a').attr('href'),
                            id: calculateCategory(String(td.eq(0).children('a').attr('href')).replace(/(.*)\/([0-9]*)/i, "$2"))
                        },
                        title: td.eq(1).children('a').text(),
                        url: root_url + td.eq(1).children('a').attr('href'),
                        size: mackcalcSize(td.eq(4).text()),
                        dl: td.eq(3).children().children('a').eq(0).attr('href'),
                        seeds: td.eq(5).text(),
                        leechs: td.eq(6).text(),
                        time: makecalcTime(td.eq(2).text())
                    });
                }
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url + encodeURIComponent(text) + '/0/99/0',
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.evrl = function () {
    var name = 'Everall';
    var filename = 'evrl';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAABYVD1LX1pD/1hVQf9TUkH/TU4//0hLP/9FSD//QUc+/zg+Nv87QDX/PkM2/0JFNv9ISDj/TEw6/1NQO/9YVD1LaGBE/2FbQ/9aVkH/VFNB/05OP/9JTD7/Rkk9/0FGPP86QDb/PEE3/0BDOP9FRzj/Sko6/1FOOv9XUj3/Xlc+/2xiRf9kXUP/XFhC/5uBTv+bgU7/m4FO/5uBTv+bgU7/m4FO/5uBTv+bgU7/m4FO/5uBTv9UUTz/WlU9/2JbP/9tYkX/Zl5D/5uBTv/y8vL/8vLy//Ly8v/y8vL/8vLy//Ly8v/y8vL/8vLy//Ly8v/y8vL/m4FO/15YPv9lXED/b2RG/2hfRP+bgU7/8vLy/5uBTv+bgU7/m4FO/5uBTv+bgU7/m4FO/5uBTv+bgU7/8vLy/5uBTv9hWkD/aV5A/3BkRP9nX0P/m4FO//Ly8v+bgU7/Sko8/0VIO/9BRTv/PkI4/0JEOf9HSDr/m4FO/5uBTv+bgU7/YlpA/2xhQv9xZUX/Z19D/5uBTv/y8vL/m4FO/0pKPP9FSDv/QUU7/z9DOf9ERjn/SEk7/09OO/9VUj7/XVc//2ZdQv9vYkL/cWVF/2lfQv+bgU7/8vLy//Ly8v/y8vL/8vLy//Ly8v/y8vL/8vLy//Ly8v/y8vL/8vLy/5uBTv9mXUL/cGND/3BjQ/9mXUL/m4FO//Ly8v+bgU7/m4FO/5uBTv+bgU7/m4FO/5uBTv+bgU7/m4FO//Ly8v+bgU7/aV9C/3FlRf9vYkL/Zl1C/5uBTv/y8vL/m4FO/0hJO/9ERjn/P0M5/0FFO/9FSDv/Sko8/5uBTv/y8vL/m4FO/2dfQ/9xZUX/bGFC/2JaQP+bgU7/8vLy/5uBTv9HSDr/QkQ5/z5COP9BRTv/RUg7/0pKPP+bgU7/8vLy/5uBTv9nX0P/cGRE/2leQP9hWkD/m4FO//Ly8v+bgU7/m4FO/5uBTv+bgU7/m4FO/5uBTv+bgU7/m4FO//Ly8v+bgU7/aF9E/29kRv9lXED/Xlg+/5uBTv/y8vL/8vLy//Ly8v/y8vL/8vLy//Ly8v/y8vL/8vLy//Ly8v/y8vL/m4FO/2ZeQ/9tYkX/Yls//1pVPf9UUTz/m4FO/5uBTv+bgU7/m4FO/5uBTv+bgU7/m4FO/5uBTv+bgU7/m4FO/1xYQv9kXUP/bGJF/15XPv9XUj3/UU46/0pKOv9FRzj/QEM4/zxBN/86QDb/QUY8/0ZJPf9JTD7/Tk4//1RTQf9aVkH/YVtD/2hgRP9YVD1LU1A7/0xMOv9ISDj/QkU2/z5DNv87QDX/OD42/0FHPv9FSD//SEs//01OP/9TUkH/WFVB/19aQ/9YVD1LgAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAEAAA%3D%3D';
    var login_url = 'http://evrl.to/login/';
    var url = 'http://evrl.to/ts/';
    var root_url = 'http://evrl.to';
    var about = 'Здесь можно найти и пообсуждать кино, фильмы, сериалы, музыку, игры, программы, новинки, другие ключевые слова и множество всяких полезных штук. А можно и не.';
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            var t2 = t.find('.feed-item');
            t = t.find(".ts-result");
            t = t.find('div');
            var l = t.length;
            var arr = [];
            var i;
            for (i = 0; i < l; i++) {
                var div = t.eq(i);
                if (div.children('a').length !== 2 || div.children('a').eq(0).children('img').length !== 1) {
                    continue;
                }
                arr.push({
                    category: {
                        id: -1
                    },
                    title: div.children('a').eq(1).text(),
                    url: root_url + div.children('a').eq(1).attr('href'),
                    size: 0,
                    dl: null,
                    seeds: 1,
                    leechs: 0,
                    time: 0
                });
            }
            l = t2.length;
            for (i = 0; i < l; i++) {
                var div = t2.eq(i).children('div').children('div');
                var categorys = '';
                var info = div.children('div').eq(1).children('div').eq(0);
                var cc = div.children('div').eq(0).find('a');
                for (var f = 0; f < cc.length; cc++) {
                    categorys += ' ' + '<a href="' + root_url + cc.eq(i).attr('href') + '">' + cc.eq(i).text() + '</a>';
                }
                arr.push({
                    category: {
                        title: categorys,
                        id: -1
                    },
                    title: div.children('a').eq(0).text(),
                    url: root_url + div.children('a').eq(0).attr('href'),
                    size: ex_kit.format_size(info.children('div').eq(2).children('a').text().substr(8)),
                    dl: root_url + info.children('div').eq(2).children('a').attr('href'),
                    seeds: info.children('div').eq(0).children('span').text(),
                    leechs: info.children('div').eq(1).children('span').text(),
                    time: 0
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                contentType: 'application/json',
                url: url + '?search="' + text + '"',
                cache: false,
                dataType: 'json',
                data: JSON.stringify({
                    request: {
                        "url": "/ts/?search=\"" + text + "\"",
                        "method": "getContent"
                    }
                }),
                success: function (data) {
                    if (data.response !== undefined) {
                        view.auth(1, filename);
                        view.result(filename, readCode(data.response.content), t);
                    } else {
                        view.auth(0, filename);
                        view.result(filename, [], t);
                    }
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        login_url: login_url,
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 1, 1, 0, 0, 1, 0, 0, 0]
    }
}();torrent_lib.extratorrent = function () {
    var name = 'ExtraTorrent';
    var filename = 'extratorrent';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAQAQAAAAAAAAAAAAAAAAAAAAAAADIvb7/xry9/8e8vf/Ivb7/yL2+/8i9vv/Ivb7/yL2+/8i9vv/Ivb7/yL2+/8i9vv/Ivb7/x7y9/8a8vf/Ivb7/xry9//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7/xry9/8e8vf/8/Pz//Pz8/5OTkv9qSRj/akkY/2tKGf9rShn/a0oZ/2tKGP9qSRj/Tzoc/4iEff/8/Pz//Pz8/8e8vf/HvL3/+/v7//v7+/+Hf3P/4bd0/+G3dP/ht3T/4bd0/+G3dP/ht3T/4bd0/3hgOv9xbmr/+/v7//v7+//HvL3/x7y9//f4+P/3+Pj/hHxx/+zAfP/swHz/7MB8/3xzaP9yal3/cmpd/3JqXf98c2b/xcPB//f4+P/3+Pj/x7y9/8e8vf/29vb/9vb2/4V9cf/txYX/7cWF/2RSNv/Nz8//zs/R/87P0P/Mzs7/29va//f39//29vb/9vb2/8e8vf/HvL3/8/Pz//Pz8/+IgHP/78yU/+/MlP94YDr/8vLy//Ly8v/y8vL/8vLy//Ly8v/09PT/8/T0//Lz8//HvL3/x7y9//Ly8v/y8vL/h4F5/+/Pnf/vz53/kHdP/3hgOv94YDr/eWE7/3hgOv9USDf/5eLd//Ly8v/y8vL/x7y9/8e8vf/w8PD/8PDw/4eBef/t0Kf/7dCn/+3Qp//t0Kf/7dCn/+3Qp//t0Kf/VEg3/9vb2v/w7+//8PDw/8e8vf/HvL3/7u3u/+7t7v+Gg33/7dm8/+3ZvP/Txa7/cW5r/3Fua/9xbmv/d3Rv/62rqf/o5+f/7u3u/+7t7v/HvL3/x7y9/+vr6//r6+v/h4F4/+/l0P/v5dD/XFVM/8XHx//Fx8f/xcfH/8TGxv/r7Ov/6+vr/+vr6//r6+v/x7y9/8e8vf/p6un/6erp/4eAeP/58+b/+fPm/4iEff93dG7/fXl0/356df99eXT/bGlj/5OTkf/p6un/6erp/8e8vf/HvL3/6Ofn/+fn5/+GgHj/5uPd/+bj3f/m493/5uPd/+bj3f/m493/5uPd/3Z2df9vb2//6Ofn/+fn5//HvL3/x7y9/+fn5//n5+f/raqo/3Z2df94eHj/d3d2/3h4ef95eXn/eHh4/3h4eP94eHj/ramo/+fn5//n5+f/x7y9/8a8vf/l5eX/5eXl/+Xl5f/l5eX/5eXl/+Xl5f/l5eX/5eXl/+Xl5f/l5eX/5eXl/+Xl5f/l5eX/5eXl/8a8vf/Ivb7/xry9/8e8vf/Ivb7/yL2+/8i9vv/Ivb7/yL2+/8i9vv/Ivb7/yL2+/8i9vv/Ivb7/x7y9/8a8vf/Ivb7/AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//w%3D%3D';
    var url = 'http://extratorrent.com/search/';
    var root_url = 'http://extratorrent.com';
    var about = 'ExtraTorrent.com is the biggest bittorrent system. Our goal is to provide an easy-to-use directory and search engine for all kind of torrent files. Visitors of ExtraTorrent.com can upload torrents to this site, tracked by any BitTorrent tracker.';
    var flags = {
        a: 0,
        l: 0,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[8, 273, 581, 795, 435, 169, 561, 153, 812, 274, 309, 580, 758, 310, 673, 311, 573, 821, 118, 771, 818, 234, 634, 674, 675, 312, 170, 659, 275, 171, 837, 165, 460, 802, 163, 794, 172, 782, 276, 584, 669, 647, 173, 666, 774, 174, 315, 717, 781, 754, 709, 767, 175, 269, 799, 235, 676, 817, 707, 176, 277, 560, 147, 677, 316, 619, 148, 719, 661, 128, 658, 236, 317, 846, 177, 278, 759, 141, 279, 657, 319, 320, 133, 776, 321, 112, 629, 178, 322, 179, 670, 729, 651, 598, 280, 323, 324, 108, 325, 678, 739, 798, 180, 652, 181, 679, 680, 182, 797, 642, 281, 183, 585, 644, 122, 167, 237, 606, 839, 326, 327, 328, 732, 184, 282, 820, 615, 329, 185, 283, 788, 186, 738, 187, 270, 765, 330, 238, 588, 840, 828, 188, 576, 331, 332, 672, 753, 831, 333, 334, 335, 336, 140, 612, 681, 728, 337, 574, 704, 571, 338, 284, 682, 189, 339, 599, 285, 819, 340, 813, 769, 683, 190, 789, 713, 832, 341, 773, 712, 727, 411, 191, 342, 556, 343, 736, 192, 755, 684, 344, 286, 287, 568, 266, 288, 132, 345, 756, 637, 590, 346, 685, 347, 239, 240, 289, 166, 772, 290, 763, 110, 196, 686, 412, 349, 197, 741, 350, 351, 790, 348, 241, 198, 199, 570, 242, 130, 843, 200, 115, 591, 243, 578, 638, 656, 618, 650, 353, 716, 244, 504, 665, 354, 111, 314, 726, 503, 687, 157, 705, 826, 355, 667, 357, 662, 358, 291, 617, 688, 645, 633, 579, 359, 825, 783, 246, 313, 842, 632, 245, 201, 361, 247, 356, 292, 792, 362, 202, 193, 203, 636, 120, 841, 363, 722, 293, 710, 294, 689, 703, 833, 364, 424, 113, 365, 248, 646, 723, 249, 757, 640, 778, 613, 250, 414, 690, 785, 366, 204, 427, 691, 784, 734, 229, 692, 368, 663, 205, 803, 251, 252, 714, 594, 822, 369, 206, 117, 370, 253, 254, 207, 295, 208, 760, 768, 604, 693, 209, 255, 694, 695, 807, 372, 555, 605, 373, 696, 844, 138, 715, 210, 296, 708, 375, 737, 211, 697, 376, 256, 137, 830, 649, 569, 815, 212, 718, 257, 297, 631, 845, 607, 131, 159, 378, 379, 563, 139, 144, 380, 123, 124, 562, 258, 213, 614, 381, 528, 838, 761, 214, 298, 299, 382, 215, 847, 217, 731, 764, 119, 168, 300, 383, 301, 582, 384, 583, 829, 572, 410, 608, 775, 711, 586, 218, 272, 219, 510, 114, 220, 386, 702, 610, 639, 835, 834, 635, 816, 766, 259, 740, 648, 655, 221, 595, 387, 827, 388, 271, 609, 808, 222, 152, 643, 630, 109, 308, 392, 390, 698, 302, 567, 260, 597, 664, 393, 786, 668, 735, 223, 125, 423, 823, 699, 611, 810, 721, 654, 725, 720, 394, 116, 577, 425, 268, 796, 396, 216, 399, 616, 224, 762, 836, 596, 398, 225, 733, 303, 565, 261, 400, 401, 793, 814, 559, 155, 791, 706, 777, 730, 129, 226, 824, 262, 566, 121, 402, 227, 263, 593, 304, 264, 404, 405, 575, 406, 135, 408, 194, 800, 127, 228, 770, 409, 787, 265, 801, 587],
                /* Музыка */[5, 54, 160, 55, 56, 809, 57, 58, 59, 515, 60, 61, 519, 62, 233, 63, 78, 512, 724, 306, 64, 511, 65, 66, 67, 521, 68, 526, 79, 69, 522, 507, 70, 71, 72, 73, 74, 75, 527, 514, 230, 505, 77, 161, 420, 76],
                /* Игры */[3, 136, 422, 26, 231, 627, 11, 700, 12, 158, 13, 15, 14, 701, 421, 10, 16],
                /* Фильмы */[4, 419, 28, 30, 32, 628, 558, 33, 34, 600, 35, 37, 742, 36, 149, 38, 39, 602, 40, 41, 150, 42, 44, 805, 43, 603, 45, 46, 47, 48, 779, 49, 671, 307, 601],
                /* Мультфтльмы */[29],
                /* Книги */[2, 625, 51, 848, 624, 623, 50, 621, 622, 465, 626],
                /* ПО */[7, 532, 17, 27, 232, 18, 19, 20, 25, 21, 22, 23, 24],
                /* Анимэ */[1, 99, 86, 87, 267, 88, 89, 142, 151, 90, 91, 156, 92, 93, 95, 94, 620, 145, 96, 524, 97, 98, 101, 508, 100, 523, 102, 146, 103, 104, 105, 107, 106, 525],
                /* Док. и юмор */[],
                /* Спорт */[],
                /* XXX */[533, 811, 553, 536, 535, 552, 804, 806]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };

        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('table.tl').children('tbody').children('tr');
            var l = t.length;
            var arr = new Array(l);
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                var ss = td.eq(4).text();
                var ls = td.eq(5).text();
                if (ls === '---')
                    ls = 0;
                if (ss === '---')
                    ss = 0;
                arr[i] = {
                    category: {
                        title: td.eq(2).children('span.c_tor').children('a').text(),
                        url: root_url + td.eq(1).children('a').attr('href'),
                        id: calculateCategory(td.eq(1).children('a').attr('href').replace(/\/.*\/([0-9]*)\/$/, '$1'))
                    },
                    title: td.eq(2).children('a').text(),
                    url: root_url + td.eq(2).children('a').attr('href'),
                    size: ex_kit.format_size(td.eq(3).text()),
                    dl: root_url + td.eq(0).children('a').attr('href'),
                    seeds: ss,
                    leechs: ls,
                    time: 0
                }
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url,
                cache: false,
                data: {
                    search: text
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib['fast-torrent'] = function () {
    var name = 'Fast-Torrent';
    var filename = 'fast-torrent';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAGABoAwAAFgAAACgAAAAQAAAAIAAAAAEAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD////////////////////+/v7///////8AAAEAAAEAAAAAAAAAAAAAAAAAAAAFAAD///X///L///L///T///z///////////8AAAEAAAEAAAAAAAAAAAD///////8OAgD//+KgcECgb0H//+P///X///////////8AAAD////9//8AAAAAAAD///////8TAwD//9izczOzcjX//9n///L///////////8AAAD////9//8AAAAAAAAAAAAAAAAUBAD//9izczOzcjX//9n///L///////////8AAAAAAAAAAAAAAAAAAAABAQEAAAATAwD//9i3czK6cy///9H//+f///X///z///8AAAAAAAAAAAAAAAAAAAD///////8TAwD//9i6cy/IdiX//8D//9H//+L///X///8AAAD///////8AAAAAAAD///////8TAwD//9e+dCzRdiHRdx++cy6gcED///L///8AAAD///////8AAAAAAAAAAAAAAAETAwD//9i+dCzRdiHSeCC/dC+gcED///L///8AAAAAAAAAAAAAAAAAAAAAAAAAAAEUBAD//9i6cy/KdSX//8D//9H//+L///X///8AAAAAAAAAAAAAAAAAAAD9//////8TAwD//9i1czK7dDD//9H//+f///X//vv///8AAAD///////8AAAAAAAD9///+/v4TAwD//9m5czDBdSn//8j//9z//+n///D///QFAAD///////8AAAAAAAAAAAAAAAETAwD//9nBdCveeRfoehDedxbMdiSwcTf//+IOAgAAAAAAAAAAAAAAAAAAAAAAAAEOAgD//+OucjfKdiTaeBraeBrMdiSwcjb//+IOAgAAAAAAAAAAAAACAAD///////8EAQD///X//+///+n//+b//+b//+n//+7///QEAQD9//////8AAAACAAD///////8AAAD9///9//////////////////////7///4AAAD9//////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';
    var url = 'http://fast-torrent.ru/search/';
    var root_url = 'http://fast-torrent.ru';
    var about = 'Сайт содержит каталог фильмов, сериалов, мультфильмов и аниме.';
    var flags = {
        a: 0,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('div.film-list').children('div');
            var l = t.length;
            var arr = new Array(l);
            for (var i = 0; i < l; i++) {
                var item = t.eq(i).children('div.film-wrap');
                var title = item.children('h2').text();
                var category = item.children('div.film-genre').children('div').eq(0).text();
                var link = root_url+item.children('div.film-image').children('a').attr('href');
                var time = ex_kit.format_date(1, item.children('div.film-foot').children('em').eq(2).text().replace(/.*: /,''));
                arr[i] = {
                    category: {
                        title: category,
                        id: -1
                    },
                    title: title,
                    url: link,
                    size: 0,
                    seeds: 1,
                    leechs: 0,
                    time: time
                }
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url + encodeURIComponent(text) + '/1.html',
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 1, 0, 0, 1, 0, 0, 0]
    }
}();torrent_lib['nnm-club'] = function () {
    var name = 'NoNaMe';
    var filename = 'nnm-club';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEACABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAQAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAg0k9AHweEwCYQh4AAIAAAIB1fgAAAIAAwL26AOPi3gDv6OEAsX1xAPPz7wD7lycA+MAmAAD/AAD79u0AAAD/APv48AD9+/AAs6GQAPv37QD08OgA+/jxAN/c1gDa3doA/vz2AP789AD/++8A3sq9AABilgAASnMAADJQAP///QD68+gA9PPzAO7p4AD89u8A///6AABV/wAASdwAAD25AAAxlgAAJXMAABlQAO/q4QD07+UAopWVAP/++gD9+O8AJSX/AAAA/wAAANwAAAC5AAAAlgAAAHMAAABQAPn37wD//vwA+fbzAPTx6AD//vgA/vjsAFUA/wBJANwAPQC5ADEAlgAlAHMAGQBQAPPu5gD38+YA//7xAM7HxAD/+vAA//70AP767wD58OUA/fnuAGIAlgBKAHMAMgBQAP///wD79+4A//30AP369AD8/PoA+vXqAP778QD++e8Aua6hAJeHiAB3bG8AblpaAP/+9gDu590A+vTqAPnz6gC7qaYA39W9AOrIogDDmXkAsZB5AJ5oUwCUPCEAUjk/APbx6QD38ugA9/f1ALWSiwD2ZiAA96wrAMx4WADMWyQApVMuAKVEKgB4LyoAYRoPAN/a0wDx7eIA7ejgAL5+YADHhlkA4JovAOKILgDaNBkAxmQkAJQ3FwBuHhEAUAAAAOHc1AD++fAA+/XrANKIZwDSciUA+n8eANN+JADNYCYAsEAvAIcsJgCDLBkAWhYMAOrl3ADv6OAA8e3lAPjy6ADosCwAyoAnAPS1LQDZmEEAum8oAKNUGwCfPBcAbi4jAP788gD8+fEA/frwAP//8QD8+O8A9r4wAPzJLwDpoS0AzqoyAMSGQQB1SyQAsU8kAPjz6gD///wA9vPnAPn47wDuqDcA760qAP/kMwDspisAvoMqANONHwDGah0AMlAAAOLd1gD///4A/PfuANbNwwDiujkA+848AP/mMADyyjIA/q0eAO+QLwDabCYAGVAAANrZ1AD9+vUAzMjEAPa+OQD+yDAA9MkxAAD/AAAA3AAAALkAAACWAAAAcwAAAFAAAPbx6gD+/PAA/PjwAO7o4QD89usA///4AP/88wAA3EkA0qlTAPO4MgDUmygAAFAZAPv17AD++O8A9fDmAOzo3gDm4toA//vwAP/67gDgzLkAALl6ALyWYQDCbj8AAFAyAP//+wD//vkA//73AP//+QD7+/UA+fTqAP/67wD27+QA6becAACWlgCRe2cAAFBQAPby6wDl4doA3drQAOHc0gDcwLcA2bSlAOfc1ACon6AAm5mfAK+HcQCrfEwAnHNsAHtgXACJUEgAkkU5AHpFPACNNB0AfUUwABkJGwAODg4ApaWlpaWl2xylpaWlpaWlpaWlpaWlWNHS3uilpaWlpaWlpaWlpeq2wbq556WlpaWlpaWlpaVbt7/A0GFipaWlpbP9AQUYWXqqtN21uGOlpaVkrams+2ejrmZvq20MbmDYZYZ5qJ6i/pd+i3P8fGx7WncCfZ8NA/QXRy74+aF4a77y9fagnXClpaWlpaWlpaWlpfFxkJL6paWlpaWlpaWlpaWDlpGE96WlpeDg4OBQ46Wl8IqUh/OlpaXg4ODgUKWlpaVylZMIpaWl4ODgsVClpaWliIUTjaWlpeHg4CBQpaWlpYkKpaWlpaWlpVBQUKUgpaUHpaWlpaWlpaWlpaWlUAAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8%3D';
    var url = 'http://nnm-club.me/forum/tracker.php';
    var root_url = 'http://nnm-club.me/forum/';
    var about = 'Торрент-трекер NNM-Club.me. Игры, фильмы, музыка mp3 и lossless, программы, отечественные и зарубежные сериалы, книги, мультфильмы и аниме. Рекомендации, обсуждение, рецензии и рейтинги.';
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[802, 496, 683, 573, 501, 919, 566, 498, 985, 720, 987, 664, 497, 721, 719, 849, 949, 665, 986, 666, 722, 920, 570, 499, 768, 779, 778, 788, 787, 777, 786, 803, 776, 785, 775, 774, 773, 784, 772, 771, 783, 804, 782, 781, 780, 922, 770, 769, 799, 800, 801, 791, 798, 797, 790, 793, 794, 789, 796, 792, 795],
                /* Музыка */[92, 726, 742, 256, 257, 258, 883, 955, 905, 271, 304, 322, 962, 333, 965, 336, 337, 338, 963, 334, 961, 332, 323, 343, 342, 341, 340, 339, 324, 976, 346, 977, 345, 349, 978, 347, 979, 673, 671, 980, 672, 981, 344, 983, 984, 982, 348, 674, 877, 350, 351, 325, 356, 355, 354, 353, 352, 712, 326, 359, 358, 357, 328, 364, 362, 363, 879, 824, 329, 369, 368, 367, 366, 365, 330, 398, 370, 371, 375, 374, 373, 372, 376, 377, 313, 680, 429, 681, 331, 380, 711, 379, 378, 876, 917, 327, 361, 360],
                /* Игры */[93, 728, 740, 741, 410, 411, 412, 1008, 415, 746, 428, 1009, 413, 414, 1010, 1012, 1014, 416, 1013, 1015, 268, 1016, 1041, 1018, 1017, 972, 971, 970, 969, 968, 418, 1061, 1060, 1059, 1058, 1057, 1056, 1054, 1053, 1052, 1051, 1050, 1049, 1048, 1047, 1046, 1045, 1044, 417, 316, 1039, 1038, 1037, 1036, 1035, 1034, 822, 382, 390, 387, 388, 385, 386, 848, 383, 384, 389, 391],
                /* Фильмы */[668, 724, 306, 725, 729, 731, 733, 216, 270, 218, 219, 954, 888, 217, 266, 318, 320, 677, 319, 678, 885, 908, 909, 910, 911, 912, 220, 221, 222, 882, 889, 224, 225, 226, 227, 891, 682, 694, 884, 693, 913, 228, 254, 321, 255, 906],
                /* Мультфтльмы */[892, 229, 730, 732, 230, 659, 658, 231, 660, 661, 890, 232],
                /* Книги */[94, 735, 734, 727, 738, 967, 907, 739, 736, 737, 898, 935, 871, 973, 960, 432, 755, 481, 557, 442, 441, 875, 444, 443, 440, 558, 433, 447, 445, 817, 818, 434, 456, 931, 957, 455, 453, 452, 449, 1063, 451, 482, 484, 483, 436, 460, 459, 458, 457, 462, 437, 467, 466, 958, 465, 464, 463, 469, 438, 485, 473, 472, 471, 895, 470, 896, 480, 439, 477, 476, 475, 474, 886, 478, 486, 490, 657, 489, 488, 487, 887, 893, 491, 767, 299, 301, 300, 435, 662, 663, 461, 492, 815, 933, 816],
                /* ПО */[95, 503, 504, 506, 763, 1023, 717, 509, 508, 510, 1042, 511, 916, 512, 561, 562, 513, 514, 516, 517, 518, 519, 520, 521, 522, 523, 532, 533, 535, 534, 530, 529, 525, 526, 527, 545, 764, 765, 820, 552, 553, 554, 550, 549, 548, 536, 563, 1032, 1031, 1025, 1026, 564, 1024, 537, 538, 1029, 539, 1028, 1030],
                /* Анимэ */[169, 615, 619, 618, 617, 616, 620, 623, 622, 621, 635, 632, 624, 627, 626, 625, 636, 633, 628, 631, 630, 629, 637, 634, 638, 640, 639, 641, 644, 643, 642, 645, 651, 649, 648, 646, 647, 650, 695, 696],
                /* Док. и юмор */[669, 400, 713, 706, 577, 894, 578, 580, 579, 953, 581, 806, 714, 761, 809, 924, 812, 576, 590, 591, 588, 823, 589, 598, 652, 596, 600, 819, 599, 956, 959, 597, 594, 593, 595, 582, 587, 583, 584, 586, 585, 614, 610, 613, 612, 655, 653, 654, 611, 656],
                /* Спорт */[603, 1062, 974, 609, 951, 975, 608, 607, 606, 750, 605, 604, 950],
                /* XXX */[]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++){
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('table[class="forumline tablesorter"]').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                var f = 0;
                if (td.length === 11)
                    f = 1;
                if (td.eq(4).children('a').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(1).children('a').text(),
                        url: root_url + td.eq(1).children('a').attr('href'),
                        id: calculateCategory(td.eq(1).children('a').attr('href').replace(/.*f=([0-9]*).*$/, '$1'))
                    },
                    title: td.eq(2).children('a').text(),
                    url: root_url + td.eq(2).children('a').attr('href'),
                    size: td.eq(5).children('u').text(),
                    dl: root_url + td.eq(4).children('a').attr('href'),
                    seeds: td.eq(6 + f).children('b').text(),
                    leechs: td.eq(7 + f).children('b').text(),
                    time: td.eq(9 + f).children('u').text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr != undefined)
                xhr.abort();
            xhr = engine.ajax({
                mimeType: "text/plain; charset=windows-1251",
                type: 'GET',
                url: url + '?nm=' + encodeURIComponent(text) + '&f[]=-1&prev_sd=0&prev_a=0&prev_my=0&prev_n=0&prev_shc=0&prev_shf=1&prev_sha=1&prev_shs=0&prev_shr=0&prev_sht=0&f[]=-1&o=1&s=2&tm=-1&shf=1&sha=1&ta=-1&sns=-1&sds=-1',
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.torrentmac = function () {
    var name = 'TorrentMac';
    var filename = 'torrentmac';
    var icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEKGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS4xLjIiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxMy0wNC0wM1QxMzowNDo3NDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+UGl4ZWxtYXRvciAyLjEuMTwveG1wOkNyZWF0b3JUb29sPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+NTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MTwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4xNjwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+NjU1MzU8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjE2PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CnZUfPUAAAJ/SURBVCgVFVHJbhNBFOzu6e7ZPbaz2E5ikIgJ6wkJIe5cuXHgAr/Gt3BHCHIgigiEBAfHiT3j2ad3Onrb5VXVUz347tV7B6kkCcc7o8j1PAcNh33edrxTysfQxbY1ZcXqUmAkDMWHvUdc5RSY2IRDN+hhGruJNLXa9tiTKV5s3LoupOkw6QCAFcIvJi/TalF0tz6no3iyE/l9L9bb4NcsHhF/NycFop5GdVu3rdyIBktNp/5s3pD17U0Tw2Q4jkME9pPDIRksOg58BxmfUFWB65vLjOe4KDLBvZ7YWYNmNRaf4+VBHHu5SpzouPp3y/i2xHtrmJ5snB7angzxfT+qmmqV5vsfp28+vIYGci7my8xQ8mz2tG27TcfOP30fB/3hNClRiSERB0kvmUV7b5+zmjPOpdARJXauq1oZkB7PI94mR7sNKUED8Gl+OpTxztY9DfQmr4RQUilbNpgQrTD5zfXs4SAYBEJIpGvsJCaM/GgU5mklhWKMQQiV1jYBMFZncu/gAU40U6XuJHQwigyJpEbsZpVbN5A1BRiEHMfBENkpsXACRbKyWq9Wt1mKmWQtq52yECLcSiJKiWUHEEAILMhiS9J+OVuEy6sszQh1seNqEUHUFoHYDeIoDoK7XWPsPZYfABAl8dl8pZu6ZV1ZKUx9v7LmZWX/j28eHyWDAaFQSm2syh0UrNJNcLnmFNOI2ofjNONG8tDzwcVV+O0HMmqShCznvOSIYEZV+vW8uPybwUZiRTyCF8vcDx3kUghkenK6vvhdunHQ+NXPtkvFdZD6A5TDppCN0kp1ABe1dLCRUrUUNIYNBKhZJlDX9BjuAtnp+SblrtQYCgEZM/8BpHmKVQzFcUYAAAAASUVORK5CYII%3D';
    var url = 'http://torrentmac.org/tracker.php';
    var root_url = 'http://torrentmac.org/';
    var about = 'TorrentMac';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 0,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[],
                /* Музыка */[331, 338, 332, 339, 333, 340, 334, 341, 335, 342, 336, 343, 337, 344, 273, 345],
                /* Игры */[347, 115, 17, 366, 369, 365, 364, 363, 362, 361, 360, 359, 367, 368, 88],
                /* Фильмы */[269, 24],
                /* Мультфтльмы */[],
                /* Книги */[270, 7, 9, 105],
                /* ПО */[20, 116, 100, 99, 267, 268, 199, 253, 11, 109, 13, 356, 355, 80, 14, 256, 81, 42, 351, 350, 255, 82, 15, 211, 83, 39, 84, 46, 208, 85, 70, 86, 16, 87]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++){
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('div.sectionMain').children('#tor-tbl').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(5).children('span').children('a').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(2).children('a').text(),
                        url: root_url + td.eq(2).children('a').attr('href'),
                        id: calculateCategory(td.eq(2).children('a').attr('href').replace(/.*f=([0-9]*).*$/i, "$1"))
                    },
                    title: td.eq(3).children('a').text(),
                    url: root_url + td.eq(3).children('a').attr('href'),
                    size: td.eq(5).children('u').text(),
                    dl: td.eq(5).children('span').children('a').attr('href'),
                    seeds: td.eq(6).text(),
                    leechs: td.eq(7).text(),
                    time: td.eq(9).children('u').text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                url: url,
                cache: false,
                data: {
                    nm: text
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.fenopy = function () {
    var name = 'fenopy';
    var filename = 'fenopy';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAADy8vIMjIvJjkFCr/pBQq7/QEGr/z9AqP8+PqX/Pj6l/z4/pv8/QKn/QEGs/0FCr/9CQ7L/QkOz+o+OzY329vYHjIvKjkFDr/81NaP/JyOW/yAbjv8fGor/HhmH/x4Zhv8eGYf/HxqK/yAajv8hHJL/KSab/zk4qv9DRLX/kZDPi0FCr/o1NKP/IBuP/x8ai/8eGYb/KyeK/1VRnv9VUZ7/VVKf/x0Ygv8eGYb/HxqL/yAbkP8hHJT/OTiq/0JDtfpBQ67/JSGT/x8aiv8dGYT/HBh//1RRm/////////////////8bF3r/HBh//x0ZhP8fGor/IBuQ/ykmnP9DRbT/QEKr/yAbjP8eGYb/HBiA/xsWeP9TUJb/////////////////GhVz/xsWeP8cGH//HhmF/x8ajP8iHZP/QkSx/z9Bqf8fGor/HRiC/xsXe/8aFnT/U1CS/////////////////xgUbf8aFXP/Gxd6/x0Ygv8eGon/IBuQ/0JDsP8+QKf/HhmI/x0YgP8bFnj/GRVx/1JPj/////////////////8XE2j/GRVv/xoWdv8cGH7/HhmG/yAajv9BQ67/PkCm/x4Zhv8cGH7/GhZ2/xgUbf9RTo3/////////////////FhNl/xgUa/8aFnT/HBd8/x0ZhP8fGoz/QEKs/z4/pf8eGYb/HBd9/xoWdf/Gxdv/////////////////////////////////GRVy/xsXev8dGIL/HxqL/0BCq/8+QKb/HhmG/xwYfv8aFnb/xsXb/////////////////////////////////xkVcv8bF3r/HRiC/x8ai/9AQqv/PkCn/x4ZiP8dGID/GxZ4/0RBi/99e6v/////////////////YF2W/1JPkf8aFnX/HBd8/x0ZhP8fGoz/QEKs/0BBqv8fGov/HRmD/xwXfP8aFnX/REGK////////////////////////////GxZ4/xwYf/8eGYb/IRyP/0BCrf9BQq3/JCCS/x4ZiP8dGIL/Gxd7/xoWdf+bmcH/4+Lu/////////////////xwXfP8dGYP/HxqK/ycklf9BQ6//QUKu+jMxof8fG43/HhmI/x0Ygv8cF37/Gxd6/xsWeP8bFnj/Gxd6/xwYfv8dGYP/HhqJ/yAbjv81NaT/QkKw+oyLyY5BQq//NDOh/yMfkP8fGon/HhmF/x0Ygv8dGID/HRiA/x0Ygv8eGYX/HxqK/yUgkv81NKH/QkKw/4yLyo7y8vIMionHkUBBrfpAQqv/PkCn/z0+o/88PqD/Oz2e/zs9nv88PqD/PT6j/z5Ap/9AQqv/QEGt+ouLyI7y8vIMgAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAEAAA%3D%3D';
    var url = 'http://fenopy.se/';
    var root_url = 'http://fenopy.se';
    var about = 'A fast and user friendly bittorrent search engine, with milions of Video, Audio and Software torrents.';
    var flags = {
        a: 0,
        l: 0,
        rs: 0
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */['TV Shows'],
                /* Музыка */['Music'],
                /* Игры */['Games'],
                /* Фильмы */['Movies', 'Videos'],
                /* Мультфтльмы */[],
                /* Книги */['Books'],
                /* ПО */['Apps', 'Applications'],
                /* Анимэ */['Animes', 'Anime'],
                /* Док. и юмор */[],
                /* Спорт */[],
                /* XXX */[]
            ];
            for (var i = 0, len = groups_arr.length; i < len; i++)
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            return -1;
        };
        var calculateTime = function (t) {
            if ((/today/).test(t)) {
                return Math.round((new Date().getTime() / 1000) / (60 * 60 * 24)) * (60 * 60 * 24);
            } else if ((/yesterday/).test(t)) {
                return (Math.round((new Date().getTime() / 1000) / (60 * 60 * 24)) * (60 * 60 * 24)) - (60 * 60 * 24);
            } else {
                var time = parseInt(t.replace(/([0-9]*).*/, '$1'));
                var nowTime = Math.round(new Date().getTime() / 1000);
                if ((/second/).test(t)) {
                    return nowTime - time;
                } else if ((/minute/).test(t)) {
                    return nowTime - time * 60;
                } else if ((/hour/).test(t)) {
                    return nowTime - time * 60 * 60;
                } else if ((/day/).test(t)) {
                    return nowTime - time * 60 * 60 * 24;
                } else if ((/week/).test(t)) {
                    return nowTime - time * 60 * 60 * 24 * 7;
                } else if ((/month/).test(t)) {
                    return nowTime - time * 60 * 60 * 24 * 30;
                } else if ((/year/).test(t)) {
                    return nowTime - time * 60 * 60 * 24 * 365;
                }
            }
            return 0;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('#search_table').children('tbody').children('tr');
            var l = t.length;
            var arr = new Array(l);
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                td.eq(0).children('sapn').remove();
                var links = td.eq(2).children('a');
                var title = td.eq(0).children('a').text();
                var url = td.eq(0).children('a').attr('href');
                td.eq(0).children().remove();
                var c_t = $.trim(td.eq(0).text()).substr(1);
                arr[i] = {
                    category: {
                        title: c_t,
                        id: calculateCategory(c_t)
                    },
                    title: title,
                    url: root_url + url,
                    size: ex_kit.format_size(td.eq(3).text()),
                    dl: links.eq(links.length - 1).attr('href'),
                    seeds: td.eq(5).text(),
                    leechs: td.eq(6).text(),
                    time: calculateTime(td.eq(4).text())
                }
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url,
                cache: false,
                data: {
                    keyword: text,
                    limit: '50'
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 1, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.opensharing = function () {
    var name = 'OpenSharing';
    var filename = 'opensharing';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAABILAAASCwAAAAAAAAAAAAAAAA8AElrJ/xJayf8SWsn/ElrJ/xJayf8SWsn/ElrJ/xJayf8SWsn/ElrJ/xJayf8SWsn/ElrJ/xJayf8Ah0sAElzL/xiG9v8Yhvb/GIb2/xiG9v8Yhvb/GIb2/xiG9v8Yhvb/GIb2/xiG9v8Yhvb/GIb2/xiG9v8Yhvb/ElzL/xNfzv8Yhvb/GIb2/xiG9v8Yhvb/GIb2/xeB8/8Uduz/FHbs/xeB8/8Yhvb/GIb2/xiG9v8Yhvb/GIb2/xNfzv8TYtH/GIT0/xiE9P8YhPT/GIT0/xd/8f8RaeT///////////8RaeT/F3/x/xiE9P8YhPT/GIT0/xiE9P8TYtH/FGbV/xeB8f8XgfH/F4Hx/xZ87v8QZ+H//////////////////////xBn4f8WfO7/F4Hx/xeB8f8XgfH/FGbV/xRq2f8Xfu7/F37u/xZ56/8QZN7/////////////////////////////////EGTe/xZ56/8Xfu7/F37u/xRq2f8Vbt3/Fnrq/xZ66v8TcOT///////////////////////////////////////////8TcOT/Fnrq/xZ66v8Vbt3/FXLi/xZ25v8Wdub/FXHj/xJo3f8NVdD//////////////////////w1V0P8SaN3/FXHj/xZ25v8Wdub/FXLi/xZ25v8VcuL/FXLi/xVy4v8VcuL/EF/W//////////////////////8QX9b/FXLi/xVy4v8VcuL/FXLi/xZ25v8Weur/FW7d/xVu3f8Vbt3/FW7d/xBc0f//////////////////////EFzR/xVu3f8Vbt3/FW7d/xVu3f8Weur/F37u/xRq2f8Uatn/FGrZ/xRq2f8PWc3//////////////////////w9Zzf8Uatn/FGrZ/xRq2f8Uatn/F37u/xeB8f8UZtX/FGbV/xRm1f8UZtX/D1XK//////////////////////8PVcr/FGbV/xRm1f8UZtX/FGbV/xeB8f8YhPT/E2LR/xNi0f8TYtH/E2LR/xBWyf//////////////////////EFbJ/xNi0f8TYtH/E2LR/xNi0f8YhPT/GIb2/xNfzv8TX87/E1/O/xNfzv8SW8v/EFTG/w5Qw/8OUMP/EFTG/xJby/8TX87/E1/O/xNfzv8TX87/GIb2/xiG9v8SXMv/ElzL/xJcy/8SXMv/ElzL/xJcy/8SXMv/ElzL/xJcy/8SXMv/ElzL/xJcy/8SXMv/ElzL/xiG9v8AzdMAGIb2/xiG9v8Yhvb/GIb2/xiG9v8Yhvb/GIb2/xiG9v8Yhvb/GIb2/xiG9v8Yhvb/GIb2/xiG9v8AjU4AgAE9sQAAsYAAAEHpAACl1QAAGJ8AAAAmAADRIQAAL7MAAFNAAACvfgAA1c8AAJXOAABlJwAAB60AAGWmgAHAaQ%3D%3D';
    var url = 'http://opensharing.org/newsearch.php';
    var root_url = 'http://opensharing.org';
    var about = 'Открытый торрент-трекер без регистрации и рейтинга';
    var flags = {
        a: 0,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateTime = function (s) {
            var d = s.split(' ');
            var date = d[0];
            var month = d[1];
            var year = '20' + d[2];
            if (month === 'Янв')
                month = '01';
            if (month === 'Фев')
                month = '02';
            if (month === 'Мар')
                month = '03';
            if (month === 'Апр')
                month = '04';
            if (month === 'Май')
                month = '05';
            if (month === 'Июн')
                month = '06';
            if (month === 'Июл')
                month = '07';
            if (month === 'Авг')
                month = '08';
            if (month === 'Сен')
                month = '09';
            if (month === 'Окт')
                month = '10';
            if (month === 'Ноя')
                month = '11';
            if (month === 'Дек')
                month = '12';
            return Math.round((new Date(parseInt(year), parseInt(month) - 1, parseInt(date))).getTime() / 1000)
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('#index').children('table').children('tbody').children('tr');
            var l = t.length;
            var arr = new Array(l);
            for (var i = 1; i < l; i++) {
                var td = t.eq(i).children('td');
                var corr = 0;
                if (td.length > 5) {
                    corr = 1;
                }
                td.eq(2 + corr).children('span').children('img').remove();
                arr[i - 1] = {
                    category: {
                        id: -1
                    },
                    title: td.eq(1).children('a').eq(2).text(),
                    url: root_url + td.eq(1).children('a').eq(2).attr('href'),
                    size: ex_kit.format_size(td.eq(4 + corr).text()),
                    dl: td.eq(1).children('a').eq(0).attr('href'),
                    seeds: td.eq(2 + corr).children('span.green').text(),
                    leechs: td.eq(3 + corr).children('span.red').text(),
                    time: calculateTime(td.eq(0).text())
                }
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url,
                data: {
                    search_word: text,
                    search_place: 0,
                    search_direction_asc: 1,
                    search_type: 1,
                    search_cat: 0,
                    search_sort: 2
                },
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 1, 1, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib['torrents.freedom'] = function () {
    var name = 'Freedom';
    var filename = 'torrents.freedom';
    var icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAKJJREFUOE9j+E8iYCBR/X98Gr7vXft97RQgiWwoXg0tUe+jFL+3RFFRw/Pn36cUA40EmXpuK5DEa8P39++TDYEqEAjMxekkoNkQpSAbgH6t9oJzsfvhe7YTSEWy4f/v70EqYBbitAHTPAJ+IFkDxDyEk54/J+SHrXOgKrItQZ7OtiSgAeRPWMhAQxZ/sELCDpp+1k75f+3Y/3vXoCRSuJKcWgGsiJbhgQDwngAAAABJRU5ErkJggg%3D%3D';
    var login_url = 'http://torrents.freedom/forum/login.php';
    var url = 'http://torrents.freedom/forum/tracker.php';
    var root_url = 'http://torrents.freedom/forum/';
    var about = 'Локальный торрент-трекер Freedom';
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[205, 575, 689, 469, 204, 449, 448, 465, 537, 206, 121, 209, 208, 207],
                /* Музыка */[93, 252, 240, 133, 412, 411, 79, 253, 241, 134, 84, 254, 242, 95, 255, 243, 236, 232, 163, 159, 387, 139, 141, 140, 96, 256, 244, 94, 258, 245, 135, 136, 311, 138, 137, 107, 310, 91, 230, 97, 102, 265, 264, 147, 81, 268, 267, 145, 86, 270, 269, 104, 274, 273, 103, 272, 271, 238, 234, 165, 161, 150, 149, 148, 105, 276, 275, 154, 153, 152, 151, 109, 458, 231, 17, 259, 246, 127, 417, 416, 415, 414, 413, 80, 260, 247, 128, 83, 261, 248, 37, 262, 249, 237, 233, 164, 574, 160, 144, 142, 143, 38, 263, 250, 92, 257, 251, 75, 25, 24, 77, 108, 312, 456, 228, 457, 18, 278, 277, 129, 82, 280, 279, 130, 85, 282, 281, 41, 286, 285, 40, 284, 283, 239, 235, 166, 162, 157, 156, 155, 106, 288, 287, 26, 76, 23, 78, 110, 100, 229, 101],
                /* Игры */[664, 718, 717, 719, 665, 562, 87, 545, 546, 557, 558, 559, 560, 65, 477, 476, 475, 66, 71, 561, 64, 70, 481, 479, 478, 67, 578, 73, 370, 579, 580, 74, 367, 482, 181, 68, 483, 484, 365, 711, 715, 366, 563, 564, 565, 566, 567, 568, 569, 571, 572, 573, 653, 125, 660, 485, 659, 658, 657, 486, 656, 655, 487, 309],
                /* Фильмы */[9, 454, 468, 667, 430, 589, 590, 668, 433, 390, 305, 398, 434, 464, 7, 447, 437, 654, 587, 669, 455, 588, 670, 438, 442, 439, 301, 441, 10, 541, 540, 544, 576, 306, 8, 452, 302, 581],
                /* Мультфтльмы */[584, 173, 615, 666, 172, 613, 614, 171, 612, 170, 609, 608, 169, 606, 607, 168, 445, 444, 446, 610, 662, 536, 611, 179, 177, 178, 176, 549, 548, 547, 577, 651, 175, 174, 582],
                /* Книги */[601, 697, 353, 355, 602, 356, 357, 358, 52, 603, 690, 663, 534, 535, 354, 497, 351, 500, 501, 604, 499, 352, 498, 350, 324, 519, 492, 518, 493, 494, 495, 496, 515, 516, 342, 713, 513, 55, 341, 326, 343, 347, 686, 346, 345, 712, 344, 348, 349, 685, 359, 360, 363, 364, 361, 49, 695, 694, 317, 313, 314, 319, 318, 687, 688, 315, 202, 203, 505, 379, 383, 384, 381, 380, 378, 382, 385, 377, 376, 375, 386],
                /* ПО */[47, 467, 462, 44, 459, 460, 461, 43, 523, 645, 524, 525, 526, 527, 646, 647, 644, 48, 46, 42, 528, 117, 466, 650, 131, 649, 648],
                /* Анимэ */[124, 583, 451, 616, 167, 126, 158, 368, 369, 220, 683, 684],
                /* Док. и юмор */[13, 187, 188, 298, 299, 300, 297, 296, 190, 191, 295, 291, 619, 201, 15, 185, 184, 629, 183, 542, 714, 186, 630, 122, 304, 14, 215, 214, 213, 212, 211, 210, 123],
                /* Спорт */[88, 196, 193, 192, 586, 194, 195, 198, 618, 585, 199, 197, 627, 628]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var calculateTime = function (time) {
            time = $.trim(time).split(" ");
            time[1] = time[1].replace('Янв', '1').replace('Фев', '2').replace('Мар', '3')
                .replace('Апр', '4').replace('Май', '5').replace('Июн', '6')
                .replace('Июл', '7').replace('Авг', '8').replace('Сен', '9')
                .replace('Окт', '10').replace('Ноя', '11').replace('Дек', '12');
            var date = time[1].split('-');
            time = time[0].split(':');
            return Math.round((new Date(parseInt('20' + date[2]), parseInt(date[1]) - 1, parseInt(date[0]), parseInt(time[0]), parseInt(time[1]))).getTime() / 1000);
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            if (t.find('input[name="login_username"]').length) {
                view.auth(0, filename);
                return [];
            } else
                view.auth(1, filename);
            t = t.find('table.forumline').find('tr');
            var l = t.length;
            var arr = [];
            for (var i = 1; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(6).children('a').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(3).children('a').text(),
                        url: root_url + td.eq(3).children('a').attr('href'),
                        id: calculateCategory(td.eq(3).children('a').attr('href').replace(/.*f=([0-9]*).*$/i, "$1"))
                    },
                    title: td.eq(4).children('a').text(),
                    url: root_url + td.eq(4).children('a').attr('href'),
                    size: ex_kit.format_size(td.eq(7).text()),
                    dl: root_url + td.eq(6).children('a').attr('href'),
                    seeds: td.eq(8).children('b').text(),
                    leechs: td.eq(9).children('b').text(),
                    time: calculateTime(td.eq(11).children('p').eq(0).text() + ' ' + td.eq(11).children('p').eq(1).text())
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                url: url + '?nm=' + ex_kit.in_cp1251(text),
                cache: false,
                data: {
                    prev_allw: 1,
                    prev_a: 0,
                    prev_dla: 0,
                    prev_dlc: 0,
                    prev_dld: 0,
                    prev_dlw: 0,
                    prev_my: 0,
                    prev_new: 0,
                    prev_sd: 0,
                    prev_da: 1,
                    prev_dc: 1,
                    prev_df: 1,
                    prev_ds: 0,
                    'f[]': -1,
                    o: 1,
                    s: 2,
                    tm: -1,
                    sns: -1,
                    dc: 1,
                    df: 1,
                    da: 1,
                    pn: '',
                    allw: 1,
                    submit: ''
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        login_url: login_url,
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.filebase = function () {
    var name = 'FileBase';
    var filename = 'filebase';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEACABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAQAUAAAAAAAAAAAAAAAEAAAABAABZW1sAWllbAFtcWgBbWlwAXlxbAFtbWwBdWlwAXVtbAFpcXAD///4A3+HhAP7+/gD///8A4+DiAP3//gDi4OAA/f//AODf4QAAMP4AAy7/AAAr4ADe4d8A///8ANzg4QD//v8A3uDgAFlbXAAAMP8AAC7/AAEp4AD7//8A4uDfAFhbWQABMP4AAiveAAAy/gADL/4A//79AOHf3wD6//4A4eHhAAAx/QAAMf8A4OHfAPz+/wDe4OEA4+HhAFpaWgAAKOIAAjD/APz//QAEL/8AASrdAAIv/wDf398AXFxcAAEp3wAAL/8A3t/jAOLf4QAALN4AAjH/AAAq3wAALv4A4ODgAFlcWgAAKuEA//3/AAEx/wDd398AXVleAFhdXAD9/v8AAirgAAAp4ABdW1oA3d7iAFxbXQBYWloAXF1bAFxYXQBbXFgAV1tcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAgMEBQUFAwAGBwgABgIJCQoLDA0MDg8JCQ8MEAUHERITFBAQFQkWFxgMGQwHGhgUGxwdCRgRGB4fGAwPIAcQISIjJBEMDBUlDCYnGAgHKBIpHSoYKxAsLQwJLhgvAhgwMRIdMjM0NQw2DAstNxoJKjgcKhU5GzgSDDoMFgAFOxIqHTkMPD0bPhIMFQwDAwkUPyMdDAwZCRBADAwPQQUWG0IpMR05OSI9OUBDDgIGDRIqPikjHRshPjlERRhGR0hJHCpCPyo+IT1CEjFAAgUJOUkSGxQSMUoSOUIqDktBDwlIDRYJOwwWTBAlQAwaTUEFRwYFAwUFTk9QUVIHBQAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8=';
    var url = 'http://www.filebase.ws/torrents/search/';
    var root_url = 'http://www.filebase.ws';
    var about = 'Filebase.ws - скачать фильмы, игры, музыку, программы, бесплатно!';
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */['serials'],
                /* Музыка */['videoclips', 'eng-music', 'rus-music'],
                /* Игры */['games'],
                /* Фильмы */['dvd5', 'tv', 'action', 'comedy', 'thriller', 'classic', 'history', 'mystic', 'sci-fi', 'horror', 'drama', 'adventure', 'detective', 'concert', 'epic', 'dvd9', 'fantasy', 'hdtv', 'war', 'family', 'tales', 'catastroph'],
                /* Мультфтльмы */['cartoons'],
                /* Книги */['books'],
                /* ПО */['software'],
                /* Анимэ */['anime'],
                /* Док. и юмор */['documental'],
                /* Спорт */['sport']
            ];
            for (var i = 0, len = groups_arr.length; i < len; i++)
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            return -1;
        };
        var calculateTime = function (f) {
            var dd = f.split('/');
            return Math.round(new Date(parseInt('20' + dd[2]), parseInt(dd[1]) - 1, parseInt(dd[0])).getTime() / 1000);
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('td.lista2').parent('tr').parent('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 1; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.length < 2) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(0).children('a').children('img').attr('alt'),
                        url: root_url + td.eq(0).children('a').attr('href'),
                        id: calculateCategory(td.eq(0).children('a').attr('href').replace(/.*\/torrents\/(.*)\/$/i, "$1"))
                    },
                    title: td.eq(1).children('a').text(),
                    url: root_url + td.eq(1).children('a').attr('href'),
                    size: ex_kit.format_size(td.eq(4).text()),
                    seeds: td.eq(6).text(),
                    leechs: td.eq(7).text(),
                    time: calculateTime(td.eq(3).text())
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url,
                cache: false,
                data: {
                    search: text,
                    c: 0,
                    t: 'liveonly'
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 1, 0, 0, 0]
    }
}();torrent_lib.opentorrent = function () {
    var name = 'OpenTorrent';
    var filename = 'opentorrent';
    var icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3AkeBics+G6WHQAAAf9JREFUOMulk0tI1FEUh7878x8fmUVJCL3ICIKM3hRF0YuYVbQrilZBpJtCCo0e4KKFBRZC4iZBW5op4SwMCUZTKVBo0TsEdYrSqRB1nHHm/v+/FmpkOQj5Lc+59zv3XM4xksQC8M0VlIS8UVz3+/8JhmMhrj/L5/H78/MKzEwLkjDG8OjNcULvQsSTDtkZltvBZvIXn8AYk/4FkrAaoKRlJbUvQ6zIhUTKEk861PZcSnsZwAEwxlDWeoCkN0LruVEgQMfAfaqeXyXgg7sRqOuz/O0pXDYtmLDDVPd+JnrlKWVtRzi8LkimswTXEyc3lVFQZ1m9C5ZPC6Ix+DpmuFZoQJKq24u0rQJNep9EMZLiOt3gV7Ae1fRJVKTUNeFKkjrHXR0NW9GYkiQhSVmlqLRxv6z7Q4M/w6ps3yP/5YCquovFRU/OLatD9VZPoq64aeXcs7rQaSVJTtPHchJRhzstXXyJFfAhOkpPvwNxy6oNpdARxyZFyYtFFDW4OEMGG4GDZ6f6Mcce5Kjtdeyf3z21fSff+nvoaoph9/qJ1GSyZt8kzlo/NsOih9mz52Aucs8kSLx1UZ4PN8uHE0lhlxpeNeewJW9qblAaPM9T76DE+jE5W8fl3zim3eUpDcmT53m/z6UVzLDjRkJsjqmyOzVnfl6BJIVHZlf9E7PQdf4FVC+nbLqwD1EAAAAASUVORK5CYII%3D';
    var login_url = 'http://opentorrent.ru/login.php';
    var url = 'http://opentorrent.ru/tracker.php';
    var root_url = 'http://opentorrent.ru/';
    var about = 'Открытый удмуртский битторрент-трекер';
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[96, 344, 688, 689, 705, 511, 690, 264, 265, 384, 687, 445, 439, 708, 709, 97, 467, 515, 259, 297, 430, 142, 262, 504, 531, 537, 435, 300, 433, 503, 147, 296, 526, 505, 529, 295, 514, 159, 153, 139, 431, 143, 162, 253, 525, 140, 436, 446, 512, 207, 137, 343, 532, 141, 434, 161, 534, 535, 145, 151, 144, 502, 148, 197, 542, 298, 533, 513, 440, 516, 209, 536, 530, 150],
                /* Музыка */[554, 560, 561, 562, 563, 564, 555, 566, 567, 568, 569, 570, 571, 572, 573, 556, 576, 577, 578, 579, 580, 581, 582, 583, 557, 586, 587, 588, 590, 591, 592, 593, 594, 558, 596, 597, 598, 599, 600, 601, 559, 603, 604, 605, 606, 585, 613, 614, 615, 616, 617, 618, 619, 676, 620, 589, 629, 628, 627, 626, 625, 624, 623, 622, 675, 621, 608, 638, 637, 636, 635, 634, 633, 631, 677, 630, 609, 642, 641, 640, 678, 639, 610, 653, 652, 651, 650, 649, 648, 647, 646, 645, 644, 643, 73, 656, 405, 655, 354, 654, 70, 441, 442, 69, 510, 509, 659, 508, 657, 658, 355, 660, 662, 663, 36, 258, 257, 489, 664, 358, 665, 125, 418, 419, 667, 668, 359, 669, 170, 341, 360, 218, 670, 671, 672, 361, 398, 403, 402, 399, 375, 377, 376, 501, 673, 380, 35, 215, 213],
                /* Игры */[286, 11, 686, 123, 116, 88, 95, 93, 89, 92, 90, 220, 94, 91, 272, 276, 275, 274, 273, 277, 12, 522, 242, 707, 241, 413, 414, 406, 13, 221, 214, 236, 235, 234, 233, 231, 230, 229, 228, 227, 226, 225, 224, 223, 222],
                /* Фильмы */[16, 486, 211, 15, 417, 238, 550, 266, 420, 14, 342, 350, 421, 81, 210, 280, 155, 552, 680, 546, 429, 77, 517, 722, 723, 538],
                /* Мультфтльмы */[59, 483, 134, 156, 132, 133, 157, 271, 216, 468, 451, 58, 240, 239, 158, 679, 428, 518],
                /* Книги */[75, 389, 390, 412, 391, 348, 237, 217, 249, 497, 415, 64],
                /* ПО */[184, 460, 46, 329, 322, 323, 324, 325, 427, 326, 327, 328, 443, 47, 45, 49, 51, 48, 80, 456, 487, 38, 488, 462, 466, 461, 186, 464, 463, 334, 470, 469, 447, 471, 163, 320, 321],
                /* Анимэ */[9, 86, 85, 527, 83, 263, 681, 284, 283, 282, 84, 82, 269, 166, 281, 172, 173],
                /* Док. и юмор */[98, 499, 79, 481, 495, 482, 268, 270, 54, 135, 548, 438, 164, 165, 494, 506, 682, 551, 541],
                /* Спорт */[169, 685, 374, 202, 544, 373, 543, 437, 201, 200, 345, 346, 267, 545],
                /* xxx */[484]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var calculateTime = function (f) {
            var dd = f.split('.');
            return Math.round(new Date(parseInt(dd[2]), parseInt(dd[1]) - 1, parseInt(dd[0])).getTime() / 1000);
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            if (t.find('input[name="username"]').length) {
                view.auth(0, filename);
                return [];
            } else
                view.auth(1, filename);
            t = t.find('table.forumline.tracker').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 1; i < l - 1; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(1).children('a').attr('href') === undefined || td.eq(2).children('a').text() == '') {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(1).children('a').text(),
                        url: root_url + td.eq(1).children('a').attr('href'),
                        id: calculateCategory(td.eq(1).children('a').attr('href').replace(/.*f=([0-9]*)$/i, "$1"))
                    },
                    title: td.eq(2).children('a').text(),
                    url: root_url + td.eq(2).children('a').attr('href'),
                    size: ex_kit.format_size(td.eq(5).text()),
                    dl: root_url + td.eq(4).children('a').attr('href'),
                    seeds: td.eq(6).text(),
                    leechs: td.eq(7).text(),
                    time: calculateTime(td.eq(8).text())
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                url: url,
                cache: false,
                data: {
                    nm: text
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        login_url: login_url,
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib['torrents.local'] = function () {
    var name = 'Торрент (уфанет)';
    var filename = 'torrents.local';
    var icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAAh0lEQVQ4T6XTIQvCQByG8SsrNpt1ddm6ajWurVj2uUQQBoJhsDAYDBnsWz2WwQn3hvcw/OI9f3jhAhD+ER9vHeTYD8fAeoMcSeDTQo4k8LvF0oAi9tIDzldQ7MB0AcUOjDUodmA4g2IH3hUoduBVgmIH+hModuB5BMUOPA6g2IF7AYodyPjiX1qi+gcxhCCwAAAAAElFTkSuQmCC';
    var login_url = 'http://torrents.local/forum/login.php';
    var url = 'http://torrents.local/forum/tracker.php';
    var root_url = 'http://torrents.local/forum/';
    var about = 'Локальный торрент-трекер Torrents';
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[14, 862, 454, 115, 194, 734, 153, 558, 379, 790, 114, 162, 818, 90, 86, 126, 81, 279, 380, 134, 164, 112, 61, 121, 560, 125, 91, 433, 92, 220, 130, 245, 201, 213, 641, 653, 127, 521, 191, 196, 431, 62, 424, 387, 193, 751, 165, 159, 192, 197, 381, 195, 64, 198, 386, 406, 128, 63, 583, 432, 129, 167, 943, 875, 98, 88, 122, 166, 385, 752, 101, 190, 738, 163, 144, 246, 161, 150, 124, 669, 113, 200, 440, 123, 597, 13, 188, 137, 815, 189, 559, 221, 422, 661, 138, 135, 584, 651, 136],
                /* Музыка */[216, 83, 401, 598, 617, 616, 615, 637, 22, 606, 686, 733, 23, 607, 27, 608, 553, 24, 470, 599, 950, 469, 600, 951, 471, 25, 925, 880, 410, 411, 420, 235, 611, 921, 234, 612, 922, 409, 412, 26, 484, 579, 485, 580, 735, 156, 676, 677, 678, 239, 241, 240, 376, 375, 549, 30, 267, 562, 368, 563, 369, 564, 266, 565, 364, 370, 566, 365, 567, 366, 568, 367, 569, 29, 254, 498, 253, 499, 252, 500, 251, 501, 250, 502, 249, 503, 895, 909, 247, 504, 28, 260, 505, 258, 506, 444, 507, 256, 508, 257, 509, 259, 510, 255, 511, 99, 336, 512, 338, 513, 335, 514, 333, 515, 334, 516, 31, 360, 517, 361, 518, 362, 519, 141, 526, 85, 527, 32, 374, 238, 573, 237, 574, 571, 572, 373, 400, 3, 429, 430, 874, 533, 428, 534, 658, 34, 438, 535, 435, 536, 659, 398, 436, 396, 35, 416, 540, 415, 543, 417, 544, 419, 545, 418, 546, 660, 36, 538, 402, 84, 539, 630, 242, 244, 243, 377],
                /* Игры */[40, 65, 75, 457, 900, 901, 902, 102, 456, 822, 68, 464, 73, 463, 270, 823, 624, 548, 67, 458, 442, 66, 657, 77, 69, 461, 76, 455, 908, 271, 787, 74, 71, 72, 70, 459, 903, 904, 905, 496, 497, 906, 38, 961, 78, 117, 483, 788, 486, 487, 825, 482, 948, 44, 868, 56, 337, 45, 339, 399, 447, 42],
                /* Фильмы */[8, 6, 592, 472, 160, 591, 590, 589, 588, 945, 813, 479, 7, 227, 888, 670, 212, 832, 834, 833, 835, 837, 836, 838, 269, 839, 840, 841, 869, 842, 876, 845, 844, 843, 870, 846, 848, 847, 849, 851, 850],
                /* Мультфтльмы */[11, 383, 889, 933, 143, 168, 758, 934, 46, 935, 133, 652, 936, 937, 938, 132, 421, 184, 405, 142, 687, 384, 158, 382, 939, 434, 131, 10, 759, 475],
                /* Книги */[15, 20, 852, 358, 354, 359, 97, 942, 356, 116, 352, 816, 446, 946, 756, 355, 353, 357, 94, 93, 640, 16, 344, 346, 348, 351, 341, 347, 343, 342, 349, 345, 350, 17, 941, 940, 468, 853, 95, 96, 854, 19, 629, 596, 439, 575, 642, 522, 426, 595, 744, 577, 219, 811, 217, 593, 654, 218, 747, 576, 474, 743, 82],
                /* ПО */[918, 50, 319, 316, 315, 317, 318, 332, 594, 582, 746, 552, 581, 47, 284, 280, 282, 378, 944, 281, 732, 51, 324, 325, 330, 328, 118, 331, 623, 329, 327, 326, 322, 321, 323, 48, 291, 300, 289, 287, 296, 290, 295, 292, 299, 297, 285, 301, 288, 298, 286, 54, 622, 52, 55, 586, 684, 683, 681, 585, 680, 789, 737, 303, 313, 305, 312, 314, 308, 307, 311, 306, 310, 309, 89, 631, 427, 495],
                /* Анимэ */[12, 473, 214, 685, 371, 932, 119, 561, 149, 148, 215, 202],
                /* Док. и юмор */[57, 155, 186, 570, 634, 403, 824, 855, 856, 443, 635, 929, 554, 830, 867, 633, 531, 185, 965, 866, 523, 949, 425, 109, 890, 736, 625, 891, 626, 899, 927, 919, 898, 920, 627, 926, 892, 893, 894, 628, 58, 154, 551, 877, 878, 145, 858, 632, 621, 857, 930, 372, 791, 793, 794, 795, 792, 797, 60, 490, 491, 492, 489, 649, 488, 493, 829, 204, 450, 449, 451, 636, 452, 203, 662, 760, 666, 664, 663, 665, 763, 897, 766, 814, 772, 764, 928, 765, 767, 768, 770, 896, 769, 879],
                /* Спорт */[59, 208, 750, 229, 528, 206, 828, 205, 207, 210, 407, 817, 404, 209, 673]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++){
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            if (t.find('input[name="login_username"]').length) {
                view.auth(0, filename);
                return [];
            } else
                view.auth(1, filename);
            t = t.find('#main_content_wrap').children('#tor-tbl').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(5).children('a').attr('href') === undefined){
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(2).children('a').text(),
                        url: root_url + td.eq(2).children('a').attr('href'),
                        id: calculateCategory(td.eq(2).children('a').attr('href').replace(/.*f=([0-9]*)$/i, "$1"))
                    },
                    title: td.eq(3).children('a').text(),
                    url: root_url + td.eq(3).children('a').attr('href'),
                    size: td.eq(5).children('u').text(),
                    dl: root_url + td.eq(5).children('a').attr('href'),
                    seeds: td.eq(6).children('b').text(),
                    leechs: td.eq(7).children('b').text(),
                    time: td.eq(9).children('u').text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                url: url,
                cache: false,
                data: {
                    max: 1,
                    to: 1,
                    nm: text
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        login_url: login_url,
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib['free-torrents'] = function () {
    var name = 'FreeTorrents';
    var filename = 'free-torrents';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEACABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAQAEAAAAAAAAAAAAAAAEAAAAAAADhkBUAHLUAAB+4AAAhugAA/cgxAB22AAAlvgAA6J4cAOmfHQD4viwAKsMAACS9AAD8xzAA5JUYAOWXGQDnnBsA/MUwAOSXGAD8xjAAE6wAAOKSFgApwgAAM8wAADHKAAAvyAAAILkAAOOUFwDrpB8AFK0AAOKTFgDlmBkA/8wzAACZAADMZgAAAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIiIiIiIhISEhISIiIiIiIiIiIiIhAA8PISIiIiIiIiIiIiIhABAHISIiIiIiIiIiIiIhAAwPISIiIiIiIiIiIiIhAAQPISIiIiIiIiIiIiIhAAQPISIgICAgICIiIiIiIiEeHwchIiADAwUgIiIiIiIiIQ4fFCEiIAMWBSAiIiIiIiIhER8aISIgAxYBICIiIiIiIiENDx0hIiADGAEgIiIiIiIiISEhISEiIAIYASAiIiIiIiIiIiIiIAMYGSAiIiIiIiIiIiIiIAMYAiAiIiIiIiIiIiIiIAMYAyAiIiIiIiIiIiIiIAMDAyAiIiIiIiIiIiIiICAgICAiIiIiIvg/AADwfwAA4P8AAMH/AACD/wAABB8AAIIPAADBBwAA4IMAAPBBAAD4IAAA/8EAAP+DAAD/BwAA/g8AAPwfAAA%3D';
    var login_url = 'http://login.free-torrents.org/forum/login.php';
    var url = 'http://tr.free-torrents.org/forum/tracker.php';
    var root_url = 'http://tr.free-torrents.org/forum/';
    var about = 'Первый Свободный BitTorrent трекер Free-Torrents.org';
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[2, 33, 1610, 1619, 1552, 1609, 1304, 127],
                /* Музыка */[1741, 232, 178, 179, 741, 740, 755, 754, 766, 197, 218, 219, 1191, 1192, 908, 909, 1515, 1514, 901, 250, 249, 145, 146, 162, 161, 132, 133, 157, 156, 155, 154, 153, 152, 151, 150, 148, 147, 134, 173, 172, 167, 166, 165, 164, 163, 135, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181, 180, 738, 750, 749, 747, 748, 783, 746, 744, 745, 1200, 1201, 742, 743, 739, 897, 898, 760, 761, 758, 759, 756, 757, 139, 242, 233, 241, 240, 239, 238, 1805, 1721, 237, 236, 235, 234, 1190, 1196, 1195, 1194, 1193, 136, 931, 930, 929, 928, 927, 926, 212, 210, 208, 207, 206, 205, 204, 203, 201, 200, 199, 198, 138, 227, 226, 225, 224, 223, 222, 221, 140, 255, 254, 253, 251, 141, 798, 797, 796, 795, 1241, 793, 142, 779, 778, 777, 776, 775, 774, 773, 772, 771, 770, 769, 768, 767, 143, 922, 921, 920, 919, 918, 917, 916, 915, 914, 913, 912, 911, 1268, 1267, 910],
                /* Игры */[1618, 169, 258, 347, 346, 345, 344, 220, 231, 351, 350, 349, 348, 245, 356, 355, 354, 353, 352, 252, 360, 359, 358, 357, 256, 257, 364, 363, 259, 365, 260, 202, 374, 373, 372, 332, 331, 330, 321, 316, 313, 1454, 261, 343, 342, 341, 340, 339, 334, 1363, 381, 380, 262, 1611, 371, 370, 369, 368, 366, 1371, 1787, 1421, 1740, 941, 1763, 388, 1381, 1375, 1728, 1734, 1742, 424, 1379, 386, 387, 390, 391, 1383, 385, 384, 383, 1415, 1385, 379, 1430, 1427, 1429, 1428, 1426, 1561, 1549, 1434],
                /* Фильмы */[1603, 1604, 1605, 1782, 394, 1783, 1784, 1785, 1260, 457, 1250, 456, 455, 449, 453, 1743, 483, 1748, 491, 482, 486, 1248, 1828, 1823, 1824, 1825, 1826, 395, 1588, 463, 464, 1353, 1338, 1261, 402, 476, 475],
                /* Мультфтльмы */[396, 1252, 1585, 500, 498, 499, 496, 495, 497, 446, 509, 1548, 514, 515, 512, 517, 516, 513, 511, 510, 508, 506, 518, 504],
                /* Книги */[1015, 1030, 1029, 1028, 1027, 1026, 1025, 1024, 1023, 1022, 1021, 1020, 969, 992, 991, 1173, 1176, 990, 989, 1174, 988, 1175, 986, 985, 984, 983, 982, 536, 979, 978, 975, 974, 144, 904, 903, 902, 1792, 1797, 1800, 1801, 1791, 1789, 1794, 1790, 1795, 1798, 1796, 1793, 1802],
                /* ПО */[551, 1829, 1830, 1668, 1541, 561, 562, 1680, 560, 563, 559, 583, 600, 599, 598, 597, 596, 595, 594, 593, 590, 589, 588, 587, 586, 585, 584, 603, 1595, 1596, 1594, 1587, 613, 612, 611, 610, 609, 607, 606, 605, 604, 619, 625, 624, 623, 622, 1477, 621, 620, 628, 642, 641, 640, 639, 638, 637, 636, 635, 634, 633, 632, 631, 630, 629, 646, 659, 657, 656, 655, 654, 653, 651, 650, 649, 648, 647, 566, 574, 573, 572, 571, 570, 569, 568, 548, 554, 555, 556, 1593, 1599, 1598, 1597, 1818],
                /* Анимэ */[401, 530, 1341, 531, 529, 1543, 1542, 1546, 1545, 523],
                /* Док. и юмор */[801, 1681, 1720, 1678, 1677, 1676, 1675, 1674, 829, 826, 822, 820, 1804, 1718, 819, 818, 1719, 813, 810, 809, 807, 803, 834, 367, 1334, 853, 852, 849, 848, 846, 843, 842, 840, 839, 838, 837, 836, 835, 1503, 1764, 1648, 1504, 1505, 850, 1506, 1509, 1684, 1510, 1507, 1508, 935],
                /* Спорт */[859, 1589, 877, 876, 875, 874, 873, 872, 871, 870, 869, 868, 867, 866, 865, 864, 863, 862, 861, 860, 1471, 1701, 1245, 1724, 1722, 1723, 1707, 1706, 1705, 1704, 1726, 1703],
                /*xxx */ [1313, 1567, 1323, 1330, 1340, 1331, 1325, 1324, 1439, 444, 1440, 403, 1686, 1316, 1739, 1730, 1317, 1315, 1311, 1322, 1321, 1320, 1319, 1562, 1564, 1563, 1478, 1314, 1536, 1312, 1590, 1501]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            if (t.find('#register_link').length) {
                view.auth(0, filename);
                return [];
            }
            view.auth(1, filename);
            t = t.find('#main_content_wrap').children('#tor-tbl').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(5).children('a').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(2).children('a').text(),
                        url: root_url + td.eq(2).children('a').attr('href'),
                        id: calculateCategory(td.eq(2).children('a').attr('href').replace(/.*f=([0-9]*).*$/i, "$1"))
                    },
                    title: td.eq(3).children('a').text(),
                    url: td.eq(3).children('a').attr('href'),
                    size: td.eq(6).children('u').text(),
                    dl: td.eq(5).children('a').attr('href'),
                    seeds: td.eq(7).children('b').text(),
                    leechs: td.eq(8).children('b').text(),
                    time: td.eq(10).children('u').text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                mimeType: "text/plain; charset=windows-1251",
                url: url + '?nm=' + ex_kit.in_cp1251(text),
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                    view.auth(0, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        login_url: login_url,
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.piratbit = function () {
    var name = 'Piratbit';
    var filename = 'piratbit';
    var icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACf0lEQVR4nI2SW0gUYRTH//ON3+yszbQ7rutqu6WRj3ZRS0iQIozeIrAeJAqD8iGiICOIiJLAXpKoB4uIejHMZAoqCKR9atNIKizwEhWuPmRpq3tx19n55vt6CKWLt/N4Lj/O/5y/hBVEyNQIheIjkDcTkICBvMibusEoAEhLDQZNzZAh72WwD0ggVIHSQUGffKr7HpvrWRAQMnU/g91owz6mcHVUZLQWyt3hsYYR+9/evwBrTZ1KIPWzSF8SnECJh5qzY+s7JppfZJfVWWJ6C4Km9iDPlLLBTu/DotaqNXO13Oo7i0qVfg8boSysxxmkKzzcd82aCJz/dnzA0vdcL0x/2HhaZDxbJSKNEEm+J7gTYVMVYh5QYhpKFtbzDNK73FjVR7P6jmj9eMbfeMITMxuewSEQglhcWJsgHI0quVcEd1rYVKUDADkq3OUzSEYA1MiQu6L14xkAcCWLS7Tq8GHYNMomAxCxkM+O65ft7MwFVdUmGHDrTwkKB+9KI7XT4/hPsuTqThY3LD7tl10qq+YD2/tH2y/GaUGPwmaVbiHsIonQu6qL3p4/TrHp9XHw+ykka1WoXyjoVwe8kCYKwyNHPp8BgNxgX3k6Yb+E4G6qaGft2JZWMgeI1k3/lIW8z8t9R3O4a4gzmbBJ/81UT+05AFBLu0OzM2iD4KpMtTYunBtLvjW/af/8dsqG7hp4Xg9A752WPP1NsvGOLusLAFDKHvlJIHIVem8c+tswPB+3LeiD/5J57w0IdkgwcQrC+QGitgLiKRIV1qIAJX9IcpgoFYId5NzeDYkMESK3cyf7CsnKRa0sAYCxbpjYNqlKZ5xSITAoBBtGoiy1Epm/AGvkDrjq7XpKAAAAAElFTkSuQmCC';
    var url = 'http://piratbit.net/tracker.php';
    var root_url = 'http://piratbit.net';
    var about = 'Крупнейший русскоязычный торрент трекер. фильмы, dvdrip, hdrip, 720p, 1080p, repack, сериалы, mp3...';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[24, 767, 766, 764, 762, 763, 25, 1566, 1511, 1510, 1427, 1415, 1413, 1412, 1411, 1410, 1242, 1243, 1232, 777, 773, 776, 775, 778],
                /* Музыка */[1342, 1341, 887, 888, 936, 957, 956, 955, 954, 953, 951, 950, 949, 944, 988, 1000, 999, 998, 997, 1036, 1037, 1192, 1191, 1175, 1178, 1169, 1201, 1187, 1157, 1173, 1159, 1163, 1166, 1156, 1042, 1048, 1565, 1021, 1562, 1019, 1647, 1068, 1069, 1537, 1085, 1083, 1082, 1081, 1080, 1078, 1077, 1076, 1073, 1072, 1070, 1086, 1538, 1105, 1104, 1101, 1100, 1099, 1098, 1097, 1096, 1094, 1095, 1093, 1092, 1091, 1090, 1089, 1087, 1106, 1121, 1120, 1119, 1118, 1117, 1115, 1114, 1113, 1112, 1111, 1110, 1109, 1108, 1107, 1122, 1541, 1131, 1130, 1129, 1544, 1128, 1127, 1126, 1125, 1124, 1123, 1132, 1139, 1138, 1137, 1136, 1135, 1134, 1133, 1140, 1154, 1153, 1152, 1151, 1150, 1149, 1148, 1147, 1146, 1145, 1144, 1143, 1142, 1141, 668],
                /* Игры */[1612, 1257, 206, 1263, 1264, 1265, 1266, 1267, 1268, 203, 1321, 200, 1274, 1271, 1275, 1273, 1272, 202, 195, 194, 1542, 192, 1253, 1443, 1330, 1329, 1328, 1327, 1333, 1486, 50, 1363, 1420, 1364, 1323, 49, 1366, 1365, 1368, 1367, 1246, 1245, 1244, 51, 672, 645, 649],
                /* Фильмы */[1569, 1570, 1418, 1419, 1280, 5, 6, 7, 8, 4, 171, 1422, 84, 1394, 9, 1583, 1582, 12, 10, 11, 13, 1560, 17, 16, 1627, 14, 15, 1626, 1567, 138, 139, 115, 114, 366, 671, 670, 669, 80, 392, 389, 388, 382, 368],
                /* Мультфтльмы */[19, 1614, 22, 21, 168, 1613, 20, 1424, 1269, 1423, 1270],
                /* Книги */[1407, 1331, 1234, 1233, 1239, 1237, 1236, 1235, 1240, 677, 728, 737, 718, 722, 708, 723, 754, 1326, 788, 801, 800, 799, 798, 797, 814, 795, 794, 816, 793, 796, 791, 792, 675],
                /* ПО */[181, 519, 532, 531, 530, 529, 528, 527, 526, 525, 524, 521, 520, 52, 538, 537, 536, 535, 534, 54, 544, 543, 542, 541, 540, 539, 55, 565, 563, 562, 561, 560, 559, 558, 557, 556, 555, 554, 553, 552, 551, 550, 549, 548, 547, 546, 545, 56, 577, 576, 575, 574, 573, 572, 571, 570, 569, 568, 567, 566, 578, 587, 586, 585, 584, 583, 582, 581, 580, 579, 588, 604, 603, 602, 601, 600, 599, 598, 597, 596, 595, 594, 593, 592, 591, 590, 589, 605, 624, 623, 621, 619, 617, 616, 615, 614, 610, 609, 608, 607, 606, 655, 667, 666, 665, 664, 663, 662, 661, 660, 659, 658, 1561, 169, 673, 646, 647, 650],
                /* Анимэ */[286, 1372, 290, 269, 289, 288, 287],
                /* Док. и юмор */[1390, 79, 359, 348, 345, 342, 363, 361, 362, 818, 1362, 1361],
                /* Спорт */[81, 414, 413, 408, 412, 406, 405, 404, 403, 399, 396, 395, 394, 82, 1631, 1630, 428, 427, 424, 426, 425, 423, 422, 421, 420, 419, 418, 417, 416, 431, 443, 440, 439, 438, 437, 436, 435, 434, 433, 432],
                /* XXX */[1615, 1616, 1617, 1618, 1478, 1492, 1292, 1426, 250, 294, 271, 251, 1515, 1349, 248, 249, 252, 253, 1289, 1324, 299, 246, 1359, 255, 275, 1568, 261, 264, 265, 263, 262, 1358, 257, 260, 259, 266, 267, 256, 1347, 247]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('#tor-tbl').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(3).children('div').children('a').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(1).children('a').text(),
                        url: root_url + td.eq(1).children('a').attr('href'),
                        id: calculateCategory(td.eq(1).children('a').attr('href').replace(/.*f=([0-9]*)$/i, "$1"))
                    },
                    title: td.eq(2).children('a').text(),
                    url: root_url + td.eq(2).children('a').attr('href'),
                    size: td.eq(3).children('u').text(),
                    dl: root_url + td.eq(3).children('div').children('a').attr('href'),
                    seeds: td.eq(4).children('b').text(),
                    leechs: td.eq(5).children('b').text(),
                    time: td.eq(7).children('u').text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                url: url,
                cache: false,
                data: {
                    max: 1,
                    to: 1,
                    ss: text
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.torrentz = function () {
    var name = 'Torrentz';
    var filename = 'torrentz';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZZjMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8IAAA/DcAAPw7AAD8PQAA/CAAAPw/AAD8PwAA/D8AAPw/AAD8PwAA/D8AAPw/AAB8PgAAAAAAAAAAAACAAQAA';
    var url = 'http://torrentz.eu/search';
    var root_url = 'http://torrentz.eu';
    var about = 'Torrent Search Engine';
    var flags = {
        a: 0,
        l: 0,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            return ((/xxx|porn/i).test(f)) ? 10 :
                    ((/anime/i).test(f)) ? 7 :
                        ((/audio|music/i).test(f)) ? 1 :
                                ((/game/i).test(f)) ? 2 :
                                    ((/video|movies|film/i).test(f)) ? 3 :
                                                ((/comics|books/i).test(f)) ? 5 :
                                                        ((/applications|apps/i).test(f)) ? 6 :
                                                                ((/tv/i).test(f)) ? 0 :
                                                                    -1;
        };
        var calculateTime = function (t) {
            if ((/today/).test(t)) {
                return Math.round((new Date().getTime() / 1000) / (60 * 60 * 24)) * (60 * 60 * 24);
            } else if ((/yesterday/).test(t)) {
                return (Math.round((new Date().getTime() / 1000) / (60 * 60 * 24)) * (60 * 60 * 24)) - (60 * 60 * 24);
            } else {
                var time = parseInt(t.replace(/([0-9]*).*/, '$1'));
                var nowTime = Math.round(new Date().getTime() / 1000);
                if ((/second/).test(t)) {
                    return nowTime - time;
                } else if ((/minute/).test(t)) {
                    return nowTime - time * 60;
                } else if ((/hour/).test(t)) {
                    return nowTime - time * 60 * 60;
                } else if ((/day/).test(t)) {
                    return nowTime - time * 60 * 60 * 24;
                } else if ((/week/).test(t)) {
                    return nowTime - time * 60 * 60 * 24 * 7;
                } else if ((/month/).test(t)) {
                    return nowTime - time * 60 * 60 * 24 * 30;
                } else if ((/year/).test(t)) {
                    return nowTime - time * 60 * 60 * 24 * 365;
                }
            }
            return 0;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('dl').parent('div.results').children('dl');
            var l = t.length;
            var arr = new  Array(l - 1);
            for (var i = 0; i < l - 1; i++) {
                var dl = t.eq(i);
                var title = dl.children('dt').children('a').text();
                var url = dl.children('dt').children('a').attr('href');
                dl.children('dt').children('a').remove();
                var cat = $.trim($.trim(dl.children('dt').text()).substr(1));
                arr[i] = {
                    category: {
                        title: cat,
                        id: calculateCategory(cat)
                    },
                    title: title,
                    url: root_url + url,
                    size: ex_kit.format_size(dl.children('dd').children('span.s').text()),
                    seeds: dl.children('dd').children('span.u').text().replace(',', ''),
                    leechs: dl.children('dd').children('span.d').text().replace(',', ''),
                    time: calculateTime($.trim(dl.children('dd').children('span.a').text()))
                }
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url,
                cache: false,
                data: {
                    f: text
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 1, 0, 0, 1, 0, 0, 0]
    }
}();torrent_lib.hdclub = function () {
    var name = 'HDclub';
    var filename = 'hdclub';
    var icon = 'data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAUVJREFUeNrMkiGuwkAQhmemG8Jms0kNFwASgsKBQDUoHIIgCIobcIAqFJyhEsVBCBrTpAlbQZFtWrEJCWH7xJIHogKeemNGzM43/84/SETwTXz3+i8NzCZjzLs2Y0wFmwgA0CYhhNb6hWGMMYaInPOyLAEgz/PH4/GENhqN4/HY6XR+McvlcrfbBUGQJMnlcrler2EYjsfjp6Tb7dZqtSzJinFdt9lsLhaLIAjKsnQcZz6f7/f7Xq/Hut2u7/tCiO12m6YpIt7vdyml1loppZSyIg+Hw2Qy8Tzv0y1xzjnnWmsEACmlUmo4HEZRZMur1Wo6nW42m3a7DQCO48xmM9d1B4MBA4B6vX4+nxHRftoYUxRFHMf9fn80GhljEPF0Oq3X6yzLgIiISEpJb1Gr1YQQlVY8fag0jojs6gDAzn8Z95+O72cAOFB9xrFOW3UAAAAASUVORK5CYII%3D';
    var url = 'http://tracker.hdclub.com.ua/browse.php';
    var root_url = 'http://tracker.hdclub.com.ua/';
    var about = 'Трекер HDClub - скачать бесплатно фильмы HD, скачать Blu-ray фильмы, HD DVD и HD audio, HDTV торрент';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            if (f === "Animation")
                return 4;
            if (f === "Movie")
                return 3;
            if (f === "HD Audio" || f === "Music Video")
                return 1;
            if (f === "Documentary" || f === "TV Show")
                return 8;
            if (f === "Sport")
                return 9;
            return -1;
        };
        var calculateTime = function (f) {
            var dd = f.replace(/[\t:-]/g, ' ').split(' ');
            return Math.round((new Date(parseInt(dd[0]), parseInt(dd[1]) - 1, parseInt(dd[2]), parseInt(dd[3]), parseInt(dd[4]))).getTime() / 1000);
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('td.outer').children('table.embedded').children('tbody#highlighted').children('tr');
            var l = t.length;
            var arr = new Array(l);
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                td.eq(6).children().children().remove();
                arr[i] = {
                    category: {
                        title: td.eq(0).find('img').attr('alt') + ', ' + td.eq(1).find('img').attr('alt'),
                        url: root_url + td.eq(0).children('a').attr('href'),
                        id: calculateCategory(td.eq(1).find('img').attr('alt'))
                    },
                    title: td.eq(2).children('table').find('a').eq(0).text(),
                    url: root_url + td.eq(2).children('table').find('a').eq(0).attr('href'),
                    size: ex_kit.format_size(td.eq(6).text()),
                    seeds: td.eq(4).text(),
                    leechs: td.eq(5).text(),
                    time: calculateTime(td.eq(2).children('div').children('div').eq(0).text())
                }
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url + '?search=' + ex_kit.in_cp1251(text),
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 1, 0, 0, 0]
    }
}();torrent_lib.piratca = function () {
    var name = 'Piratca';
    var filename = 'piratca';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEACABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAgQGAAQFBgAAAQgABQcKAAYJDgAEBRcACQsQAA8PEwABARsAAwUcAAULGQAHDBgABgkdAA0RFgALEBwAEhgeAAkOLQAMFSIADBsnABIbJwAUGycAEh4sAAgHOAAMET8AEiExABsnMAAQIT4AFys6ABgqOgAbKjwAJSsyACYuPgAoMj0ABwdPABQeRgAHB1MAGCdFABcvSgAcMUIAFzFOABowSQAcMUoAGjFPAB4yTQAeM1sAHj9cACEsQgAgMEMAITlPADA9SwArPlEAIDpZAAkJYQAKD2YACw1sABkcZQAJDXEAHB57ACA9cAAvRFUAJURZAClCWwA2R1EAMkdaACZEYAApSGcALkhlACZGbQA7WG0AL1R9ADJWeQA0Wn0AQUZPAEBKVABQXWkAVl5rAFtiZABUZWsAQWB+AFppdgBSbX8AZWhwAHJzcQAMEIUAExyLAA4XmwAkNIUACw6lAAwapQARF6EAExupAAYZuQAZIa0AFyKyACQtrgAxWosAPUuTADFTlgA/apAAOFyuAExQmABKbYQAUm+AAFhqggBfZ4gAWWCcAEhzkQBReJ8AVH6eAEBwqABFcbYASH+wAEt5vwBOfrwAVmrFAF2AnAB5iJIAToGvAFyEoQBMg7MAWYywAHONpQBhkLkAZZe/AGufwQB8td8AgJKqAJKYoACRn60AhqK8AIGXzgCEo8QAiqvCAIu+ygCesMcAnrTLAIq/3ACfxNYAr9/qALLp9QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8AAAAAAAAAcGMrSwAAAAAAAAAAAAAAdkISBxRQAAAAAAAAAABNdEIyMx4HHisAAAAAAAAAZz9Oimw0MAQcAAAAAAAAABAAe3tPFhkADQAAAAAAAC9FQUQrDhQFDRs4AAAAAAB6hnd+fRoND0JHJQAAAAAAh0AAPnlmBAAAK0kAAAAAAH+BUT5GSCcTMStLAAAAAACIi4yJeG5gJi4oPAAAAAAAal5dXVY5NhcKBhEAAAAAADpYc4NcWVU3NiIKAAAAAABXWl9hXFlVNzYkEQAAAAAAhWRbVFxZVTc2GCAAAAAAAACEcnJvYjstIx8AAAAAAAAAAACCbGs9IQAAAAAAAPw/AAD4HwAA4A8AAOAPAADgDwAAwAcAAMAHAADABwAAwAcAAMAHAADABwAAwAcAAMAHAADABwAA4A8AAPg/AAA%3D';
    var login_url = 'http://pirat.ca/login.php';
    var url = 'http://pirat.ca/tracker.php';
    var root_url = 'http://pirat.ca/';
    var about = 'Pirat.ca :: Скачать торрент бесплатно';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[2385, 24, 2462, 1799, 2341, 998, 888, 1504, 1492, 1491, 1493, 1494, 1500, 2339, 1495, 1497, 2338, 1502, 1503, 2079, 999, 1506, 26, 2463, 1800, 2053, 2054, 2055, 2057, 2056, 2058, 1723],
                /* Музыка */[1880, 2473, 2070, 1896, 1893, 1892, 1891, 1929, 1883, 2474, 2444, 2063, 1905, 1899, 1898, 1897, 1881, 2475, 2071, 1904, 1902, 1903, 1901, 1906, 2476, 2379, 2378, 2336, 2477, 1849, 2478, 1937, 1936, 1935, 1934, 1933, 1928, 1927, 1926, 1921, 1920, 1919, 1918, 1917, 1916, 1915, 1850, 2479, 1945, 1944, 1943, 1942, 1941, 1940, 1939, 1938, 1851, 2480, 1949, 1948, 1947, 1946, 1852, 2481, 1954, 1953, 1952, 1951, 1950, 1854, 2482, 1958, 1957, 1956, 1955, 1855, 2483, 1967, 1965, 1964, 1963, 1962, 1961, 1960, 1959, 2182, 1856, 2484, 1973, 1971, 1970, 2485, 1857, 2487, 1976, 1975, 1974, 1858, 2488, 1980, 1979, 1978, 1859, 2489, 1983, 1982, 1981, 1860, 2490, 1989, 1985, 1861, 2491, 1868, 2492, 1876, 1875, 1874, 1873, 1872, 1871, 1870, 1869, 1879, 2493, 1884, 2494, 1886, 1885, 1887, 2495, 1888, 2496, 1889, 2497, 1890, 2498, 1895, 2499, 1863, 2500, 1864, 2501, 1865, 2502, 2011, 1866, 2503],
                /* Игры */[618, 2321, 2538, 2322, 2323, 2324, 2326, 2327, 2325, 2328, 2330, 2329, 2331, 2332, 2333, 2305, 2539, 370, 2540, 371, 372, 632, 631, 373, 2541, 374, 2542, 375, 376, 377, 981, 379, 2543, 380, 2544, 384, 383, 382, 505, 386, 2545, 387, 2546, 390, 391, 2547, 392, 2548, 1783, 2549, 1784, 1787, 1786, 1785, 1788, 1271, 2550, 499, 2551, 2352, 389, 395, 706, 708, 394, 707, 1810, 393, 1778, 1793, 1794, 1809, 1791, 1792, 1811, 2552, 1815, 1820, 2304, 1816, 1817, 1818, 1819, 1812, 2553, 1834, 1833, 1832, 1831, 2291, 1830, 1829, 2265, 2267, 2268, 1813, 2554, 1841, 1840, 1839, 1814, 2555],
                /* Фильмы */[2307, 2451, 2387, 2389, 2390, 2391, 2388, 123, 133, 1765, 2589, 1766, 2, 2564, 2459, 1458, 1457, 1456, 2034, 2035, 20, 2565, 190, 21, 23, 2036, 2037, 2433, 2566, 2445, 2567, 2450, 2449, 2448, 2447, 2446, 1459, 2569, 1462, 1461, 1460, 2039, 2038, 2580, 2582, 2583, 2587, 964, 2568, 965, 966, 967, 2574, 978, 979, 976],
                /* Мультфтльмы */[2386, 2584, 2573, 38, 2469, 546, 483, 41, 1440, 40, 1441, 1437, 2470, 2440, 2442, 2441, 704, 1668, 1669, 1439, 1670, 1671],
                /* Книги */[798, 2527, 800, 799, 802, 1356, 1359, 1513, 801, 1358, 1355, 1357, 803, 243, 2528, 158, 1361, 1362, 1363, 1797, 1672, 1368, 2529, 1370, 1369, 1373, 2530, 1377, 1375, 1383, 1386, 1374, 1364, 2531, 1366, 1365, 2438, 2437, 75, 2532, 1379, 1528, 1845, 1385, 1380, 1381, 2425, 1382, 1726, 2426, 2533, 1120, 1124, 1123, 1122, 1121, 2432, 2535, 728, 746, 2016, 2512, 216, 2404, 2278, 672, 2405, 2279, 218, 2406, 220, 211, 2407, 492, 2408, 2409, 2410, 2411, 2508, 2513, 2510, 2509],
                /* ПО */[498, 2556, 311, 312, 313, 415, 414, 318, 319, 321, 322, 323, 324, 302, 2557, 316, 333, 317, 332, 331, 330, 329, 328, 327, 326, 325, 2131, 304, 2558, 412, 411, 410, 409, 408, 305, 2559, 424, 423, 422, 315, 314, 682, 421, 420, 419, 418, 417, 416, 413, 2577, 306, 2560, 480, 2133, 479, 478, 2132, 477, 2134, 303, 2561, 2401, 2398, 2380, 1107, 702, 703, 336, 335, 2396, 2255, 683, 2562, 694, 691, 687, 685, 1847, 1846, 684, 1843, 1842, 720, 2563, 977, 724, 725, 726, 729, 727, 2081, 1634, 1557, 1635, 1636, 1538, 1637, 1555, 1639, 1539, 1620, 1621, 2099, 2192, 1623, 1624, 1619, 2191, 1663, 2505, 1702, 1701, 2290, 1700, 1699, 1698, 1697, 1696, 1695, 2399, 1653, 1665, 2506, 2504, 2507, 1654],
                /* Анимэ */[926, 927, 928, 929, 946, 948, 949, 947, 2072, 2073, 2074, 2075, 2076, 938, 939, 941, 993, 990],
                /* Док. и юмор */[2585, 2402, 28, 2468, 2345, 2434, 2346, 29, 30, 31, 2348, 2351, 142, 2347, 2301, 2296, 705, 1713, 2299, 2302, 2350, 35, 37, 2297, 36, 2349, 2298, 2193, 355, 2464, 1448, 1449, 356, 358, 357, 2111, 2110, 2108, 2306, 2109, 785, 2135],
                /* Спорт */[2586, 42, 2471, 54, 1465, 2313, 53, 52, 51, 2308, 50, 49, 48, 47, 2311, 46, 45, 1512, 922, 44, 2457],
                /* xxx */[132, 2516, 2051, 854, 853, 2015, 851, 626, 1666, 2524, 2526, 852, 2514, 2521, 1376, 855, 2575]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            if (t.find('input[name="login_username"]').length) {
                view.auth(0, filename);
                return [];
            } else
                view.auth(1, filename);
            t = t.find('#main_content').find('#tor-tbl').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(4).children('div').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(1).children('a').text(),
                        url: root_url + td.eq(1).children('a').attr('href'),
                        id: calculateCategory(td.eq(1).children('a').attr('href').replace(/.*f=([0-9]*).*$/i, "$1"))
                    },
                    title: td.eq(2).children('a').text(),
                    url: root_url + td.eq(2).children('a').attr('href'),
                    size: td.eq(4).children('u').text(),
                    dl: root_url + td.eq(4).children('div').attr('href'),
                    seeds: td.eq(5).children('b.seedmed').text(),
                    leechs: td.eq(5).children('b.leechmed').text(),
                    time: td.eq(6).children('u').text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                url: url,
                cache: false,
                data: {
                    max: 1,
                    to: 1,
                    nm: text
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        };
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        login_url: login_url,
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    };
}();torrent_lib.underverse = function () {
    var name = 'Underverse';
    var filename = 'underverse';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAEMD1saDA9iSAsPVmQICjx9BQgxiRYWN4FISUtpYV5YUEdFQjIODQwOAAAAAgAAAAAAAAAAAAAAAgAAAAYAAAARAAAAKAsLOIAhIYrhQkDK+1RS0/2imbH3mpKO6GdiYK4EBARFAAAAIgAAAA0AAAAEAAAAAQAAAAIAAAAIAAAAGx0eo5U8PN76SUrl/k9S7P9jZfP/iov2/+/t+P//+ff/6N/c73Ruam8AAAAnAAAADgAAAAIAAAACAAAABygqwoRFRuP3Nzni/yks5/9HSvH/T1P0/1FX9v9aX/f/4934//759v7u4971WVNShQAAACEAAAACAAAAASIkmixCROTvJCbc/hof4P8wNer/QUbu/zI57v8uNe//Lzbw/zU+8v/o4/P//O/p/ZCKiu8lJCRnAAAABAAAAAQvM9CQJSfd/Rof2/8eJOD/KzHm/ygv5/8aIuf/Exvo/xQe6f8wOev/7ubu//fn4f96d3j7Z19f1gMDAxUAAAAKJine2B0j2/4fJdz/GiHe/xoj4v8aJOL/GiLi/xgg4v9DS+T/1tHl//Hm4f+ompX/MTE1/VBQVfI1NTU3AgVMFiUt4OofJ9z/GSHb/xQb2/8pMt7/KzTe/zhA3v+Ymt//3dvd/9fRzf+MhoP/QkJF/zMzOP5HR073cXByVAECHhE7QuPfISnd/hEa2v80PN3/QEje/3R42//Ozdn/u7u7/4mIiP5eXl7/WVla/1tbXv5QUFT9TExT8ZOTlUoAAAAIUVfhshsm3vwTHt7+a3Lg/7Kw3P/BvLr/jo2N/nNzc/5wcG/9bm5u/nBwcf50dHf9eHh89l1dY9aqqastAAAAAnd72Vs6ReftISve/drU3v6sqaf/lZWV/pCQkPyMjIv7iYmJ/YiIif6Li4z+j4+S9pOTluORkZaUl5eZEAAAAABcX4MOmaP4xoGC6Pnl3tT+rq6u/K2trP2pqan8pqam/6SkpP+lpaX+qKip/aqqq/OurrGprayvLwAAAAAAAAAAAAAAAdHR82nEy/vc+/fw+NHR0vXGxsb1wcHB9cDAwPfBwcH4w8PD9sTExfLExMWrsbGzL3Z2eAkAAAAAAAAAAAAAAAEAAAAB6ejvZfv6/MH+/f3c6uvs4uDg4OLd3d3h3Nzc2Nvb3M7d3d2a1tbWNIODhgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALRzckj/fz8lf/+/sT+/v7A/Pz8pfb29oj09PVezMvMJ42NjgwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoaGhAdDQ0AEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/n8AAPAfAADgDwAAwAMAAMADAACAAQAAgAEAAIABAACAAQAAgAEAAMABAADAAwAA4AcAAPAPAAD4P////////w%3D%3D';
    var url = 'http://underverse.su/tracker.php';
    var root_url = 'http://underverse.su/';
    var about = 'Торрент трекер Underverse.su - У нас можно скачать бесплатно фильмы, сериалы, музыку mp3 и lossless, игры, книги, софт, доступно скачивание торрентов без регистрации.';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[6, 38, 39, 628, 747, 749],
                /* Музыка */[536, 545, 546, 541, 542, 748, 145, 146, 147, 148, 149, 150, 151, 152, 154, 155, 156, 157, 969, 820, 646, 158, 159, 160, 822, 647, 161, 163, 165, 166, 168, 169, 179, 170, 172, 173, 171, 175, 182, 177, 180, 181, 183, 185, 187, 186, 174, 176, 178, 167, 184, 188, 189, 190, 192, 193, 194, 195, 196, 197, 198, 199, 201, 202, 203, 204, 205, 206, 207, 208, 209, 211, 212, 213, 214, 215, 216, 218, 219, 220, 221, 223, 224, 694, 225, 222, 227, 228, 229, 230, 231, 232, 233, 234, 236, 237, 239, 240, 241, 242, 243, 244, 245, 247, 248, 706, 249, 250, 252, 253, 255, 254, 256, 257, 258, 260, 261, 262, 263, 821, 648, 265, 266, 823, 649, 267, 264, 269, 270, 272, 273, 274, 281, 275, 277, 278, 276, 279, 284, 280, 282, 283, 285, 286, 287, 288, 289, 290, 291, 292, 294, 295, 296, 297, 298, 299, 300, 301, 303, 304, 305, 306, 307, 308, 309, 310, 312, 313, 314, 315, 316, 317, 318, 320, 321, 322, 323, 324, 325, 326, 327, 328, 330, 331, 332, 333, 334, 335, 336, 337, 339, 340, 341, 343, 731, 344, 345, 346, 347, 348, 350, 351, 352, 726, 754, 755, 756, 757, 758, 759, 760, 761, 762, 763, 764],
                /* Игры */[356, 357, 358, 736, 360, 361, 363, 364, 365, 367, 368, 369, 370, 372, 373, 374, 375, 376, 734, 650, 652, 735, 733, 651, 381, 383, 387, 385, 388, 392, 396, 398, 537, 548, 549, 727],
                /* Фильмы */[15, 2, 704, 16, 17, 18, 19, 3, 23, 24, 25, 4, 29, 30, 31, 32, 34, 35, 5, 378, 379, 380, 382, 386, 97, 98, 99, 100, 125, 109, 103, 104, 105, 106, 126, 110, 118, 119, 128, 120, 121, 122, 129, 743, 744, 745, 746, 751, 752],
                /* Мультфтльмы */[33, 7, 738, 41, 739, 42, 44, 43, 740],
                /* Книги */[629, 630, 631, 632, 633, 539, 554, 555, 556, 557, 625, 563, 564, 565, 566, 567, 846, 569, 570, 571, 572, 955, 795, 574, 573, 575, 577, 678, 673, 674, 675, 676, 677, 679, 680, 578, 682, 568, 683, 684, 685, 686, 687, 688, 689, 690, 691, 692, 952, 725, 766, 767, 768, 769],
                /* ПО */[538, 551, 552, 436, 437, 438, 439, 968, 440, 441, 443, 444, 655, 445, 446, 448, 449, 450, 451, 452, 453, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 480, 481, 482, 483, 484, 485, 802, 803, 804, 805, 487, 488, 489, 490, 491, 492, 508, 509, 510, 511, 512, 513, 514, 515, 516, 517, 518, 519, 520, 521, 522, 523, 524, 525, 526, 527, 528, 530, 580, 583, 585, 586, 618, 582, 587, 532, 534],
                /* Анимэ */[8, 48, 623, 775, 50, 785, 776, 49, 786, 779, 53, 777, 55, 699, 783, 784, 54, 778, 51, 700, 781],
                /* Док. и юмор */[9, 58, 59, 60, 61, 62, 63, 64, 65, 66, 75, 11, 78, 81, 79, 80, 82, 83, 111, 112, 113, 114, 127, 115, 750],
                /* Спорт */[10, 69, 943, 742, 70, 71, 964, 72, 73, 702, 74, 671, 836, 837, 838],
                /* XXX */[52, 695, 782]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++){
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('#main_content_wrap').children('#tor-tbl').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(5).children('a').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(2).children('a').text(),
                        url: root_url + td.eq(2).children('a').attr('href'),
                        id: calculateCategory(td.eq(2).children('a').attr('href').replace(/.*f=([0-9]*).*$/i, "$1"))
                    },
                    title: td.eq(3).children('a').eq(1).text(),
                    url: root_url + td.eq(3).children('a').eq(1).attr('href'),
                    size: td.eq(6).children('u').text(),
                    dl: td.eq(5).children('a').eq(1).attr('href'),
                    seeds: td.eq(7).children('b').text(),
                    leechs: td.eq(8).children('b').text(),
                    time: td.eq(10).children('u').text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url + '?nm=' + ex_kit.in_cp1251(text),
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.hurtom = function () {
    var name = 'Hurtom';
    var filename = 'hurtom';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AMHta2jB8WtonglTaJIVS2iSCU9ole1TaSIxywP3+/SX9/v0lQ5JywCSAV9oqglXaLIBU2il+VNoogFraKIBa2rjSxme508dnP4df0w5oNf9UlHC9tdLEZMDXzlz9/v4p/f7+Kb7Zzly01MRkV5Z0vRNoO/9Bh2LUtdTFabXUxWn9/v0S/f79KFOTcsIOZzn/cqaLof7+/CH+/v0R/v7+Ef7+/hH+/v0R/v78IXWpj6EPaT7/T5Fwwvz+/Cr9/v0T////AP3+/iRSk3LCDmg8/3Knjaf7/v0k////AP///wD///8A////APz+/SJ1qpGmDWg8/0yOb8T8/v4q////AP///wD9/v4jVZJywRNnOv90p42s+f7+K////wD///8A////AP///wD7/v0mdaeNqBJmOv9Qjm7F+/7+Lf///wD///8A/v39IlKUccEPajn/cqiLp/z+/SX9/v0F/f79B/3+/Qf9/f0F/v39HnOojaEQbDz/U5VzxPz9/Sn///8A////AP39/iVKlHLCAmo7/2yojaH+/v0o/f79Kfv+/DP8/v0y/f39Kf79/Shvp42hCGk9/0yScsH+/f4i////AP///wD+/vwiTpVowQ1wMv8Pajj/EGE+/xhlQv8YZUD/F2Q//wpnP/8CZj3/AHA5/wB0M/9Gl2nG+v78Mf///wD///8A/f79JU+TbsINbTn/ZaKCuNfn4Ffa5+FQ2+fhTdvn4U3Y6OFP1+jgUGCfgLQIaTj/TZJvwvz+/Sj///8A////APz9/ipJkXHEBWk+/26pkKX8/f0l/f79Dv3+/Qz9/v0M/f79Dv39/SNxqJGkCWtC/06VeML8/f4o////AP///wD9/f0mVJFxwhBmOf9zpYuh/v39HP///wD///8A////AP///wD+/f0cc6aNoQxnO/9QkXLC/f39Jf///wD///8A/f79I1eTb8IVaDj/eKiLo/3+/R7///8A////AP///wD///8A/v79HHKmiqENZjf/UJBuwv3+/SX///8A/v79Cv3+/SZPkm/CD2s6/3Sqjqb8/v0m/f3+DP79/gr9/f0K/f7+DP3+/SJwpo2kCmg8/1CUdMX7/v0v/f79D9vn4Ubb5+FIR4tmyQ5oN/9jn4C11ujiU97r5kb+/v0o/v39KN/r5kXY5+JPYp2BtAtnOP9Fi2jO1ujhVdbo4lIVZz3/FWc9/wZyL/8Adyv/AHEz/wNoP/8sfFzg/v77KP7++ygsfFzgB2Q//wtsNv8Ocy//CXAz/wBrQP8BbEH///8AAAGAAADH4wAAx+MAAMfjAADH4wAAx+MAAMfjAADAAwAAx+MAAMfjAADH4wAAx+MAAMfjAADH4wAAAYAAAA%3D%3D';
    var url = 'http://toloka.hurtom.com/tracker.php';
    var root_url = 'http://toloka.hurtom.com/';
    var about = 'Об\'єднаймо все українське гуртом! Завантажити або скачати фільми і мультфільми українською, HD, українську музику, літературу, ігри та українізації';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 1,
        l: 0,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[125, 124, 32, 44, 192, 195],
                /* Музыка */[8, 23, 24, 43, 35, 37, 36, 38, 56, 98, 100, 101, 102, 103, 104, 105, 106],
                /* Игры */[10, 28, 29, 30, 41, 212, 205],
                /* Фильмы */[117, 42, 129, 219, 118, 16, 19, 55, 94, 144, 190, 70, 193, 194, 196, 197, 119, 18, 132],
                /* Мультфтльмы */[84],
                /* Книги */[11, 134, 177, 178, 179, 180, 183, 181, 182, 184, 185, 135, 186, 187, 189],
                /* ПО */[9, 25, 199, 203, 204, 200, 201, 202, 26, 234, 27, 122, 211, 40, 12],
                /* Анимэ */[127],
                /* Док. и юмор */[225, 21, 131, 226, 227, 228, 229, 230, 136, 96, 173, 139, 174, 140, 120, 66, 137, 138, 33],
                /* Спорт */[157, 235, 170, 162, 166, 167, 168, 169, 54, 158, 159, 160, 161]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var calculateTime = function (f) {
            var dd = f.split('-');
            return Math.round((new Date(parseInt(dd[0]), parseInt(dd[1]) - 1, parseInt(dd[2]))).getTime() / 1000);
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('table.forumline').eq(1).children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 1; i < l - 1; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(5).children('a').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(1).children('a').text(),
                        url: root_url + td.eq(1).children('a').attr('href'),
                        id: calculateCategory(td.eq(1).children('a').attr('href').replace(/.*f=([0-9]*)$/i, "$1"))
                    },
                    title: td.eq(2).children('a').text(),
                    url: root_url + td.eq(2).children('a').attr('href'),
                    size: ex_kit.format_size(td.eq(6).text()),
                    dl: root_url + td.eq(5).children('a').attr('href'),
                    seeds: td.eq(9).text(),
                    leechs: td.eq(10).text(),
                    time: calculateTime(td.eq(12).text())
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                url: url,
                cache: false,
                data: {
                    f: -1,
                    tm: -1,
                    sns: -1,
                    sds: -1,
                    my: 0,
                    sd: 0,
                    n: 0,
                    nm: text
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib['x-torrents'] = function () {
    var name = 'X-torrents';
    var filename = 'x-torrents';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAGABoAwAAFgAAACgAAAAQAAAAIAAAAAEAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABHRztBQUFDQFBNSGNRQ2dNRltAQ0dASEFDSUhST19VR2teSnlSTlNRU01XYVBaaU42MEE4N0AuNTIpNCoqNTNESVhKS21IRXJOS3lKTmczPjw2RjVKT0ZKTklLUE9HSk4qNyEoNC49RFNZXXleWqFraJ9dXoBGSGBeXX1tbJZmZpxVVpNLT2hCRlFLT0pRVkddXoB3dKZuaa5eWKdbYX5BRFNDQUFLST87OTFERFJfXoZmZZ1xc6mDgqp3cYhZUl9EQ4NZUqdRR6RWT6pdU6YnNyxJTFBHQE1IQjcgLDJVVKpYVq9RWZVnX75TS5hHXkgiJSlfS7V5ZvNlYNlvaut4bsswNThHREApKzVyY9xwY+dwZ9Z2ZP1lWrtDSVBZVWAxLCMbHixPR6xwWP9cW/dYSOlzZc4hLDBfX8NcUfNjWexyV/9jXL07S0pXXFNcV1Q9PT0uOSkcIzJUTodJRt9QRfVDOOhSUeM+PetDRu5RT+VjX8hDRE5YZFJNVlNLUVw6PDY+QjctKTUoLCE9P41ANOo0NuIzKfEtMPBEOvhVR7FGTi9TT1tQVFVXXllCTkg5Py48O0UmLCsqMitMULk/M/84Nu07M+s1OO5AQOpgYMpIUmNIT0hUX09LU0xQVFk0NjcpNyUsOUF/c9NUUeJAR9JMPfI7PqBJQdxEO+9dVu1xa+JVXG9ATkNTXFJUVV8pLSg3O1R6bthuWvNlXOhnWfVXUKUnPQ1RUHxsWu1mWvJuYfKDdOBbX3xKUktWV1VETlhLVWdBSmVASmg7RFg2PjdERDZMRD1CPDczMjs+QlpGTmxJTpNZX4hlanNVXVMjJzlAP2ZdWJZuZrNva7ZiZI1NTmI3N0VOTWFta5V1cbhzbsNub5FZV21ST1hXUlM4QjEvOioqNykoNiosPElNVXJZW4RVVYVYWIhSWHs3RVgvP0xJSUlTUVFZVFZbVlg7Nzw1MzkrLTUyNT0/QkpFRV0/QVk8RFFES1xJTFpCRU1FSE1AQkJMUVBRWFVDTEkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';
    var url = 'http://x-torrents.org/browse.php';
    var root_url = 'http://x-torrents.org/';
    var login_url = 'http://x-torrents.org/login';
    var about = 'Крупнейший торрент трекер X-Torrents.org. У нас можно бесплатно скачать игры, фильмы, музыку, ..., музыку. На нашем torrent трекере самые последние новинки фильмов (DVD/HDTV). Все фильмы на x-torrents.org имеют качественное изображение и звук!';
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */['tv'],
                /* Музыка */['music', 'video-clips'],
                /* Игры */['games', 'games_psp', 'pda-games'],
                /* Фильмы */['films', 'dvd', 'hdtv'],
                /* Мультфтльмы */['mult'],
                /* Книги */['knigi'],
                /* ПО */['soft'],
                /* Анимэ */['anime'],
                /* Док. и юмор */['doc-films']
            ];
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var calculateTime = function (time) {
            time = $.trim(time).split(" ");
            var date = time[0].split('-');
            time = time[1].split(':');
            return Math.round((new Date(parseInt(date[0]), parseInt(date[1]) - 1, parseInt(date[2]), parseInt(time[0]), parseInt(time[1]))).getTime() / 1000);
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            if (t.find('input[name="username"]').length) {
                view.auth(0, filename);
                return [];
            } else
                view.auth(1, filename);
            t = t.find('table.embedded').children('#highlighted').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.length < 5) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(0).children('a').children('img').attr('alt'),
                        url: root_url + td.eq(0).children('a').attr('href'),
                        id: calculateCategory(td.eq(0).children('a').attr('href').replace('.html', ''))
                    },
                    title: td.eq(1).children('a').text().replace('√', ''),
                    url: root_url + td.eq(1).children('a').attr('href'),
                    size: ex_kit.format_size(td.eq(3).text()),
                    seeds: $.trim(td.eq(4).text().split('|')[0]),
                    leechs: $.trim(td.eq(4).text().split('|')[1]),
                    time: calculateTime(td.eq(1).children('i').text())
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url + '?search=' + ex_kit.in_cp1251(text),
                cache: false,
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        login_url: login_url,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 1, 0, 0, 0]
    }
}();torrent_lib.inmac = function () {
    var name = 'InMac';
    var filename = 'inmac';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAABMLAAATCwAAAAAAAAAAAAD///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8BvIYqT8WNJ2vFjShrxY0oa8WMKGvAiSlldEYuA////wH///8B////Af///wH///8B////Af///wH///8BpnAoI72AKcW4fynFvYQqf7qCKoG5gSqdxIUq2f///wH///8B////Af///wH///8B////Af///wH///8BsXUlgahuJJ+lcCdDtnUi27BzI4GqbyJttnUi26VuJVWfgCAD////Af///wH///8B////Af///wG4cSoDpnIpK7l6JbH///8Bn18gA6NyKxmtcSOVtHYj16hzKGmucyNtoXQqEf///wH///8B////Af///wH///8Bv4AgA6x0KEXBgCit////Aa12J1+9fiijunsm27l6JN/AfyeptXYlpbl7J5mqgCoD////Af///wH///8B////AbiORwOmdCspv4Ao7aZ2LDXCgSjpsHcoV6VzLCFKVT8DxXM5A6JxLR+7fSjlfWY1Bf///wH///8B////Af///wH///8BgmM2CcWFLfGqdi1RxYUt64toLgeqgCoD////Af///wH///8Bxocuy655LjvUjkcD////Af///wH///8B////AdSAKgPNjS7RsHotWcOGK/mmdi0fqoAqA////wGqgCoDwIIiA72DLIG+hC2PqoArA////wH///8B////Af///wGKZy4LzpAr5beBK0vQkSzftX4rQ55gIgPUgCoDlmsuFbmCK1PDiCq3z5Aq+7R/LFX///8Bo3UuF7yGKl2+hyllzJApx8qPKduhdCwN0pUrvcCIKZXBiSmB1JYqx82RKfXTlSvLvoYphcCGKWW2gCtP////AYBmMwO7hSln05cqpcKKKIGpeCsV3Z4+A9GWKMnVmSf3z5Qpr7uFKWGldSwd////Af///wH///8B////Af///wH///8B////AbiORwP///8B////Af///wHPlirNuIQqO8CCPgP///8BqoAqA////wH///8B////Af///wH///8B////Af///wH///8B////Af///wGqgCsDoXQtEf///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8B////Af///wH///8BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%3D%3D';
    var login_url = 'https://inmac.org/login.php';
    var url = 'https://inmac.org/tracker.php';
    var root_url = 'https://inmac.org/';
    var about = 'Русскоязычный MAC - трекер, макинтош, хакинтош, программы, игры, видео, музыка, форум, вопросы, решения, общение..';
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[],
                /* Музыка */[331, 332, 333, 334, 335, 336, 337, 273],
                /* Игры */[376, 17, 426, 414, 264, 369, 370, 371, 372, 373, 374, 348, 381],
                /* Фильмы */[378, 457, 453, 454, 455],
                /* Мультфтльмы */[],
                /* Книги */[7, 105, 389],
                /* ПО */[452, 13, 438, 254, 14, 439, 256, 42, 351, 350, 255, 15, 211, 39, 46, 208, 70, 16, 380, 382, 383, 384, 385, 386, 388, 393, 368, 367, 199, 366, 11, 30],
                /* Анимэ */[],
                /* Док. и юмор */[],
                /* Спорт */[]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            if (t.find('input[name="login_username"]').length) {
                view.auth(0, filename);
                return [];
            } else
                view.auth(1, filename);
            t = t.find('#search-results').children('#tor-tbl').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(5).children('a').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(2).children('a').text(),
                        url: root_url + td.eq(2).children('a').attr('href'),
                        id: calculateCategory(td.eq(2).children('a').attr('href').replace(/.*f=([0-9]*)$/i, "$1"))
                    },
                    title: td.eq(3).children('div').children('a').text(),
                    url: root_url + td.eq(3).children('div').children('a').attr('href'),
                    size: td.eq(5).children('u').text(),
                    dl: root_url + td.eq(5).children('a').attr('href'),
                    seeds: td.eq(6).children('b').text(),
                    leechs: td.eq(7).children('b').text(),
                    time: td.eq(9).children('u').text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'POST',
                url: url,
                cache: false,
                data: {
                    max: 1,
                    to: 0,
                    dm: 1,
                    x: 0,
                    y: 0,
                    nm: text
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        };
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        login_url: login_url,
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    };
}();torrent_lib.rgfootball = function () {
    var name = 'rgFootball';
    var filename = 'rgfootball';
    var icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3AkIAyUadlurrgAAA19JREFUOMt9U19sk3UUPb+v29rC9nXDCbIwNxodWZlLs1EIQzDSCaFOVkVgE//MUJEawoYx+ILExAeZDwNnukEcuC2GRSVTOhoU6IiFOcUh0Hb9Q5kjtGtpWtzasa/tpN/1gTBHMJ6ne09ybu45NxeYBZOpY3aLnYZd0vr1+qzZXG9vH/4TJtOXM3V//88Gt9tzrv+81WE+2XvN5fb0WSw/1QIAEaHlYNvD4jb9dgBA97cnltgdTvuI9zp5r9pFc3WdaF5XL454PBQIBMjhdJ06P3T5cQBornkDAMA+rzeisacdlmUblb5F2QPK7XVP+FqOkvZPgR6LJhmTSOhuQS5+WCyBuukd7o+jXzuf8gtrNt7LHJf9/s2/W/Tt3mfzut0UCoXEO3cnxQM1W0Vf9irxRs6zYnPd22IkNiGGw2HRaRsg85Z3Dz7QcQDQV/zcuoJVFauFVErkOEYJQYDc4aNLe3SwvaahvJExkstkNBmPIbNgPi1aoW766unq+QAgAYDlxoZ9C5aWqCGRgGMcrl2+wiQryrC+YRsrWbsGV+JhJuN5yKRSlhAERCcnWUCRMfrj4MUhDgC27jYqr7pcVFJaSslkEol4DLpaPZx2By7abGjY00QXLKcwVz4HxUolknnZ0BkNKgDIAIA00b2FoQlmazFB+M2Owrc2IRgMss7OTigUCrayqgqlUgUGP/sCc4sKkWYErqz875kB49E7DtUG7Vqp4ROaw/P4FWm2QCalTdpqlimXEwEIp6bw8sAoC/U7ITvejEAgdGkmxFha7Djb1gHh1hiTBaIsa9enOPbe+4z4HMQEgXW9uYNVdFnZtM+PVPQv5r/lT7xUu60XANiDc5xoPXJEDnGH4qPDYqBxC1tY8QzFOTAxmSKEIgidvQCVO4jbm5/nbk4njXtbDhwevem/b8Hn8WDYe2Nvuaai0joWrFSqy+hJdTkikQjy8/PB5+ay9jNW8G37WVFpiTlj+Poxw0Qci4sL71s4aTkHfW1N7BfboLZI90KrKzTGxkO3ubx58xgxxtmsVraycWd6Kif7g57j329+ZYN2WrV0CR6ycOhQO6pWL8PySg0+bjUVs67vXle8qlNNDXvTiWRqKEuj6d7/YeN4d3cPeJ6HXv/iox95+vQZ/B+I6BHuH9zfeibCOpt1AAAAAElFTkSuQmCC';
    var url = 'http://rgfootball.net/tracker.php';
    var root_url = 'http://rgfootball.net/';
    var about = 'Спортивный торрент трекер';
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[],
                /* Музыка */[],
                /* Игры */[166, 167],
                /* Фильмы */[],
                /* Мультфтльмы */[],
                /* Книги */[],
                /* ПО */[],
                /* Анимэ */[],
                /* Док. и юмор */[],
                /* Спорт */[2, 352, 196, 57, 56, 46, 3, 54, 351, 172, 194, 53, 55, 223, 4, 58, 353, 173, 202, 59, 60, 208, 5, 209, 63, 354, 174, 198, 62, 61, 6, 210, 66, 355, 175, 195, 65, 64, 7, 211, 69, 176, 68, 67, 8, 72, 348, 152, 71, 70, 212, 188, 356, 189, 190, 191, 213, 9, 87, 91, 90, 88, 89, 179, 214, 338, 340, 342, 344, 339, 341, 343, 345, 157, 158, 159, 232, 220, 160, 161, 162, 231, 215, 11, 376, 377, 13, 12, 74, 75, 76, 78, 79, 80, 14, 350, 118, 200, 255, 337, 185, 136, 216, 15, 380, 168, 178, 153, 217, 10, 367, 239, 241, 132, 230, 155, 133, 92, 77, 218, 16, 219, 18, 19, 17, 37, 199, 86, 36, 43, 21, 251, 379, 201, 47, 207, 48, 151, 206, 222, 131, 234, 49, 20, 233, 50, 150, 204, 197, 51, 203, 171, 22, 274, 125, 126, 127, 128, 130, 129, 23, 248, 117, 44, 227, 226, 38, 261, 262, 170, 169, 82, 205, 122, 123, 25, 98, 101, 100, 99, 97, 121, 145, 106, 240, 137, 139, 140, 141, 24, 142, 105, 104, 149, 103, 148, 96, 192, 193, 143, 144, 147, 138, 184, 26, 146, 95, 180, 182, 181, 183, 276, 277, 359, 360, 301, 369, 362, 361, 303, 304, 325, 327, 326, 316, 318, 278, 370, 292, 280, 281, 282, 279, 284, 285, 286, 287, 288, 289, 291, 290, 294, 296, 297, 298, 299, 305, 368, 364, 363, 306, 308, 245, 366, 365, 310, 312, 311, 313, 322, 324, 323, 328, 331, 330, 329, 333, 371, 358, 319, 320, 283, 336, 335, 349]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++){
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            t = t.find('#tor-tbl').children('tbody').children('tr');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var td = t.eq(i).children('td');
                if (td.eq(5).children('a').attr('href') === undefined) {
                    continue;
                }
                arr.push({
                    category: {
                        title: td.eq(2).children('a').text(),
                        url: root_url + td.eq(2).children('a').attr('href').replace(/.*href='(.*)';/i, '$1'),
                        id: calculateCategory(td.eq(2).children('a').attr('href').replace(/.*f=([0-9]*)$/i, "$1"))
                    },
                    title: td.eq(3).children('div').children('a').eq(0).text(),
                    url: root_url + td.eq(3).children('div').children('a').eq(0).attr('href'),
                    size: td.eq(5).children('u').text(),
                    dl: root_url + td.eq(5).children('a').attr('href'),
                    seeds: td.eq(6).children('b').text(),
                    leechs: td.eq(7).children('b').text(),
                    time: td.eq(9).children('u').text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url,
                cache: false,
                data: {
                    nm: text
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib.riperam = function () {
    var name = 'riper.am';
    var filename = 'riperam';
    var icon = 'data:image/x-icon;base64,AAABAAEAEBAAAAEAGABoAwAAFgAAACgAAAAQAAAAIAAAAAEAGAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8AAAD///////////////////////////////////////////////////////8AAAAAAAD///8BAp0BAp0BAp0BAp0BAp0BAp0BAp0BAp0BAp0BAp0BAp0BAp3///8AAAAAAAD///8EBaAFBqBub8v////r7PUEBaAEBaBub8v////x8fYEBZ8FBZ////8AAAAAAAD///8ICaMJCaQICqQJCaP///8ICaRub8v////r7PUJCaQICaQICaT///8AAAAAAAD///8OD6gODqgND6gODqj///8ND6jx8fZub8sND6gND6gOD6gODqj///8AAAAAAAD///8TFa0TFK4TFa0UFK3////////x8fb///////8UFK0TFK0TFK3///8AAAAAAAD///8ZGrIZG7IZG7IZG7P///8ZGrMaGrMaGrLr7PX///8aG7MaG7P///8AAAAAAAD///8gIbgfIbgfILggILj///8gIbgfILcgIbgfILj///8gILgfIbj///8AAAAAAAD///8lJr0lJr0lJr1ub8v///8lJr0lJr0lJr3r7PX///8lJr0lJ73///8AAAAAAAD///8rK8IqK8H////////////////x8fb///////8rK8ErLMIqLML///8AAAAAAAD///8uMMUvMMUvMMVub8svMMYvL8UvMMUvMMUvMMUvMMUvMMYuMMX///8AAAAAAAD///8yM8gyM8gyM8gyM8gyM8gNx9ENx9ENx9EyM8gyM8gyM8gyM8j///8AAAAAAAD///8yM8gyM8gyM8gyM8gNx9EyM8gNx9EyM8gNx9EyM8gyM8gyM8j///8AAAAAAAD///////////////////////////////////////////////////////8AAAD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPCEtLQokKCdib2R5JykuZXEoMCkuY3NzKCd3aWR0aCcpCi0tPgo%3D';
    var login_url = 'http://riper.am/ucp.php?mode=login';
    var url = 'http://riper.am/search.php';
    var root_url = 'http://riper.am/';
    var about = 'Riper.AM - Торрент трекер. Смотреть онлайн. Фильмы, сериалы, музыка, игры , софт, книги все новинки только для вас';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var web = function () {
        var calculateCategory = function (f) {
            var groups_arr = [
                /* Сериалы */[240, 19, 216, 363, 118, 153, 217, 632, 319, 183, 178, 364, 267, 365, 353, 266, 268, 160, 274, 20, 210, 550, 601, 639, 48, 555, 631, 501, 509, 131, 376, 152, 628, 563, 562, 354, 640, 598, 641, 644, 213, 372, 272, 551, 645, 635, 507, 558, 225, 359, 552, 630, 226, 117, 358, 642, 355, 445, 273, 505, 565, 373, 360, 646, 500],
                /* Музыка */[243, 26, 96, 70, 97, 72, 71, 73, 98, 74, 99, 75, 100, 76, 101, 78, 77, 79, 102, 80, 103, 87, 86, 85, 84, 83, 82, 81],
                /* Игры */[298, 299, 302, 320, 300, 312, 303, 308, 304, 305, 307, 306, 311, 310, 309, 338, 313, 301, 314, 315, 316, 321, 317, 339, 318],
                /* Фильмы */[238, 368, 425, 50, 52, 424, 51, 371, 251, 349, 350, 351, 352, 239, 420, 12, 13, 422, 15, 14],
                /* Мультфтльмы */[423, 16, 17, 18, 21, 185, 463, 633, 606, 162, 151, 22, 198],
                /* Книги */[],
                /* ПО */[382, 383, 384, 385, 386, 387, 389, 390, 395, 396, 397, 398, 391, 405, 406, 407, 408, 392, 409, 410, 411, 412, 413, 414, 399, 400, 401, 402, 404, 403, 393, 394],
                /* Анимэ */[232, 245, 246, 592, 594, 591, 595, 596, 597, 242, 164, 167, 165, 166],
                /* Док. и юмор */[241, 23, 446, 366, 553, 229, 491, 516, 577, 478, 534, 528, 540, 471, 593, 538, 561, 526, 605, 344, 459, 191, 519, 527, 460, 190, 477, 255, 256, 634, 574, 637, 33, 270, 450, 514, 209, 530, 475, 517, 548, 456, 469, 479, 480, 189, 541, 560, 447, 529, 525, 522, 472, 533, 484, 511, 531, 638, 269, 524, 228, 559, 636, 493, 545, 537, 547, 468, 588, 348, 539, 490, 536, 544, 457, 520, 518, 489, 495, 271, 496, 515, 449, 492, 535, 521, 470, 451, 497, 188, 494, 543, 448, 59, 279, 281, 280, 542, 575, 576, 578, 579, 589, 580, 581, 582, 583, 584, 585, 586, 587, 24, 194, 69, 88, 379, 68, 65, 89, 643, 532, 63, 590, 498, 614, 252, 452, 323, 599, 333, 334, 332, 335, 331, 327, 324, 329, 336, 328, 325, 337, 330, 326, 199],
                /* Спорт */[25, 616, 201, 146, 127, 145, 211, 192, 622, 346],
                /* xxx */[46]
            ];
            f = parseInt(f);
            for (var i = 0, len = groups_arr.length; i < len; i++) {
                if (groups_arr[i].indexOf(f) !== -1) {
                    return i;
                }
            }
            return -1;
        };
        var calculateTime = function (t) {
            t = t.replace(',', '').replace(/\s/g, ':').replace('янв', '1').replace('фев', '2').replace('мар', '3')
                .replace('апр', '4').replace('май', '5').replace('июн', '6')
                .replace('июл', '7').replace('авг', '8').replace('сен', '9')
                .replace('окт', '10').replace('ноя', '11').replace('дек', '12');
            var dd = t.split(':');
            return Math.round((new Date(parseInt(dd[2]), parseInt(dd[1]) - 1, parseInt(dd[0]), parseInt(dd[3]), parseInt(dd[4]))).getTime() / 1000);
        };
        var readCode = function (c) {
            c = engine.contentFilter(c);
            var t = engine.load_in_sandbox(c);
            if (t.find('#message > div.inner').length > 0 && t.find('#message > div.inner > p').text().indexOf('попробуйте чуть позже') > 0) {
                view.auth(0, filename);
                return [];
            } else
                view.auth(1, filename);
            t = t.find('div.inner').children('ul.topiclist.topics').children('li');
            var l = t.length;
            var arr = [];
            for (var i = 0; i < l; i++) {
                var dl = t.eq(i).children('dl').children();
                var obj_dl_0 = dl.eq(0);
                var obj_dl_0_a = obj_dl_0.children('a');
                var corr = 0;
                if (parseInt(obj_dl_0_a.eq(0).children('img').attr('width')) === 11) {
                    corr += 1
                }
                var dl_link = dl.eq(0 + corr).children('a').eq(0).attr('href');
                if (dl_link === undefined || dl_link.indexOf('download/file') === -1) {
                    continue;
                }
                var obj_dl_1_span = dl.eq(1).children('span');
                var attrs = obj_dl_0.text().replace(/.*»(.*)\n.*: (.*),.*/, "%split%$1%split%$2%split%").split('%split%');
                var dt_atr_c = obj_dl_0_a.length;
                arr.push({
                    title: obj_dl_0_a.eq(1 + corr).text(),
                    url: obj_dl_0_a.eq(1 + corr).attr('href'),
                    dl: root_url + dl_link,
                    time: calculateTime(attrs[1].trim()),
                    size: ex_kit.format_size(attrs[2].trim()),
                    category: {
                        title: obj_dl_0_a.eq(dt_atr_c - 1).text(),
                        url: obj_dl_0_a.eq(dt_atr_c - 1).attr('href'),
                        id: -1
                    },
                    seeds: obj_dl_1_span.eq(0).text(),
                    leechs: obj_dl_1_span.eq(1).text()
                });
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined)
                xhr.abort();
            xhr = engine.ajax({
                type: 'GET',
                url: url,
                cache: false,
                data: {
                    keywords: text,
                    sr: 'topics',
                    sf: 'titleonly',
                    fp: '1',
                    tracker_search: 'torrent'
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        }
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        login_url: login_url,
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
}();torrent_lib['ru-board'] = function () {
    var name = 'ru-board';
    var filename = 'ru-board';
    var icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTFH80I3AAACAElEQVQ4T2P4hw2cPnF05cIZK5bMh/KRAHYNy6dO2RRs2xriDuUjAewaJhcmbyuOWJgXfuHCBagQDGDX0J2XNyU6qjs2+vr161AhGEDXcOjggarSwiW+OocdVI/6as+d2AqVgAGEBqDSTdOqlrekzLJX+qAv9ZuJ+Q8v5wlv3Xwvi0ePHkEVQTQA+RE+Hg+XZ71dEv9qqvvUYN2bTExADUDUIcW/qSF0e1/SpuVzIdqgNqxZMvvn1oJ7kwIvpQk/atSd4KUM1ANUPSdIs9lJcdes1lVz+yf0dEE1HNmz+dYU37+rw//sqfx5Zs7jOUn3atQKbeV6QvQ210V+vLju7/MTfz/ePbpzDVTDpPKYRzP9QRq2F/45OeHvw/3/PtzbOanqzqKsvxtTIKasWTB5zYrFUA1AcHD3trZw40dLU0Ea7mxd1ldzr9t+YYn7+/mBS7ItpzXEz5gIcg8QgDS8efOmu6Mzkp+9VIZ9aqrLvNqUM4lc3xYFPNnYuKg2/NnOtn/3Vi+ZOwmh4fbt22FBwR5sLPNlWTYasmzyYH9TxP5jmvXfXSV/j3cD7fx3Y97yGe0IDRBw/vz53tSEfn2es4EsjzJBGkBe2lN5a1XVlnmdQEMhyhAaIACobUpuwu5A9p8T9K7PTlgxqQYoApUDA3QNEHDzwokVUzrRlILAv38AcPBDHc0bg+4AAAAASUVORK5CYII%3D';
    var login_url = 'http://dc.ru-board.com/login.php';
    var url = 'http://dc.ru-board.com/controls/tdata.php';
    var root_url = 'http://dc.ru-board.com/';
    var about = 'БитТоррент-трекере крупнейшего компьютерного форума в русскоязычном сегменте сети Интернет.';
    /*
     * a = требует авторизации
     * l = русскоязычный или нет
     * rs= поддержка русского языка
     */
    var flags = {
        a: 1,
        l: 1,
        rs: 1
    };
    var xhr = undefined;
    var getCatName = function (id) {
        id = parseInt(id);
        if (id === 12) {
            return "БД и Карты";
        } else if (id === 8) {
            return "Аниме";
        } else if (id === 5) {
            return "Худ. Фильмы";
        } else if (id === 15) {
            return "Обучающие Курсы";
        } else if (id === 2) {
            return "Литература";
        } else if (id === 6) {
            return "Музыка";
        } else if (id === 1) {
            return "Софт";
        } else if (id === 4) {
            return "Игры";
        } else if (id === 7) {
            return "Мультфильмы";
        } else if (id === 14) {
            return "Док. Фильмы";
        } else if (id === 16) {
            return "Телепередачи";
        } else if (id === 10) {
            return "Сериалы";
        } else if (id === 11) {
            return "Клипы";
        } else if (id === 9) {
            return "XXX";
        }
        return undefined;
    };
    var getCat = function (id) {
        id = parseInt(id);
        if (id === 12 || id === 1) {
            return 6;
        } else if (id === 8) {
            return 7;
        } else if (id === 5) {
            return 3;
        } else if (id === 2) {
            return 5;
        } else if (id === 6) {
            return 1;
        } else if (id === 4) {
            return 2;
        } else if (id === 7) {
            return 4;
        } else if (id === 14 || id === 16) {
            return 8;
        } else if (id === 10) {
            return 0;
        } else if (id === 11) {
            return 1;
        } else if (id === 9) {
            return 10;
        }
        return -1;
    };
    var web = function () {
        var readCode = function (c) {
            if (c.length === 0) {
                view.auth(0, filename);
                return [];
            } else {
                view.auth(1, filename);
            }
            c = JSON.parse(c);
            if (c.torrents === undefined) {
                return;
            }
            var len = c.torrents.length;
            var arr = new Array(len);
            for (var i = 0; i < len; i++) {
                var item = c.torrents[i];
                var title = item.name;
                title = document.createTextNode(title).textContent;
                arr[i] = {
                    category: {
                        title: getCatName(item.catid),
                        id: getCat(item.catid)
                    },
                    title: title,
                    url: root_url + 'details.php?id=' + item.id,
                    size: item.size,
                    seeds: item.seeders,
                    leechs: item.leechers,
                    time: ex_kit.format_date(0, item.date)
                };
            }
            return arr;
        };
        var loadPage = function (text) {
            var t = text;
            if (xhr !== undefined) {
                xhr.abort();
            }
            xhr = engine.ajax({
                type: 'POST',
                url: url,
                cache: false,
                data: {
                    take: 20,
                    skip: 0,
                    page: 1,
                    pageSize: 20,
                    filter: {
                        logic: 'and',
                        filters: [
                            {
                                field: 'name',
                                operator: 'contains',
                                value: text
                            }
                        ]
                    }
                },
                success: function (data) {
                    view.result(filename, readCode(data), t);
                },
                error: function () {
                    view.loadingStatus(2, filename);
                }
            });
        };
        return {
            getPage: function (a) {
                return loadPage(a);
            }
        };
    }();
    var find = function (text) {
        return web.getPage(text);
    };
    return {
        find: function (a) {
            return find(a);
        },
        stop: function(){
            if (xhr !== undefined) {
                xhr.abort();
            }
            //view.loadingStatus(1, filename);
        },
        login_url: login_url,
        name: name,
        icon: icon,
        about: about,
        url: root_url,
        filename: filename,
        flags: flags,
        tests: [0, 0, 1, 0, 0, 1, 0, 0, 0]
    };
}();